/*!
 * The MIT License
 * 
 * Copyright (c) 2018-present Liquid Carrot Corporation <people@liquidcarrot.io> https://liquidcarrot.io.
 * 
 * Copyright for portions of Carrot are held by the following parties as a part of project Carrot:
 * - Copyright 2017 Thomas Wagenaar <wagenaartje@protonmail.com>
 * - Copyright 2017 Juan Cazala - cazala.com
 * - Copyright 2015 Andrej Karpathy <andrej.karpathy@gmail.com>
 * - Copyright 2018 Menno van Rahden - https://github.com/mvrahden
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=17)}([function(t,n,e){const r={activation:e(7),mutation:e(18),selection:e(19),crossover:e(20),cost:e(5),gating:e(21),connection:e(22),rate:e(8)};t.exports=r},function(t,n,e){(function(t,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,u=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",p=1,h=2,g=4,d=1,_=2,v=1,m=2,y=4,w=8,A=16,O=32,b=64,E=128,S=256,L=512,N=30,x="...",T=800,R=16,D=1,M=2,I=1/0,z=9007199254740991,j=17976931348623157e292,P=NaN,k=4294967295,B=k-1,U=k>>>1,C=[["ary",E],["bind",v],["bindKey",m],["curry",w],["curryRight",A],["flip",L],["partial",O],["partialRight",b],["rearg",S]],q="[object Arguments]",F="[object Array]",G="[object AsyncFunction]",W="[object Boolean]",J="[object Date]",$="[object DOMException]",H="[object Error]",V="[object Function]",X="[object GeneratorFunction]",Y="[object Map]",K="[object Number]",Q="[object Null]",Z="[object Object]",tt="[object Proxy]",nt="[object RegExp]",et="[object Set]",rt="[object String]",ot="[object Symbol]",it="[object Undefined]",ut="[object WeakMap]",at="[object WeakSet]",st="[object ArrayBuffer]",ct="[object DataView]",lt="[object Float32Array]",ft="[object Float64Array]",pt="[object Int8Array]",ht="[object Int16Array]",gt="[object Int32Array]",dt="[object Uint8Array]",_t="[object Uint8ClampedArray]",vt="[object Uint16Array]",mt="[object Uint32Array]",yt=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,Et=RegExp(Ot.source),St=RegExp(bt.source),Lt=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Mt.source),zt=/^\s+|\s+$/g,jt=/^\s+/,Pt=/\s+$/,kt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,Jt=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="[\\ud800-\\udfff]",nn="["+Zt+"]",en="["+Qt+"]",rn="\\d+",on="[\\u2700-\\u27bf]",un="[a-z\\xdf-\\xf6\\xf8-\\xff]",an="[^\\ud800-\\udfff"+Zt+rn+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",sn="\\ud83c[\\udffb-\\udfff]",cn="[^\\ud800-\\udfff]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",fn="[\\ud800-\\udbff][\\udc00-\\udfff]",pn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",hn="(?:"+un+"|"+an+")",gn="(?:"+pn+"|"+an+")",dn="(?:"+en+"|"+sn+")"+"?",_n="[\\ufe0e\\ufe0f]?"+dn+("(?:\\u200d(?:"+[cn,ln,fn].join("|")+")[\\ufe0e\\ufe0f]?"+dn+")*"),vn="(?:"+[on,ln,fn].join("|")+")"+_n,mn="(?:"+[cn+en+"?",en,ln,fn,tn].join("|")+")",yn=RegExp("['’]","g"),wn=RegExp(en,"g"),An=RegExp(sn+"(?="+sn+")|"+mn+_n,"g"),On=RegExp([pn+"?"+un+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[nn,pn,"$"].join("|")+")",gn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[nn,pn+hn,"$"].join("|")+")",pn+"?"+hn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",pn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rn,vn].join("|"),"g"),bn=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),En=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ln=-1,Nn={};Nn[lt]=Nn[ft]=Nn[pt]=Nn[ht]=Nn[gt]=Nn[dt]=Nn[_t]=Nn[vt]=Nn[mt]=!0,Nn[q]=Nn[F]=Nn[st]=Nn[W]=Nn[ct]=Nn[J]=Nn[H]=Nn[V]=Nn[Y]=Nn[K]=Nn[Z]=Nn[nt]=Nn[et]=Nn[rt]=Nn[ut]=!1;var xn={};xn[q]=xn[F]=xn[st]=xn[ct]=xn[W]=xn[J]=xn[lt]=xn[ft]=xn[pt]=xn[ht]=xn[gt]=xn[Y]=xn[K]=xn[Z]=xn[nt]=xn[et]=xn[rt]=xn[ot]=xn[dt]=xn[_t]=xn[vt]=xn[mt]=!0,xn[H]=xn[V]=xn[ut]=!1;var Tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rn=parseFloat,Dn=parseInt,Mn="object"==typeof t&&t&&t.Object===Object&&t,In="object"==typeof self&&self&&self.Object===Object&&self,zn=Mn||In||Function("return this")(),jn=n&&!n.nodeType&&n,Pn=jn&&"object"==typeof r&&r&&!r.nodeType&&r,kn=Pn&&Pn.exports===jn,Bn=kn&&Mn.process,Un=function(){try{var t=Pn&&Pn.require&&Pn.require("util").types;return t||Bn&&Bn.binding&&Bn.binding("util")}catch(t){}}(),Cn=Un&&Un.isArrayBuffer,qn=Un&&Un.isDate,Fn=Un&&Un.isMap,Gn=Un&&Un.isRegExp,Wn=Un&&Un.isSet,Jn=Un&&Un.isTypedArray;function $n(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Hn(t,n,e,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var u=t[o];n(r,u,e(u),t)}return r}function Vn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function Xn(t,n){for(var e=null==t?0:t.length;e--&&!1!==n(t[e],e,t););return t}function Yn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return!1;return!0}function Kn(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var u=t[e];n(u,e,t)&&(i[o++]=u)}return i}function Qn(t,n){return!!(null==t?0:t.length)&&se(t,n,0)>-1}function Zn(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1}function te(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function ne(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function ee(t,n,e,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(e=t[++o]);++o<i;)e=n(e,t[o],o,t);return e}function re(t,n,e,r){var o=null==t?0:t.length;for(r&&o&&(e=t[--o]);o--;)e=n(e,t[o],o,t);return e}function oe(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}var ie=pe("length");function ue(t,n,e){var r;return e(t,(function(t,e,o){if(n(t,e,o))return r=e,!1})),r}function ae(t,n,e,r){for(var o=t.length,i=e+(r?1:-1);r?i--:++i<o;)if(n(t[i],i,t))return i;return-1}function se(t,n,e){return n==n?function(t,n,e){var r=e-1,o=t.length;for(;++r<o;)if(t[r]===n)return r;return-1}(t,n,e):ae(t,le,e)}function ce(t,n,e,r){for(var o=e-1,i=t.length;++o<i;)if(r(t[o],n))return o;return-1}function le(t){return t!=t}function fe(t,n){var e=null==t?0:t.length;return e?de(t,n)/e:P}function pe(t){return function(n){return null==n?i:n[t]}}function he(t){return function(n){return null==t?i:t[n]}}function ge(t,n,e,r,o){return o(t,(function(t,o,i){e=r?(r=!1,t):n(e,t,o,i)})),e}function de(t,n){for(var e,r=-1,o=t.length;++r<o;){var u=n(t[r]);u!==i&&(e=e===i?u:e+u)}return e}function _e(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function ve(t){return function(n){return t(n)}}function me(t,n){return te(n,(function(n){return t[n]}))}function ye(t,n){return t.has(n)}function we(t,n){for(var e=-1,r=t.length;++e<r&&se(n,t[e],0)>-1;);return e}function Ae(t,n){for(var e=t.length;e--&&se(n,t[e],0)>-1;);return e}var Oe=he({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),be=he({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ee(t){return"\\"+Tn[t]}function Se(t){return bn.test(t)}function Le(t){var n=-1,e=Array(t.size);return t.forEach((function(t,r){e[++n]=[r,t]})),e}function Ne(t,n){return function(e){return t(n(e))}}function xe(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e];u!==n&&u!==f||(t[e]=f,i[o++]=e)}return i}function Te(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}function Re(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=[t,t]})),e}function De(t){return Se(t)?function(t){var n=An.lastIndex=0;for(;An.test(t);)++n;return n}(t):ie(t)}function Me(t){return Se(t)?function(t){return t.match(An)||[]}(t):function(t){return t.split("")}(t)}var Ie=he({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var ze=function t(n){var e,r=(n=null==n?zn:ze.defaults(zn.Object(),n,ze.pick(zn,Sn))).Array,o=n.Date,Qt=n.Error,Zt=n.Function,tn=n.Math,nn=n.Object,en=n.RegExp,rn=n.String,on=n.TypeError,un=r.prototype,an=Zt.prototype,sn=nn.prototype,cn=n["__core-js_shared__"],ln=an.toString,fn=sn.hasOwnProperty,pn=0,hn=(e=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",gn=sn.toString,dn=ln.call(nn),_n=zn._,vn=en("^"+ln.call(fn).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=kn?n.Buffer:i,An=n.Symbol,bn=n.Uint8Array,Tn=mn?mn.allocUnsafe:i,Mn=Ne(nn.getPrototypeOf,nn),In=nn.create,jn=sn.propertyIsEnumerable,Pn=un.splice,Bn=An?An.isConcatSpreadable:i,Un=An?An.iterator:i,ie=An?An.toStringTag:i,he=function(){try{var t=Ui(nn,"defineProperty");return t({},"",{}),t}catch(t){}}(),je=n.clearTimeout!==zn.clearTimeout&&n.clearTimeout,Pe=o&&o.now!==zn.Date.now&&o.now,ke=n.setTimeout!==zn.setTimeout&&n.setTimeout,Be=tn.ceil,Ue=tn.floor,Ce=nn.getOwnPropertySymbols,qe=mn?mn.isBuffer:i,Fe=n.isFinite,Ge=un.join,We=Ne(nn.keys,nn),Je=tn.max,$e=tn.min,He=o.now,Ve=n.parseInt,Xe=tn.random,Ye=un.reverse,Ke=Ui(n,"DataView"),Qe=Ui(n,"Map"),Ze=Ui(n,"Promise"),tr=Ui(n,"Set"),nr=Ui(n,"WeakMap"),er=Ui(nn,"create"),rr=nr&&new nr,or={},ir=fu(Ke),ur=fu(Qe),ar=fu(Ze),sr=fu(tr),cr=fu(nr),lr=An?An.prototype:i,fr=lr?lr.valueOf:i,pr=lr?lr.toString:i;function hr(t){if(xa(t)&&!va(t)&&!(t instanceof vr)){if(t instanceof _r)return t;if(fn.call(t,"__wrapped__"))return pu(t)}return new _r(t)}var gr=function(){function t(){}return function(n){if(!Na(n))return{};if(In)return In(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function dr(){}function _r(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}function vr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=k,this.__views__=[]}function mr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function yr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function wr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ar(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new wr;++n<e;)this.add(t[n])}function Or(t){var n=this.__data__=new yr(t);this.size=n.size}function br(t,n){var e=va(t),r=!e&&_a(t),o=!e&&!r&&Aa(t),i=!e&&!r&&!o&&Pa(t),u=e||r||o||i,a=u?_e(t.length,rn):[],s=a.length;for(var c in t)!n&&!fn.call(t,c)||u&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$i(c,s))||a.push(c);return a}function Er(t){var n=t.length;return n?t[Oo(0,n-1)]:i}function Sr(t,n){return su(ri(t),zr(n,0,t.length))}function Lr(t){return su(ri(t))}function Nr(t,n,e){(e===i||ha(t[n],e))&&(e!==i||n in t)||Mr(t,n,e)}function xr(t,n,e){var r=t[n];fn.call(t,n)&&ha(r,e)&&(e!==i||n in t)||Mr(t,n,e)}function Tr(t,n){for(var e=t.length;e--;)if(ha(t[e][0],n))return e;return-1}function Rr(t,n,e,r){return Ur(t,(function(t,o,i){n(r,t,e(t),i)})),r}function Dr(t,n){return t&&oi(n,os(n),t)}function Mr(t,n,e){"__proto__"==n&&he?he(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Ir(t,n){for(var e=-1,o=n.length,u=r(o),a=null==t;++e<o;)u[e]=a?i:Za(t,n[e]);return u}function zr(t,n,e){return t==t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function jr(t,n,e,r,o,u){var a,s=n&p,c=n&h,l=n&g;if(e&&(a=o?e(t,r,o,u):e(t)),a!==i)return a;if(!Na(t))return t;var f=va(t);if(f){if(a=function(t){var n=t.length,e=new t.constructor(n);n&&"string"==typeof t[0]&&fn.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!s)return ri(t,a)}else{var d=Fi(t),_=d==V||d==X;if(Aa(t))return Ko(t,s);if(d==Z||d==q||_&&!o){if(a=c||_?{}:Wi(t),!s)return c?function(t,n){return oi(t,qi(t),n)}(t,function(t,n){return t&&oi(n,is(n),t)}(a,t)):function(t,n){return oi(t,Ci(t),n)}(t,Dr(a,t))}else{if(!xn[d])return o?t:{};a=function(t,n,e){var r=t.constructor;switch(n){case st:return Qo(t);case W:case J:return new r(+t);case ct:return function(t,n){var e=n?Qo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case lt:case ft:case pt:case ht:case gt:case dt:case _t:case vt:case mt:return Zo(t,e);case Y:return new r;case K:case rt:return new r(t);case nt:return function(t){var n=new t.constructor(t.source,Gt.exec(t));return n.lastIndex=t.lastIndex,n}(t);case et:return new r;case ot:return o=t,fr?nn(fr.call(o)):{}}var o}(t,d,s)}}u||(u=new Or);var v=u.get(t);if(v)return v;u.set(t,a),Ia(t)?t.forEach((function(r){a.add(jr(r,n,e,r,t,u))})):Ta(t)&&t.forEach((function(r,o){a.set(o,jr(r,n,e,o,t,u))}));var m=f?i:(l?c?Mi:Di:c?is:os)(t);return Vn(m||t,(function(r,o){m&&(r=t[o=r]),xr(a,o,jr(r,n,e,o,t,u))})),a}function Pr(t,n,e){var r=e.length;if(null==t)return!r;for(t=nn(t);r--;){var o=e[r],u=n[o],a=t[o];if(a===i&&!(o in t)||!u(a))return!1}return!0}function kr(t,n,e){if("function"!=typeof t)throw new on(s);return ou((function(){t.apply(i,e)}),n)}function Br(t,n,e,r){var o=-1,i=Qn,a=!0,s=t.length,c=[],l=n.length;if(!s)return c;e&&(n=te(n,ve(e))),r?(i=Zn,a=!1):n.length>=u&&(i=ye,a=!1,n=new Ar(n));t:for(;++o<s;){var f=t[o],p=null==e?f:e(f);if(f=r||0!==f?f:0,a&&p==p){for(var h=l;h--;)if(n[h]===p)continue t;c.push(f)}else i(n,p,r)||c.push(f)}return c}hr.templateSettings={escape:Lt,evaluate:Nt,interpolate:xt,variable:"",imports:{_:hr}},hr.prototype=dr.prototype,hr.prototype.constructor=hr,_r.prototype=gr(dr.prototype),_r.prototype.constructor=_r,vr.prototype=gr(dr.prototype),vr.prototype.constructor=vr,mr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},mr.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},mr.prototype.get=function(t){var n=this.__data__;if(er){var e=n[t];return e===c?i:e}return fn.call(n,t)?n[t]:i},mr.prototype.has=function(t){var n=this.__data__;return er?n[t]!==i:fn.call(n,t)},mr.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=er&&n===i?c:n,this},yr.prototype.clear=function(){this.__data__=[],this.size=0},yr.prototype.delete=function(t){var n=this.__data__,e=Tr(n,t);return!(e<0)&&(e==n.length-1?n.pop():Pn.call(n,e,1),--this.size,!0)},yr.prototype.get=function(t){var n=this.__data__,e=Tr(n,t);return e<0?i:n[e][1]},yr.prototype.has=function(t){return Tr(this.__data__,t)>-1},yr.prototype.set=function(t,n){var e=this.__data__,r=Tr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Qe||yr),string:new mr}},wr.prototype.delete=function(t){var n=ki(this,t).delete(t);return this.size-=n?1:0,n},wr.prototype.get=function(t){return ki(this,t).get(t)},wr.prototype.has=function(t){return ki(this,t).has(t)},wr.prototype.set=function(t,n){var e=ki(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this},Ar.prototype.add=Ar.prototype.push=function(t){return this.__data__.set(t,c),this},Ar.prototype.has=function(t){return this.__data__.has(t)},Or.prototype.clear=function(){this.__data__=new yr,this.size=0},Or.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Or.prototype.get=function(t){return this.__data__.get(t)},Or.prototype.has=function(t){return this.__data__.has(t)},Or.prototype.set=function(t,n){var e=this.__data__;if(e instanceof yr){var r=e.__data__;if(!Qe||r.length<u-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new wr(r)}return e.set(t,n),this.size=e.size,this};var Ur=ai(Hr),Cr=ai(Vr,!0);function qr(t,n){var e=!0;return Ur(t,(function(t,r,o){return e=!!n(t,r,o)})),e}function Fr(t,n,e){for(var r=-1,o=t.length;++r<o;){var u=t[r],a=n(u);if(null!=a&&(s===i?a==a&&!ja(a):e(a,s)))var s=a,c=u}return c}function Gr(t,n){var e=[];return Ur(t,(function(t,r,o){n(t,r,o)&&e.push(t)})),e}function Wr(t,n,e,r,o){var i=-1,u=t.length;for(e||(e=Ji),o||(o=[]);++i<u;){var a=t[i];n>0&&e(a)?n>1?Wr(a,n-1,e,r,o):ne(o,a):r||(o[o.length]=a)}return o}var Jr=si(),$r=si(!0);function Hr(t,n){return t&&Jr(t,n,os)}function Vr(t,n){return t&&$r(t,n,os)}function Xr(t,n){return Kn(n,(function(n){return Ea(t[n])}))}function Yr(t,n){for(var e=0,r=(n=Ho(n,t)).length;null!=t&&e<r;)t=t[lu(n[e++])];return e&&e==r?t:i}function Kr(t,n,e){var r=n(t);return va(t)?r:ne(r,e(t))}function Qr(t){return null==t?t===i?it:Q:ie&&ie in nn(t)?function(t){var n=fn.call(t,ie),e=t[ie];try{t[ie]=i;var r=!0}catch(t){}var o=gn.call(t);r&&(n?t[ie]=e:delete t[ie]);return o}(t):function(t){return gn.call(t)}(t)}function Zr(t,n){return t>n}function to(t,n){return null!=t&&fn.call(t,n)}function no(t,n){return null!=t&&n in nn(t)}function eo(t,n,e){for(var o=e?Zn:Qn,u=t[0].length,a=t.length,s=a,c=r(a),l=1/0,f=[];s--;){var p=t[s];s&&n&&(p=te(p,ve(n))),l=$e(p.length,l),c[s]=!e&&(n||u>=120&&p.length>=120)?new Ar(s&&p):i}p=t[0];var h=-1,g=c[0];t:for(;++h<u&&f.length<l;){var d=p[h],_=n?n(d):d;if(d=e||0!==d?d:0,!(g?ye(g,_):o(f,_,e))){for(s=a;--s;){var v=c[s];if(!(v?ye(v,_):o(t[s],_,e)))continue t}g&&g.push(_),f.push(d)}}return f}function ro(t,n,e){var r=null==(t=nu(t,n=Ho(n,t)))?t:t[lu(bu(n))];return null==r?i:$n(r,t,e)}function oo(t){return xa(t)&&Qr(t)==q}function io(t,n,e,r,o){return t===n||(null==t||null==n||!xa(t)&&!xa(n)?t!=t&&n!=n:function(t,n,e,r,o,u){var a=va(t),s=va(n),c=a?F:Fi(t),l=s?F:Fi(n),f=(c=c==q?Z:c)==Z,p=(l=l==q?Z:l)==Z,h=c==l;if(h&&Aa(t)){if(!Aa(n))return!1;a=!0,f=!1}if(h&&!f)return u||(u=new Or),a||Pa(t)?Ti(t,n,e,r,o,u):function(t,n,e,r,o,i,u){switch(e){case ct:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case st:return!(t.byteLength!=n.byteLength||!i(new bn(t),new bn(n)));case W:case J:case K:return ha(+t,+n);case H:return t.name==n.name&&t.message==n.message;case nt:case rt:return t==n+"";case Y:var a=Le;case et:var s=r&d;if(a||(a=Te),t.size!=n.size&&!s)return!1;var c=u.get(t);if(c)return c==n;r|=_,u.set(t,n);var l=Ti(a(t),a(n),r,o,i,u);return u.delete(t),l;case ot:if(fr)return fr.call(t)==fr.call(n)}return!1}(t,n,c,e,r,o,u);if(!(e&d)){var g=f&&fn.call(t,"__wrapped__"),v=p&&fn.call(n,"__wrapped__");if(g||v){var m=g?t.value():t,y=v?n.value():n;return u||(u=new Or),o(m,y,e,r,u)}}if(!h)return!1;return u||(u=new Or),function(t,n,e,r,o,u){var a=e&d,s=Di(t),c=s.length,l=Di(n).length;if(c!=l&&!a)return!1;var f=c;for(;f--;){var p=s[f];if(!(a?p in n:fn.call(n,p)))return!1}var h=u.get(t);if(h&&u.get(n))return h==n;var g=!0;u.set(t,n),u.set(n,t);var _=a;for(;++f<c;){p=s[f];var v=t[p],m=n[p];if(r)var y=a?r(m,v,p,n,t,u):r(v,m,p,t,n,u);if(!(y===i?v===m||o(v,m,e,r,u):y)){g=!1;break}_||(_="constructor"==p)}if(g&&!_){var w=t.constructor,A=n.constructor;w!=A&&"constructor"in t&&"constructor"in n&&!("function"==typeof w&&w instanceof w&&"function"==typeof A&&A instanceof A)&&(g=!1)}return u.delete(t),u.delete(n),g}(t,n,e,r,o,u)}(t,n,e,r,io,o))}function uo(t,n,e,r){var o=e.length,u=o,a=!r;if(null==t)return!u;for(t=nn(t);o--;){var s=e[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<u;){var c=(s=e[o])[0],l=t[c],f=s[1];if(a&&s[2]){if(l===i&&!(c in t))return!1}else{var p=new Or;if(r)var h=r(l,f,c,t,n,p);if(!(h===i?io(f,l,d|_,r,p):h))return!1}}return!0}function ao(t){return!(!Na(t)||(n=t,hn&&hn in n))&&(Ea(t)?vn:$t).test(fu(t));var n}function so(t){return"function"==typeof t?t:null==t?Rs:"object"==typeof t?va(t)?go(t[0],t[1]):ho(t):Us(t)}function co(t){if(!Ki(t))return We(t);var n=[];for(var e in nn(t))fn.call(t,e)&&"constructor"!=e&&n.push(e);return n}function lo(t){if(!Na(t))return function(t){var n=[];if(null!=t)for(var e in nn(t))n.push(e);return n}(t);var n=Ki(t),e=[];for(var r in t)("constructor"!=r||!n&&fn.call(t,r))&&e.push(r);return e}function fo(t,n){return t<n}function po(t,n){var e=-1,o=ya(t)?r(t.length):[];return Ur(t,(function(t,r,i){o[++e]=n(t,r,i)})),o}function ho(t){var n=Bi(t);return 1==n.length&&n[0][2]?Zi(n[0][0],n[0][1]):function(e){return e===t||uo(e,t,n)}}function go(t,n){return Vi(t)&&Qi(n)?Zi(lu(t),n):function(e){var r=Za(e,t);return r===i&&r===n?ts(e,t):io(n,r,d|_)}}function _o(t,n,e,r,o){t!==n&&Jr(n,(function(u,a){if(o||(o=new Or),Na(u))!function(t,n,e,r,o,u,a){var s=eu(t,e),c=eu(n,e),l=a.get(c);if(l)return void Nr(t,e,l);var f=u?u(s,c,e+"",t,n,a):i,p=f===i;if(p){var h=va(c),g=!h&&Aa(c),d=!h&&!g&&Pa(c);f=c,h||g||d?va(s)?f=s:wa(s)?f=ri(s):g?(p=!1,f=Ko(c,!0)):d?(p=!1,f=Zo(c,!0)):f=[]:Da(c)||_a(c)?(f=s,_a(s)?f=Wa(s):Na(s)&&!Ea(s)||(f=Wi(c))):p=!1}p&&(a.set(c,f),o(f,c,r,u,a),a.delete(c));Nr(t,e,f)}(t,n,a,e,_o,r,o);else{var s=r?r(eu(t,a),u,a+"",t,n,o):i;s===i&&(s=u),Nr(t,a,s)}}),is)}function vo(t,n){var e=t.length;if(e)return $i(n+=n<0?e:0,e)?t[n]:i}function mo(t,n,e){var r=-1;return n=te(n.length?n:[Rs],ve(Pi())),function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}(po(t,(function(t,e,o){return{criteria:te(n,(function(n){return n(t)})),index:++r,value:t}})),(function(t,n){return function(t,n,e){var r=-1,o=t.criteria,i=n.criteria,u=o.length,a=e.length;for(;++r<u;){var s=ti(o[r],i[r]);if(s){if(r>=a)return s;var c=e[r];return s*("desc"==c?-1:1)}}return t.index-n.index}(t,n,e)}))}function yo(t,n,e){for(var r=-1,o=n.length,i={};++r<o;){var u=n[r],a=Yr(t,u);e(a,u)&&No(i,Ho(u,t),a)}return i}function wo(t,n,e,r){var o=r?ce:se,i=-1,u=n.length,a=t;for(t===n&&(n=ri(n)),e&&(a=te(t,ve(e)));++i<u;)for(var s=0,c=n[i],l=e?e(c):c;(s=o(a,l,s,r))>-1;)a!==t&&Pn.call(a,s,1),Pn.call(t,s,1);return t}function Ao(t,n){for(var e=t?n.length:0,r=e-1;e--;){var o=n[e];if(e==r||o!==i){var i=o;$i(o)?Pn.call(t,o,1):Uo(t,o)}}return t}function Oo(t,n){return t+Ue(Xe()*(n-t+1))}function bo(t,n){var e="";if(!t||n<1||n>z)return e;do{n%2&&(e+=t),(n=Ue(n/2))&&(t+=t)}while(n);return e}function Eo(t,n){return iu(tu(t,n,Rs),t+"")}function So(t){return Er(hs(t))}function Lo(t,n){var e=hs(t);return su(e,zr(n,0,e.length))}function No(t,n,e,r){if(!Na(t))return t;for(var o=-1,u=(n=Ho(n,t)).length,a=u-1,s=t;null!=s&&++o<u;){var c=lu(n[o]),l=e;if(o!=a){var f=s[c];(l=r?r(f,c,s):i)===i&&(l=Na(f)?f:$i(n[o+1])?[]:{})}xr(s,c,l),s=s[c]}return t}var xo=rr?function(t,n){return rr.set(t,n),t}:Rs,To=he?function(t,n){return he(t,"toString",{configurable:!0,enumerable:!1,value:Ns(n),writable:!0})}:Rs;function Ro(t){return su(hs(t))}function Do(t,n,e){var o=-1,i=t.length;n<0&&(n=-n>i?0:i+n),(e=e>i?i:e)<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var u=r(i);++o<i;)u[o]=t[o+n];return u}function Mo(t,n){var e;return Ur(t,(function(t,r,o){return!(e=n(t,r,o))})),!!e}function Io(t,n,e){var r=0,o=null==t?r:t.length;if("number"==typeof n&&n==n&&o<=U){for(;r<o;){var i=r+o>>>1,u=t[i];null!==u&&!ja(u)&&(e?u<=n:u<n)?r=i+1:o=i}return o}return zo(t,n,Rs,e)}function zo(t,n,e,r){n=e(n);for(var o=0,u=null==t?0:t.length,a=n!=n,s=null===n,c=ja(n),l=n===i;o<u;){var f=Ue((o+u)/2),p=e(t[f]),h=p!==i,g=null===p,d=p==p,_=ja(p);if(a)var v=r||d;else v=l?d&&(r||h):s?d&&h&&(r||!g):c?d&&h&&!g&&(r||!_):!g&&!_&&(r?p<=n:p<n);v?o=f+1:u=f}return $e(u,B)}function jo(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e],a=n?n(u):u;if(!e||!ha(a,s)){var s=a;i[o++]=0===u?0:u}}return i}function Po(t){return"number"==typeof t?t:ja(t)?P:+t}function ko(t){if("string"==typeof t)return t;if(va(t))return te(t,ko)+"";if(ja(t))return pr?pr.call(t):"";var n=t+"";return"0"==n&&1/t==-I?"-0":n}function Bo(t,n,e){var r=-1,o=Qn,i=t.length,a=!0,s=[],c=s;if(e)a=!1,o=Zn;else if(i>=u){var l=n?null:bi(t);if(l)return Te(l);a=!1,o=ye,c=new Ar}else c=n?[]:s;t:for(;++r<i;){var f=t[r],p=n?n(f):f;if(f=e||0!==f?f:0,a&&p==p){for(var h=c.length;h--;)if(c[h]===p)continue t;n&&c.push(p),s.push(f)}else o(c,p,e)||(c!==s&&c.push(p),s.push(f))}return s}function Uo(t,n){return null==(t=nu(t,n=Ho(n,t)))||delete t[lu(bu(n))]}function Co(t,n,e,r){return No(t,n,e(Yr(t,n)),r)}function qo(t,n,e,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&n(t[i],i,t););return e?Do(t,r?0:i,r?i+1:o):Do(t,r?i+1:0,r?o:i)}function Fo(t,n){var e=t;return e instanceof vr&&(e=e.value()),ee(n,(function(t,n){return n.func.apply(n.thisArg,ne([t],n.args))}),e)}function Go(t,n,e){var o=t.length;if(o<2)return o?Bo(t[0]):[];for(var i=-1,u=r(o);++i<o;)for(var a=t[i],s=-1;++s<o;)s!=i&&(u[i]=Br(u[i]||a,t[s],n,e));return Bo(Wr(u,1),n,e)}function Wo(t,n,e){for(var r=-1,o=t.length,u=n.length,a={};++r<o;){var s=r<u?n[r]:i;e(a,t[r],s)}return a}function Jo(t){return wa(t)?t:[]}function $o(t){return"function"==typeof t?t:Rs}function Ho(t,n){return va(t)?t:Vi(t,n)?[t]:cu(Ja(t))}var Vo=Eo;function Xo(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:Do(t,n,e)}var Yo=je||function(t){return zn.clearTimeout(t)};function Ko(t,n){if(n)return t.slice();var e=t.length,r=Tn?Tn(e):new t.constructor(e);return t.copy(r),r}function Qo(t){var n=new t.constructor(t.byteLength);return new bn(n).set(new bn(t)),n}function Zo(t,n){var e=n?Qo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ti(t,n){if(t!==n){var e=t!==i,r=null===t,o=t==t,u=ja(t),a=n!==i,s=null===n,c=n==n,l=ja(n);if(!s&&!l&&!u&&t>n||u&&a&&c&&!s&&!l||r&&a&&c||!e&&c||!o)return 1;if(!r&&!u&&!l&&t<n||l&&e&&o&&!r&&!u||s&&e&&o||!a&&o||!c)return-1}return 0}function ni(t,n,e,o){for(var i=-1,u=t.length,a=e.length,s=-1,c=n.length,l=Je(u-a,0),f=r(c+l),p=!o;++s<c;)f[s]=n[s];for(;++i<a;)(p||i<u)&&(f[e[i]]=t[i]);for(;l--;)f[s++]=t[i++];return f}function ei(t,n,e,o){for(var i=-1,u=t.length,a=-1,s=e.length,c=-1,l=n.length,f=Je(u-s,0),p=r(f+l),h=!o;++i<f;)p[i]=t[i];for(var g=i;++c<l;)p[g+c]=n[c];for(;++a<s;)(h||i<u)&&(p[g+e[a]]=t[i++]);return p}function ri(t,n){var e=-1,o=t.length;for(n||(n=r(o));++e<o;)n[e]=t[e];return n}function oi(t,n,e,r){var o=!e;e||(e={});for(var u=-1,a=n.length;++u<a;){var s=n[u],c=r?r(e[s],t[s],s,e,t):i;c===i&&(c=t[s]),o?Mr(e,s,c):xr(e,s,c)}return e}function ii(t,n){return function(e,r){var o=va(e)?Hn:Rr,i=n?n():{};return o(e,t,Pi(r,2),i)}}function ui(t){return Eo((function(n,e){var r=-1,o=e.length,u=o>1?e[o-1]:i,a=o>2?e[2]:i;for(u=t.length>3&&"function"==typeof u?(o--,u):i,a&&Hi(e[0],e[1],a)&&(u=o<3?i:u,o=1),n=nn(n);++r<o;){var s=e[r];s&&t(n,s,r,u)}return n}))}function ai(t,n){return function(e,r){if(null==e)return e;if(!ya(e))return t(e,r);for(var o=e.length,i=n?o:-1,u=nn(e);(n?i--:++i<o)&&!1!==r(u[i],i,u););return e}}function si(t){return function(n,e,r){for(var o=-1,i=nn(n),u=r(n),a=u.length;a--;){var s=u[t?a:++o];if(!1===e(i[s],s,i))break}return n}}function ci(t){return function(n){var e=Se(n=Ja(n))?Me(n):i,r=e?e[0]:n.charAt(0),o=e?Xo(e,1).join(""):n.slice(1);return r[t]()+o}}function li(t){return function(n){return ee(Es(_s(n).replace(yn,"")),t,"")}}function fi(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=gr(t.prototype),r=t.apply(e,n);return Na(r)?r:e}}function pi(t){return function(n,e,r){var o=nn(n);if(!ya(n)){var u=Pi(e,3);n=os(n),e=function(t){return u(o[t],t,o)}}var a=t(n,e,r);return a>-1?o[u?n[a]:a]:i}}function hi(t){return Ri((function(n){var e=n.length,r=e,o=_r.prototype.thru;for(t&&n.reverse();r--;){var u=n[r];if("function"!=typeof u)throw new on(s);if(o&&!a&&"wrapper"==zi(u))var a=new _r([],!0)}for(r=a?r:e;++r<e;){var c=zi(u=n[r]),l="wrapper"==c?Ii(u):i;a=l&&Xi(l[0])&&l[1]==(E|w|O|S)&&!l[4].length&&1==l[9]?a[zi(l[0])].apply(a,l[3]):1==u.length&&Xi(u)?a[c]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&va(r))return a.plant(r).value();for(var o=0,i=e?n[o].apply(this,t):r;++o<e;)i=n[o].call(this,i);return i}}))}function gi(t,n,e,o,u,a,s,c,l,f){var p=n&E,h=n&v,g=n&m,d=n&(w|A),_=n&L,y=g?i:fi(t);return function v(){for(var m=arguments.length,w=r(m),A=m;A--;)w[A]=arguments[A];if(d)var O=ji(v),b=function(t,n){for(var e=t.length,r=0;e--;)t[e]===n&&++r;return r}(w,O);if(o&&(w=ni(w,o,u,d)),a&&(w=ei(w,a,s,d)),m-=b,d&&m<f){var E=xe(w,O);return Ai(t,n,gi,v.placeholder,e,w,E,c,l,f-m)}var S=h?e:this,L=g?S[t]:t;return m=w.length,c?w=function(t,n){var e=t.length,r=$e(n.length,e),o=ri(t);for(;r--;){var u=n[r];t[r]=$i(u,e)?o[u]:i}return t}(w,c):_&&m>1&&w.reverse(),p&&l<m&&(w.length=l),this&&this!==zn&&this instanceof v&&(L=y||fi(L)),L.apply(S,w)}}function di(t,n){return function(e,r){return function(t,n,e,r){return Hr(t,(function(t,o,i){n(r,e(t),o,i)})),r}(e,t,n(r),{})}}function _i(t,n){return function(e,r){var o;if(e===i&&r===i)return n;if(e!==i&&(o=e),r!==i){if(o===i)return r;"string"==typeof e||"string"==typeof r?(e=ko(e),r=ko(r)):(e=Po(e),r=Po(r)),o=t(e,r)}return o}}function vi(t){return Ri((function(n){return n=te(n,ve(Pi())),Eo((function(e){var r=this;return t(n,(function(t){return $n(t,r,e)}))}))}))}function mi(t,n){var e=(n=n===i?" ":ko(n)).length;if(e<2)return e?bo(n,t):n;var r=bo(n,Be(t/De(n)));return Se(n)?Xo(Me(r),0,t).join(""):r.slice(0,t)}function yi(t){return function(n,e,o){return o&&"number"!=typeof o&&Hi(n,e,o)&&(e=o=i),n=Ca(n),e===i?(e=n,n=0):e=Ca(e),function(t,n,e,o){for(var i=-1,u=Je(Be((n-t)/(e||1)),0),a=r(u);u--;)a[o?u:++i]=t,t+=e;return a}(n,e,o=o===i?n<e?1:-1:Ca(o),t)}}function wi(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=Ga(n),e=Ga(e)),t(n,e)}}function Ai(t,n,e,r,o,u,a,s,c,l){var f=n&w;n|=f?O:b,(n&=~(f?b:O))&y||(n&=~(v|m));var p=[t,n,o,f?u:i,f?a:i,f?i:u,f?i:a,s,c,l],h=e.apply(i,p);return Xi(t)&&ru(h,p),h.placeholder=r,uu(h,t,n)}function Oi(t){var n=tn[t];return function(t,e){if(t=Ga(t),(e=null==e?0:$e(qa(e),292))&&Fe(t)){var r=(Ja(t)+"e").split("e");return+((r=(Ja(n(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return n(t)}}var bi=tr&&1/Te(new tr([,-0]))[1]==I?function(t){return new tr(t)}:js;function Ei(t){return function(n){var e=Fi(n);return e==Y?Le(n):e==et?Re(n):function(t,n){return te(n,(function(n){return[n,t[n]]}))}(n,t(n))}}function Si(t,n,e,o,u,a,c,l){var p=n&m;if(!p&&"function"!=typeof t)throw new on(s);var h=o?o.length:0;if(h||(n&=~(O|b),o=u=i),c=c===i?c:Je(qa(c),0),l=l===i?l:qa(l),h-=u?u.length:0,n&b){var g=o,d=u;o=u=i}var _=p?i:Ii(t),L=[t,n,e,o,u,g,d,a,c,l];if(_&&function(t,n){var e=t[1],r=n[1],o=e|r,i=o<(v|m|E),u=r==E&&e==w||r==E&&e==S&&t[7].length<=n[8]||r==(E|S)&&n[7].length<=n[8]&&e==w;if(!i&&!u)return t;r&v&&(t[2]=n[2],o|=e&v?0:y);var a=n[3];if(a){var s=t[3];t[3]=s?ni(s,a,n[4]):a,t[4]=s?xe(t[3],f):n[4]}(a=n[5])&&(s=t[5],t[5]=s?ei(s,a,n[6]):a,t[6]=s?xe(t[5],f):n[6]);(a=n[7])&&(t[7]=a);r&E&&(t[8]=null==t[8]?n[8]:$e(t[8],n[8]));null==t[9]&&(t[9]=n[9]);t[0]=n[0],t[1]=o}(L,_),t=L[0],n=L[1],e=L[2],o=L[3],u=L[4],!(l=L[9]=L[9]===i?p?0:t.length:Je(L[9]-h,0))&&n&(w|A)&&(n&=~(w|A)),n&&n!=v)N=n==w||n==A?function(t,n,e){var o=fi(t);return function u(){for(var a=arguments.length,s=r(a),c=a,l=ji(u);c--;)s[c]=arguments[c];var f=a<3&&s[0]!==l&&s[a-1]!==l?[]:xe(s,l);return(a-=f.length)<e?Ai(t,n,gi,u.placeholder,i,s,f,i,i,e-a):$n(this&&this!==zn&&this instanceof u?o:t,this,s)}}(t,n,l):n!=O&&n!=(v|O)||u.length?gi.apply(i,L):function(t,n,e,o){var i=n&v,u=fi(t);return function n(){for(var a=-1,s=arguments.length,c=-1,l=o.length,f=r(l+s),p=this&&this!==zn&&this instanceof n?u:t;++c<l;)f[c]=o[c];for(;s--;)f[c++]=arguments[++a];return $n(p,i?e:this,f)}}(t,n,e,o);else var N=function(t,n,e){var r=n&v,o=fi(t);return function n(){return(this&&this!==zn&&this instanceof n?o:t).apply(r?e:this,arguments)}}(t,n,e);return uu((_?xo:ru)(N,L),t,n)}function Li(t,n,e,r){return t===i||ha(t,sn[e])&&!fn.call(r,e)?n:t}function Ni(t,n,e,r,o,u){return Na(t)&&Na(n)&&(u.set(n,t),_o(t,n,i,Ni,u),u.delete(n)),t}function xi(t){return Da(t)?i:t}function Ti(t,n,e,r,o,u){var a=e&d,s=t.length,c=n.length;if(s!=c&&!(a&&c>s))return!1;var l=u.get(t);if(l&&u.get(n))return l==n;var f=-1,p=!0,h=e&_?new Ar:i;for(u.set(t,n),u.set(n,t);++f<s;){var g=t[f],v=n[f];if(r)var m=a?r(v,g,f,n,t,u):r(g,v,f,t,n,u);if(m!==i){if(m)continue;p=!1;break}if(h){if(!oe(n,(function(t,n){if(!ye(h,n)&&(g===t||o(g,t,e,r,u)))return h.push(n)}))){p=!1;break}}else if(g!==v&&!o(g,v,e,r,u)){p=!1;break}}return u.delete(t),u.delete(n),p}function Ri(t){return iu(tu(t,i,mu),t+"")}function Di(t){return Kr(t,os,Ci)}function Mi(t){return Kr(t,is,qi)}var Ii=rr?function(t){return rr.get(t)}:js;function zi(t){for(var n=t.name+"",e=or[n],r=fn.call(or,n)?e.length:0;r--;){var o=e[r],i=o.func;if(null==i||i==t)return o.name}return n}function ji(t){return(fn.call(hr,"placeholder")?hr:t).placeholder}function Pi(){var t=hr.iteratee||Ds;return t=t===Ds?so:t,arguments.length?t(arguments[0],arguments[1]):t}function ki(t,n){var e,r,o=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof n?"string":"hash"]:o.map}function Bi(t){for(var n=os(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,Qi(o)]}return n}function Ui(t,n){var e=function(t,n){return null==t?i:t[n]}(t,n);return ao(e)?e:i}var Ci=Ce?function(t){return null==t?[]:(t=nn(t),Kn(Ce(t),(function(n){return jn.call(t,n)})))}:Fs,qi=Ce?function(t){for(var n=[];t;)ne(n,Ci(t)),t=Mn(t);return n}:Fs,Fi=Qr;function Gi(t,n,e){for(var r=-1,o=(n=Ho(n,t)).length,i=!1;++r<o;){var u=lu(n[r]);if(!(i=null!=t&&e(t,u)))break;t=t[u]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&La(o)&&$i(u,o)&&(va(t)||_a(t))}function Wi(t){return"function"!=typeof t.constructor||Ki(t)?{}:gr(Mn(t))}function Ji(t){return va(t)||_a(t)||!!(Bn&&t&&t[Bn])}function $i(t,n){var e=typeof t;return!!(n=null==n?z:n)&&("number"==e||"symbol"!=e&&Vt.test(t))&&t>-1&&t%1==0&&t<n}function Hi(t,n,e){if(!Na(e))return!1;var r=typeof n;return!!("number"==r?ya(e)&&$i(n,e.length):"string"==r&&n in e)&&ha(e[n],t)}function Vi(t,n){if(va(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ja(t))||(Rt.test(t)||!Tt.test(t)||null!=n&&t in nn(n))}function Xi(t){var n=zi(t),e=hr[n];if("function"!=typeof e||!(n in vr.prototype))return!1;if(t===e)return!0;var r=Ii(e);return!!r&&t===r[0]}(Ke&&Fi(new Ke(new ArrayBuffer(1)))!=ct||Qe&&Fi(new Qe)!=Y||Ze&&"[object Promise]"!=Fi(Ze.resolve())||tr&&Fi(new tr)!=et||nr&&Fi(new nr)!=ut)&&(Fi=function(t){var n=Qr(t),e=n==Z?t.constructor:i,r=e?fu(e):"";if(r)switch(r){case ir:return ct;case ur:return Y;case ar:return"[object Promise]";case sr:return et;case cr:return ut}return n});var Yi=cn?Ea:Gs;function Ki(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||sn)}function Qi(t){return t==t&&!Na(t)}function Zi(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==i||t in nn(e)))}}function tu(t,n,e){return n=Je(n===i?t.length-1:n,0),function(){for(var o=arguments,i=-1,u=Je(o.length-n,0),a=r(u);++i<u;)a[i]=o[n+i];i=-1;for(var s=r(n+1);++i<n;)s[i]=o[i];return s[n]=e(a),$n(t,this,s)}}function nu(t,n){return n.length<2?t:Yr(t,Do(n,0,-1))}function eu(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}var ru=au(xo),ou=ke||function(t,n){return zn.setTimeout(t,n)},iu=au(To);function uu(t,n,e){var r=n+"";return iu(t,function(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(kt,"{\n/* [wrapped with "+n+"] */\n")}(r,function(t,n){return Vn(C,(function(e){var r="_."+e[0];n&e[1]&&!Qn(t,r)&&t.push(r)})),t.sort()}(function(t){var n=t.match(Bt);return n?n[1].split(Ut):[]}(r),e)))}function au(t){var n=0,e=0;return function(){var r=He(),o=R-(r-e);if(e=r,o>0){if(++n>=T)return arguments[0]}else n=0;return t.apply(i,arguments)}}function su(t,n){var e=-1,r=t.length,o=r-1;for(n=n===i?r:n;++e<n;){var u=Oo(e,o),a=t[u];t[u]=t[e],t[e]=a}return t.length=n,t}var cu=function(t){var n=aa(t,(function(t){return e.size===l&&e.clear(),t})),e=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Dt,(function(t,e,r,o){n.push(r?o.replace(qt,"$1"):e||t)})),n}));function lu(t){if("string"==typeof t||ja(t))return t;var n=t+"";return"0"==n&&1/t==-I?"-0":n}function fu(t){if(null!=t){try{return ln.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function pu(t){if(t instanceof vr)return t.clone();var n=new _r(t.__wrapped__,t.__chain__);return n.__actions__=ri(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var hu=Eo((function(t,n){return wa(t)?Br(t,Wr(n,1,wa,!0)):[]})),gu=Eo((function(t,n){var e=bu(n);return wa(e)&&(e=i),wa(t)?Br(t,Wr(n,1,wa,!0),Pi(e,2)):[]})),du=Eo((function(t,n){var e=bu(n);return wa(e)&&(e=i),wa(t)?Br(t,Wr(n,1,wa,!0),i,e):[]}));function _u(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:qa(e);return o<0&&(o=Je(r+o,0)),ae(t,Pi(n,3),o)}function vu(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return e!==i&&(o=qa(e),o=e<0?Je(r+o,0):$e(o,r-1)),ae(t,Pi(n,3),o,!0)}function mu(t){return(null==t?0:t.length)?Wr(t,1):[]}function yu(t){return t&&t.length?t[0]:i}var wu=Eo((function(t){var n=te(t,Jo);return n.length&&n[0]===t[0]?eo(n):[]})),Au=Eo((function(t){var n=bu(t),e=te(t,Jo);return n===bu(e)?n=i:e.pop(),e.length&&e[0]===t[0]?eo(e,Pi(n,2)):[]})),Ou=Eo((function(t){var n=bu(t),e=te(t,Jo);return(n="function"==typeof n?n:i)&&e.pop(),e.length&&e[0]===t[0]?eo(e,i,n):[]}));function bu(t){var n=null==t?0:t.length;return n?t[n-1]:i}var Eu=Eo(Su);function Su(t,n){return t&&t.length&&n&&n.length?wo(t,n):t}var Lu=Ri((function(t,n){var e=null==t?0:t.length,r=Ir(t,n);return Ao(t,te(n,(function(t){return $i(t,e)?+t:t})).sort(ti)),r}));function Nu(t){return null==t?t:Ye.call(t)}var xu=Eo((function(t){return Bo(Wr(t,1,wa,!0))})),Tu=Eo((function(t){var n=bu(t);return wa(n)&&(n=i),Bo(Wr(t,1,wa,!0),Pi(n,2))})),Ru=Eo((function(t){var n=bu(t);return n="function"==typeof n?n:i,Bo(Wr(t,1,wa,!0),i,n)}));function Du(t){if(!t||!t.length)return[];var n=0;return t=Kn(t,(function(t){if(wa(t))return n=Je(t.length,n),!0})),_e(n,(function(n){return te(t,pe(n))}))}function Mu(t,n){if(!t||!t.length)return[];var e=Du(t);return null==n?e:te(e,(function(t){return $n(n,i,t)}))}var Iu=Eo((function(t,n){return wa(t)?Br(t,n):[]})),zu=Eo((function(t){return Go(Kn(t,wa))})),ju=Eo((function(t){var n=bu(t);return wa(n)&&(n=i),Go(Kn(t,wa),Pi(n,2))})),Pu=Eo((function(t){var n=bu(t);return n="function"==typeof n?n:i,Go(Kn(t,wa),i,n)})),ku=Eo(Du);var Bu=Eo((function(t){var n=t.length,e=n>1?t[n-1]:i;return e="function"==typeof e?(t.pop(),e):i,Mu(t,e)}));function Uu(t){var n=hr(t);return n.__chain__=!0,n}function Cu(t,n){return n(t)}var qu=Ri((function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,o=function(n){return Ir(n,t)};return!(n>1||this.__actions__.length)&&r instanceof vr&&$i(e)?((r=r.slice(e,+e+(n?1:0))).__actions__.push({func:Cu,args:[o],thisArg:i}),new _r(r,this.__chain__).thru((function(t){return n&&!t.length&&t.push(i),t}))):this.thru(o)}));var Fu=ii((function(t,n,e){fn.call(t,e)?++t[e]:Mr(t,e,1)}));var Gu=pi(_u),Wu=pi(vu);function Ju(t,n){return(va(t)?Vn:Ur)(t,Pi(n,3))}function $u(t,n){return(va(t)?Xn:Cr)(t,Pi(n,3))}var Hu=ii((function(t,n,e){fn.call(t,e)?t[e].push(n):Mr(t,e,[n])}));var Vu=Eo((function(t,n,e){var o=-1,i="function"==typeof n,u=ya(t)?r(t.length):[];return Ur(t,(function(t){u[++o]=i?$n(n,t,e):ro(t,n,e)})),u})),Xu=ii((function(t,n,e){Mr(t,e,n)}));function Yu(t,n){return(va(t)?te:po)(t,Pi(n,3))}var Ku=ii((function(t,n,e){t[e?0:1].push(n)}),(function(){return[[],[]]}));var Qu=Eo((function(t,n){if(null==t)return[];var e=n.length;return e>1&&Hi(t,n[0],n[1])?n=[]:e>2&&Hi(n[0],n[1],n[2])&&(n=[n[0]]),mo(t,Wr(n,1),[])})),Zu=Pe||function(){return zn.Date.now()};function ta(t,n,e){return n=e?i:n,n=t&&null==n?t.length:n,Si(t,E,i,i,i,i,n)}function na(t,n){var e;if("function"!=typeof n)throw new on(s);return t=qa(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var ea=Eo((function(t,n,e){var r=v;if(e.length){var o=xe(e,ji(ea));r|=O}return Si(t,r,n,e,o)})),ra=Eo((function(t,n,e){var r=v|m;if(e.length){var o=xe(e,ji(ra));r|=O}return Si(n,r,t,e,o)}));function oa(t,n,e){var r,o,u,a,c,l,f=0,p=!1,h=!1,g=!0;if("function"!=typeof t)throw new on(s);function d(n){var e=r,u=o;return r=o=i,f=n,a=t.apply(u,e)}function _(t){var e=t-l;return l===i||e>=n||e<0||h&&t-f>=u}function v(){var t=Zu();if(_(t))return m(t);c=ou(v,function(t){var e=n-(t-l);return h?$e(e,u-(t-f)):e}(t))}function m(t){return c=i,g&&r?d(t):(r=o=i,a)}function y(){var t=Zu(),e=_(t);if(r=arguments,o=this,l=t,e){if(c===i)return function(t){return f=t,c=ou(v,n),p?d(t):a}(l);if(h)return Yo(c),c=ou(v,n),d(l)}return c===i&&(c=ou(v,n)),a}return n=Ga(n)||0,Na(e)&&(p=!!e.leading,u=(h="maxWait"in e)?Je(Ga(e.maxWait)||0,n):u,g="trailing"in e?!!e.trailing:g),y.cancel=function(){c!==i&&Yo(c),f=0,r=l=o=c=i},y.flush=function(){return c===i?a:m(Zu())},y}var ia=Eo((function(t,n){return kr(t,1,n)})),ua=Eo((function(t,n,e){return kr(t,Ga(n)||0,e)}));function aa(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new on(s);var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return e.cache=i.set(o,u)||i,u};return e.cache=new(aa.Cache||wr),e}function sa(t){if("function"!=typeof t)throw new on(s);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}aa.Cache=wr;var ca=Vo((function(t,n){var e=(n=1==n.length&&va(n[0])?te(n[0],ve(Pi())):te(Wr(n,1),ve(Pi()))).length;return Eo((function(r){for(var o=-1,i=$e(r.length,e);++o<i;)r[o]=n[o].call(this,r[o]);return $n(t,this,r)}))})),la=Eo((function(t,n){var e=xe(n,ji(la));return Si(t,O,i,n,e)})),fa=Eo((function(t,n){var e=xe(n,ji(fa));return Si(t,b,i,n,e)})),pa=Ri((function(t,n){return Si(t,S,i,i,i,n)}));function ha(t,n){return t===n||t!=t&&n!=n}var ga=wi(Zr),da=wi((function(t,n){return t>=n})),_a=oo(function(){return arguments}())?oo:function(t){return xa(t)&&fn.call(t,"callee")&&!jn.call(t,"callee")},va=r.isArray,ma=Cn?ve(Cn):function(t){return xa(t)&&Qr(t)==st};function ya(t){return null!=t&&La(t.length)&&!Ea(t)}function wa(t){return xa(t)&&ya(t)}var Aa=qe||Gs,Oa=qn?ve(qn):function(t){return xa(t)&&Qr(t)==J};function ba(t){if(!xa(t))return!1;var n=Qr(t);return n==H||n==$||"string"==typeof t.message&&"string"==typeof t.name&&!Da(t)}function Ea(t){if(!Na(t))return!1;var n=Qr(t);return n==V||n==X||n==G||n==tt}function Sa(t){return"number"==typeof t&&t==qa(t)}function La(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=z}function Na(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function xa(t){return null!=t&&"object"==typeof t}var Ta=Fn?ve(Fn):function(t){return xa(t)&&Fi(t)==Y};function Ra(t){return"number"==typeof t||xa(t)&&Qr(t)==K}function Da(t){if(!xa(t)||Qr(t)!=Z)return!1;var n=Mn(t);if(null===n)return!0;var e=fn.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&ln.call(e)==dn}var Ma=Gn?ve(Gn):function(t){return xa(t)&&Qr(t)==nt};var Ia=Wn?ve(Wn):function(t){return xa(t)&&Fi(t)==et};function za(t){return"string"==typeof t||!va(t)&&xa(t)&&Qr(t)==rt}function ja(t){return"symbol"==typeof t||xa(t)&&Qr(t)==ot}var Pa=Jn?ve(Jn):function(t){return xa(t)&&La(t.length)&&!!Nn[Qr(t)]};var ka=wi(fo),Ba=wi((function(t,n){return t<=n}));function Ua(t){if(!t)return[];if(ya(t))return za(t)?Me(t):ri(t);if(Un&&t[Un])return function(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}(t[Un]());var n=Fi(t);return(n==Y?Le:n==et?Te:hs)(t)}function Ca(t){return t?(t=Ga(t))===I||t===-I?(t<0?-1:1)*j:t==t?t:0:0===t?t:0}function qa(t){var n=Ca(t),e=n%1;return n==n?e?n-e:n:0}function Fa(t){return t?zr(qa(t),0,k):0}function Ga(t){if("number"==typeof t)return t;if(ja(t))return P;if(Na(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Na(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(zt,"");var e=Jt.test(t);return e||Ht.test(t)?Dn(t.slice(2),e?2:8):Wt.test(t)?P:+t}function Wa(t){return oi(t,is(t))}function Ja(t){return null==t?"":ko(t)}var $a=ui((function(t,n){if(Ki(n)||ya(n))oi(n,os(n),t);else for(var e in n)fn.call(n,e)&&xr(t,e,n[e])})),Ha=ui((function(t,n){oi(n,is(n),t)})),Va=ui((function(t,n,e,r){oi(n,is(n),t,r)})),Xa=ui((function(t,n,e,r){oi(n,os(n),t,r)})),Ya=Ri(Ir);var Ka=Eo((function(t,n){t=nn(t);var e=-1,r=n.length,o=r>2?n[2]:i;for(o&&Hi(n[0],n[1],o)&&(r=1);++e<r;)for(var u=n[e],a=is(u),s=-1,c=a.length;++s<c;){var l=a[s],f=t[l];(f===i||ha(f,sn[l])&&!fn.call(t,l))&&(t[l]=u[l])}return t})),Qa=Eo((function(t){return t.push(i,Ni),$n(as,i,t)}));function Za(t,n,e){var r=null==t?i:Yr(t,n);return r===i?e:r}function ts(t,n){return null!=t&&Gi(t,n,no)}var ns=di((function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),t[n]=e}),Ns(Rs)),es=di((function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),fn.call(t,n)?t[n].push(e):t[n]=[e]}),Pi),rs=Eo(ro);function os(t){return ya(t)?br(t):co(t)}function is(t){return ya(t)?br(t,!0):lo(t)}var us=ui((function(t,n,e){_o(t,n,e)})),as=ui((function(t,n,e,r){_o(t,n,e,r)})),ss=Ri((function(t,n){var e={};if(null==t)return e;var r=!1;n=te(n,(function(n){return n=Ho(n,t),r||(r=n.length>1),n})),oi(t,Mi(t),e),r&&(e=jr(e,p|h|g,xi));for(var o=n.length;o--;)Uo(e,n[o]);return e}));var cs=Ri((function(t,n){return null==t?{}:function(t,n){return yo(t,n,(function(n,e){return ts(t,e)}))}(t,n)}));function ls(t,n){if(null==t)return{};var e=te(Mi(t),(function(t){return[t]}));return n=Pi(n),yo(t,e,(function(t,e){return n(t,e[0])}))}var fs=Ei(os),ps=Ei(is);function hs(t){return null==t?[]:me(t,os(t))}var gs=li((function(t,n,e){return n=n.toLowerCase(),t+(e?ds(n):n)}));function ds(t){return bs(Ja(t).toLowerCase())}function _s(t){return(t=Ja(t))&&t.replace(Xt,Oe).replace(wn,"")}var vs=li((function(t,n,e){return t+(e?"-":"")+n.toLowerCase()})),ms=li((function(t,n,e){return t+(e?" ":"")+n.toLowerCase()})),ys=ci("toLowerCase");var ws=li((function(t,n,e){return t+(e?"_":"")+n.toLowerCase()}));var As=li((function(t,n,e){return t+(e?" ":"")+bs(n)}));var Os=li((function(t,n,e){return t+(e?" ":"")+n.toUpperCase()})),bs=ci("toUpperCase");function Es(t,n,e){return t=Ja(t),(n=e?i:n)===i?function(t){return En.test(t)}(t)?function(t){return t.match(On)||[]}(t):function(t){return t.match(Ct)||[]}(t):t.match(n)||[]}var Ss=Eo((function(t,n){try{return $n(t,i,n)}catch(t){return ba(t)?t:new Qt(t)}})),Ls=Ri((function(t,n){return Vn(n,(function(n){n=lu(n),Mr(t,n,ea(t[n],t))})),t}));function Ns(t){return function(){return t}}var xs=hi(),Ts=hi(!0);function Rs(t){return t}function Ds(t){return so("function"==typeof t?t:jr(t,p))}var Ms=Eo((function(t,n){return function(e){return ro(e,t,n)}})),Is=Eo((function(t,n){return function(e){return ro(t,e,n)}}));function zs(t,n,e){var r=os(n),o=Xr(n,r);null!=e||Na(n)&&(o.length||!r.length)||(e=n,n=t,t=this,o=Xr(n,os(n)));var i=!(Na(e)&&"chain"in e&&!e.chain),u=Ea(t);return Vn(o,(function(e){var r=n[e];t[e]=r,u&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__),o=e.__actions__=ri(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,ne([this.value()],arguments))})})),t}function js(){}var Ps=vi(te),ks=vi(Yn),Bs=vi(oe);function Us(t){return Vi(t)?pe(lu(t)):function(t){return function(n){return Yr(n,t)}}(t)}var Cs=yi(),qs=yi(!0);function Fs(){return[]}function Gs(){return!1}var Ws=_i((function(t,n){return t+n}),0),Js=Oi("ceil"),$s=_i((function(t,n){return t/n}),1),Hs=Oi("floor");var Vs,Xs=_i((function(t,n){return t*n}),1),Ys=Oi("round"),Ks=_i((function(t,n){return t-n}),0);return hr.after=function(t,n){if("function"!=typeof n)throw new on(s);return t=qa(t),function(){if(--t<1)return n.apply(this,arguments)}},hr.ary=ta,hr.assign=$a,hr.assignIn=Ha,hr.assignInWith=Va,hr.assignWith=Xa,hr.at=Ya,hr.before=na,hr.bind=ea,hr.bindAll=Ls,hr.bindKey=ra,hr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return va(t)?t:[t]},hr.chain=Uu,hr.chunk=function(t,n,e){n=(e?Hi(t,n,e):n===i)?1:Je(qa(n),0);var o=null==t?0:t.length;if(!o||n<1)return[];for(var u=0,a=0,s=r(Be(o/n));u<o;)s[a++]=Do(t,u,u+=n);return s},hr.compact=function(t){for(var n=-1,e=null==t?0:t.length,r=0,o=[];++n<e;){var i=t[n];i&&(o[r++]=i)}return o},hr.concat=function(){var t=arguments.length;if(!t)return[];for(var n=r(t-1),e=arguments[0],o=t;o--;)n[o-1]=arguments[o];return ne(va(e)?ri(e):[e],Wr(n,1))},hr.cond=function(t){var n=null==t?0:t.length,e=Pi();return t=n?te(t,(function(t){if("function"!=typeof t[1])throw new on(s);return[e(t[0]),t[1]]})):[],Eo((function(e){for(var r=-1;++r<n;){var o=t[r];if($n(o[0],this,e))return $n(o[1],this,e)}}))},hr.conforms=function(t){return function(t){var n=os(t);return function(e){return Pr(e,t,n)}}(jr(t,p))},hr.constant=Ns,hr.countBy=Fu,hr.create=function(t,n){var e=gr(t);return null==n?e:Dr(e,n)},hr.curry=function t(n,e,r){var o=Si(n,w,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},hr.curryRight=function t(n,e,r){var o=Si(n,A,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},hr.debounce=oa,hr.defaults=Ka,hr.defaultsDeep=Qa,hr.defer=ia,hr.delay=ua,hr.difference=hu,hr.differenceBy=gu,hr.differenceWith=du,hr.drop=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=e||n===i?1:qa(n))<0?0:n,r):[]},hr.dropRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,0,(n=r-(n=e||n===i?1:qa(n)))<0?0:n):[]},hr.dropRightWhile=function(t,n){return t&&t.length?qo(t,Pi(n,3),!0,!0):[]},hr.dropWhile=function(t,n){return t&&t.length?qo(t,Pi(n,3),!0):[]},hr.fill=function(t,n,e,r){var o=null==t?0:t.length;return o?(e&&"number"!=typeof e&&Hi(t,n,e)&&(e=0,r=o),function(t,n,e,r){var o=t.length;for((e=qa(e))<0&&(e=-e>o?0:o+e),(r=r===i||r>o?o:qa(r))<0&&(r+=o),r=e>r?0:Fa(r);e<r;)t[e++]=n;return t}(t,n,e,r)):[]},hr.filter=function(t,n){return(va(t)?Kn:Gr)(t,Pi(n,3))},hr.flatMap=function(t,n){return Wr(Yu(t,n),1)},hr.flatMapDeep=function(t,n){return Wr(Yu(t,n),I)},hr.flatMapDepth=function(t,n,e){return e=e===i?1:qa(e),Wr(Yu(t,n),e)},hr.flatten=mu,hr.flattenDeep=function(t){return(null==t?0:t.length)?Wr(t,I):[]},hr.flattenDepth=function(t,n){return(null==t?0:t.length)?Wr(t,n=n===i?1:qa(n)):[]},hr.flip=function(t){return Si(t,L)},hr.flow=xs,hr.flowRight=Ts,hr.fromPairs=function(t){for(var n=-1,e=null==t?0:t.length,r={};++n<e;){var o=t[n];r[o[0]]=o[1]}return r},hr.functions=function(t){return null==t?[]:Xr(t,os(t))},hr.functionsIn=function(t){return null==t?[]:Xr(t,is(t))},hr.groupBy=Hu,hr.initial=function(t){return(null==t?0:t.length)?Do(t,0,-1):[]},hr.intersection=wu,hr.intersectionBy=Au,hr.intersectionWith=Ou,hr.invert=ns,hr.invertBy=es,hr.invokeMap=Vu,hr.iteratee=Ds,hr.keyBy=Xu,hr.keys=os,hr.keysIn=is,hr.map=Yu,hr.mapKeys=function(t,n){var e={};return n=Pi(n,3),Hr(t,(function(t,r,o){Mr(e,n(t,r,o),t)})),e},hr.mapValues=function(t,n){var e={};return n=Pi(n,3),Hr(t,(function(t,r,o){Mr(e,r,n(t,r,o))})),e},hr.matches=function(t){return ho(jr(t,p))},hr.matchesProperty=function(t,n){return go(t,jr(n,p))},hr.memoize=aa,hr.merge=us,hr.mergeWith=as,hr.method=Ms,hr.methodOf=Is,hr.mixin=zs,hr.negate=sa,hr.nthArg=function(t){return t=qa(t),Eo((function(n){return vo(n,t)}))},hr.omit=ss,hr.omitBy=function(t,n){return ls(t,sa(Pi(n)))},hr.once=function(t){return na(2,t)},hr.orderBy=function(t,n,e,r){return null==t?[]:(va(n)||(n=null==n?[]:[n]),va(e=r?i:e)||(e=null==e?[]:[e]),mo(t,n,e))},hr.over=Ps,hr.overArgs=ca,hr.overEvery=ks,hr.overSome=Bs,hr.partial=la,hr.partialRight=fa,hr.partition=Ku,hr.pick=cs,hr.pickBy=ls,hr.property=Us,hr.propertyOf=function(t){return function(n){return null==t?i:Yr(t,n)}},hr.pull=Eu,hr.pullAll=Su,hr.pullAllBy=function(t,n,e){return t&&t.length&&n&&n.length?wo(t,n,Pi(e,2)):t},hr.pullAllWith=function(t,n,e){return t&&t.length&&n&&n.length?wo(t,n,i,e):t},hr.pullAt=Lu,hr.range=Cs,hr.rangeRight=qs,hr.rearg=pa,hr.reject=function(t,n){return(va(t)?Kn:Gr)(t,sa(Pi(n,3)))},hr.remove=function(t,n){var e=[];if(!t||!t.length)return e;var r=-1,o=[],i=t.length;for(n=Pi(n,3);++r<i;){var u=t[r];n(u,r,t)&&(e.push(u),o.push(r))}return Ao(t,o),e},hr.rest=function(t,n){if("function"!=typeof t)throw new on(s);return Eo(t,n=n===i?n:qa(n))},hr.reverse=Nu,hr.sampleSize=function(t,n,e){return n=(e?Hi(t,n,e):n===i)?1:qa(n),(va(t)?Sr:Lo)(t,n)},hr.set=function(t,n,e){return null==t?t:No(t,n,e)},hr.setWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:No(t,n,e,r)},hr.shuffle=function(t){return(va(t)?Lr:Ro)(t)},hr.slice=function(t,n,e){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&Hi(t,n,e)?(n=0,e=r):(n=null==n?0:qa(n),e=e===i?r:qa(e)),Do(t,n,e)):[]},hr.sortBy=Qu,hr.sortedUniq=function(t){return t&&t.length?jo(t):[]},hr.sortedUniqBy=function(t,n){return t&&t.length?jo(t,Pi(n,2)):[]},hr.split=function(t,n,e){return e&&"number"!=typeof e&&Hi(t,n,e)&&(n=e=i),(e=e===i?k:e>>>0)?(t=Ja(t))&&("string"==typeof n||null!=n&&!Ma(n))&&!(n=ko(n))&&Se(t)?Xo(Me(t),0,e):t.split(n,e):[]},hr.spread=function(t,n){if("function"!=typeof t)throw new on(s);return n=null==n?0:Je(qa(n),0),Eo((function(e){var r=e[n],o=Xo(e,0,n);return r&&ne(o,r),$n(t,this,o)}))},hr.tail=function(t){var n=null==t?0:t.length;return n?Do(t,1,n):[]},hr.take=function(t,n,e){return t&&t.length?Do(t,0,(n=e||n===i?1:qa(n))<0?0:n):[]},hr.takeRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=r-(n=e||n===i?1:qa(n)))<0?0:n,r):[]},hr.takeRightWhile=function(t,n){return t&&t.length?qo(t,Pi(n,3),!1,!0):[]},hr.takeWhile=function(t,n){return t&&t.length?qo(t,Pi(n,3)):[]},hr.tap=function(t,n){return n(t),t},hr.throttle=function(t,n,e){var r=!0,o=!0;if("function"!=typeof t)throw new on(s);return Na(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),oa(t,n,{leading:r,maxWait:n,trailing:o})},hr.thru=Cu,hr.toArray=Ua,hr.toPairs=fs,hr.toPairsIn=ps,hr.toPath=function(t){return va(t)?te(t,lu):ja(t)?[t]:ri(cu(Ja(t)))},hr.toPlainObject=Wa,hr.transform=function(t,n,e){var r=va(t),o=r||Aa(t)||Pa(t);if(n=Pi(n,4),null==e){var i=t&&t.constructor;e=o?r?new i:[]:Na(t)&&Ea(i)?gr(Mn(t)):{}}return(o?Vn:Hr)(t,(function(t,r,o){return n(e,t,r,o)})),e},hr.unary=function(t){return ta(t,1)},hr.union=xu,hr.unionBy=Tu,hr.unionWith=Ru,hr.uniq=function(t){return t&&t.length?Bo(t):[]},hr.uniqBy=function(t,n){return t&&t.length?Bo(t,Pi(n,2)):[]},hr.uniqWith=function(t,n){return n="function"==typeof n?n:i,t&&t.length?Bo(t,i,n):[]},hr.unset=function(t,n){return null==t||Uo(t,n)},hr.unzip=Du,hr.unzipWith=Mu,hr.update=function(t,n,e){return null==t?t:Co(t,n,$o(e))},hr.updateWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:Co(t,n,$o(e),r)},hr.values=hs,hr.valuesIn=function(t){return null==t?[]:me(t,is(t))},hr.without=Iu,hr.words=Es,hr.wrap=function(t,n){return la($o(n),t)},hr.xor=zu,hr.xorBy=ju,hr.xorWith=Pu,hr.zip=ku,hr.zipObject=function(t,n){return Wo(t||[],n||[],xr)},hr.zipObjectDeep=function(t,n){return Wo(t||[],n||[],No)},hr.zipWith=Bu,hr.entries=fs,hr.entriesIn=ps,hr.extend=Ha,hr.extendWith=Va,zs(hr,hr),hr.add=Ws,hr.attempt=Ss,hr.camelCase=gs,hr.capitalize=ds,hr.ceil=Js,hr.clamp=function(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=(e=Ga(e))==e?e:0),n!==i&&(n=(n=Ga(n))==n?n:0),zr(Ga(t),n,e)},hr.clone=function(t){return jr(t,g)},hr.cloneDeep=function(t){return jr(t,p|g)},hr.cloneDeepWith=function(t,n){return jr(t,p|g,n="function"==typeof n?n:i)},hr.cloneWith=function(t,n){return jr(t,g,n="function"==typeof n?n:i)},hr.conformsTo=function(t,n){return null==n||Pr(t,n,os(n))},hr.deburr=_s,hr.defaultTo=function(t,n){return null==t||t!=t?n:t},hr.divide=$s,hr.endsWith=function(t,n,e){t=Ja(t),n=ko(n);var r=t.length,o=e=e===i?r:zr(qa(e),0,r);return(e-=n.length)>=0&&t.slice(e,o)==n},hr.eq=ha,hr.escape=function(t){return(t=Ja(t))&&St.test(t)?t.replace(bt,be):t},hr.escapeRegExp=function(t){return(t=Ja(t))&&It.test(t)?t.replace(Mt,"\\$&"):t},hr.every=function(t,n,e){var r=va(t)?Yn:qr;return e&&Hi(t,n,e)&&(n=i),r(t,Pi(n,3))},hr.find=Gu,hr.findIndex=_u,hr.findKey=function(t,n){return ue(t,Pi(n,3),Hr)},hr.findLast=Wu,hr.findLastIndex=vu,hr.findLastKey=function(t,n){return ue(t,Pi(n,3),Vr)},hr.floor=Hs,hr.forEach=Ju,hr.forEachRight=$u,hr.forIn=function(t,n){return null==t?t:Jr(t,Pi(n,3),is)},hr.forInRight=function(t,n){return null==t?t:$r(t,Pi(n,3),is)},hr.forOwn=function(t,n){return t&&Hr(t,Pi(n,3))},hr.forOwnRight=function(t,n){return t&&Vr(t,Pi(n,3))},hr.get=Za,hr.gt=ga,hr.gte=da,hr.has=function(t,n){return null!=t&&Gi(t,n,to)},hr.hasIn=ts,hr.head=yu,hr.identity=Rs,hr.includes=function(t,n,e,r){t=ya(t)?t:hs(t),e=e&&!r?qa(e):0;var o=t.length;return e<0&&(e=Je(o+e,0)),za(t)?e<=o&&t.indexOf(n,e)>-1:!!o&&se(t,n,e)>-1},hr.indexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:qa(e);return o<0&&(o=Je(r+o,0)),se(t,n,o)},hr.inRange=function(t,n,e){return n=Ca(n),e===i?(e=n,n=0):e=Ca(e),function(t,n,e){return t>=$e(n,e)&&t<Je(n,e)}(t=Ga(t),n,e)},hr.invoke=rs,hr.isArguments=_a,hr.isArray=va,hr.isArrayBuffer=ma,hr.isArrayLike=ya,hr.isArrayLikeObject=wa,hr.isBoolean=function(t){return!0===t||!1===t||xa(t)&&Qr(t)==W},hr.isBuffer=Aa,hr.isDate=Oa,hr.isElement=function(t){return xa(t)&&1===t.nodeType&&!Da(t)},hr.isEmpty=function(t){if(null==t)return!0;if(ya(t)&&(va(t)||"string"==typeof t||"function"==typeof t.splice||Aa(t)||Pa(t)||_a(t)))return!t.length;var n=Fi(t);if(n==Y||n==et)return!t.size;if(Ki(t))return!co(t).length;for(var e in t)if(fn.call(t,e))return!1;return!0},hr.isEqual=function(t,n){return io(t,n)},hr.isEqualWith=function(t,n,e){var r=(e="function"==typeof e?e:i)?e(t,n):i;return r===i?io(t,n,i,e):!!r},hr.isError=ba,hr.isFinite=function(t){return"number"==typeof t&&Fe(t)},hr.isFunction=Ea,hr.isInteger=Sa,hr.isLength=La,hr.isMap=Ta,hr.isMatch=function(t,n){return t===n||uo(t,n,Bi(n))},hr.isMatchWith=function(t,n,e){return e="function"==typeof e?e:i,uo(t,n,Bi(n),e)},hr.isNaN=function(t){return Ra(t)&&t!=+t},hr.isNative=function(t){if(Yi(t))throw new Qt(a);return ao(t)},hr.isNil=function(t){return null==t},hr.isNull=function(t){return null===t},hr.isNumber=Ra,hr.isObject=Na,hr.isObjectLike=xa,hr.isPlainObject=Da,hr.isRegExp=Ma,hr.isSafeInteger=function(t){return Sa(t)&&t>=-z&&t<=z},hr.isSet=Ia,hr.isString=za,hr.isSymbol=ja,hr.isTypedArray=Pa,hr.isUndefined=function(t){return t===i},hr.isWeakMap=function(t){return xa(t)&&Fi(t)==ut},hr.isWeakSet=function(t){return xa(t)&&Qr(t)==at},hr.join=function(t,n){return null==t?"":Ge.call(t,n)},hr.kebabCase=vs,hr.last=bu,hr.lastIndexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r;return e!==i&&(o=(o=qa(e))<0?Je(r+o,0):$e(o,r-1)),n==n?function(t,n,e){for(var r=e+1;r--;)if(t[r]===n)return r;return r}(t,n,o):ae(t,le,o,!0)},hr.lowerCase=ms,hr.lowerFirst=ys,hr.lt=ka,hr.lte=Ba,hr.max=function(t){return t&&t.length?Fr(t,Rs,Zr):i},hr.maxBy=function(t,n){return t&&t.length?Fr(t,Pi(n,2),Zr):i},hr.mean=function(t){return fe(t,Rs)},hr.meanBy=function(t,n){return fe(t,Pi(n,2))},hr.min=function(t){return t&&t.length?Fr(t,Rs,fo):i},hr.minBy=function(t,n){return t&&t.length?Fr(t,Pi(n,2),fo):i},hr.stubArray=Fs,hr.stubFalse=Gs,hr.stubObject=function(){return{}},hr.stubString=function(){return""},hr.stubTrue=function(){return!0},hr.multiply=Xs,hr.nth=function(t,n){return t&&t.length?vo(t,qa(n)):i},hr.noConflict=function(){return zn._===this&&(zn._=_n),this},hr.noop=js,hr.now=Zu,hr.pad=function(t,n,e){t=Ja(t);var r=(n=qa(n))?De(t):0;if(!n||r>=n)return t;var o=(n-r)/2;return mi(Ue(o),e)+t+mi(Be(o),e)},hr.padEnd=function(t,n,e){t=Ja(t);var r=(n=qa(n))?De(t):0;return n&&r<n?t+mi(n-r,e):t},hr.padStart=function(t,n,e){t=Ja(t);var r=(n=qa(n))?De(t):0;return n&&r<n?mi(n-r,e)+t:t},hr.parseInt=function(t,n,e){return e||null==n?n=0:n&&(n=+n),Ve(Ja(t).replace(jt,""),n||0)},hr.random=function(t,n,e){if(e&&"boolean"!=typeof e&&Hi(t,n,e)&&(n=e=i),e===i&&("boolean"==typeof n?(e=n,n=i):"boolean"==typeof t&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=Ca(t),n===i?(n=t,t=0):n=Ca(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var o=Xe();return $e(t+o*(n-t+Rn("1e-"+((o+"").length-1))),n)}return Oo(t,n)},hr.reduce=function(t,n,e){var r=va(t)?ee:ge,o=arguments.length<3;return r(t,Pi(n,4),e,o,Ur)},hr.reduceRight=function(t,n,e){var r=va(t)?re:ge,o=arguments.length<3;return r(t,Pi(n,4),e,o,Cr)},hr.repeat=function(t,n,e){return n=(e?Hi(t,n,e):n===i)?1:qa(n),bo(Ja(t),n)},hr.replace=function(){var t=arguments,n=Ja(t[0]);return t.length<3?n:n.replace(t[1],t[2])},hr.result=function(t,n,e){var r=-1,o=(n=Ho(n,t)).length;for(o||(o=1,t=i);++r<o;){var u=null==t?i:t[lu(n[r])];u===i&&(r=o,u=e),t=Ea(u)?u.call(t):u}return t},hr.round=Ys,hr.runInContext=t,hr.sample=function(t){return(va(t)?Er:So)(t)},hr.size=function(t){if(null==t)return 0;if(ya(t))return za(t)?De(t):t.length;var n=Fi(t);return n==Y||n==et?t.size:co(t).length},hr.snakeCase=ws,hr.some=function(t,n,e){var r=va(t)?oe:Mo;return e&&Hi(t,n,e)&&(n=i),r(t,Pi(n,3))},hr.sortedIndex=function(t,n){return Io(t,n)},hr.sortedIndexBy=function(t,n,e){return zo(t,n,Pi(e,2))},hr.sortedIndexOf=function(t,n){var e=null==t?0:t.length;if(e){var r=Io(t,n);if(r<e&&ha(t[r],n))return r}return-1},hr.sortedLastIndex=function(t,n){return Io(t,n,!0)},hr.sortedLastIndexBy=function(t,n,e){return zo(t,n,Pi(e,2),!0)},hr.sortedLastIndexOf=function(t,n){if(null==t?0:t.length){var e=Io(t,n,!0)-1;if(ha(t[e],n))return e}return-1},hr.startCase=As,hr.startsWith=function(t,n,e){return t=Ja(t),e=null==e?0:zr(qa(e),0,t.length),n=ko(n),t.slice(e,e+n.length)==n},hr.subtract=Ks,hr.sum=function(t){return t&&t.length?de(t,Rs):0},hr.sumBy=function(t,n){return t&&t.length?de(t,Pi(n,2)):0},hr.template=function(t,n,e){var r=hr.templateSettings;e&&Hi(t,n,e)&&(n=i),t=Ja(t),n=Va({},n,r,Li);var o,u,a=Va({},n.imports,r.imports,Li),s=os(a),c=me(a,s),l=0,f=n.interpolate||Yt,p="__p += '",h=en((n.escape||Yt).source+"|"+f.source+"|"+(f===xt?Ft:Yt).source+"|"+(n.evaluate||Yt).source+"|$","g"),g="//# sourceURL="+(fn.call(n,"sourceURL")?(n.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ln+"]")+"\n";t.replace(h,(function(n,e,r,i,a,s){return r||(r=i),p+=t.slice(l,s).replace(Kt,Ee),e&&(o=!0,p+="' +\n__e("+e+") +\n'"),a&&(u=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+n.length,n})),p+="';\n";var d=fn.call(n,"variable")&&n.variable;d||(p="with (obj) {\n"+p+"\n}\n"),p=(u?p.replace(yt,""):p).replace(wt,"$1").replace(At,"$1;"),p="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=Ss((function(){return Zt(s,g+"return "+p).apply(i,c)}));if(_.source=p,ba(_))throw _;return _},hr.times=function(t,n){if((t=qa(t))<1||t>z)return[];var e=k,r=$e(t,k);n=Pi(n),t-=k;for(var o=_e(r,n);++e<t;)n(e);return o},hr.toFinite=Ca,hr.toInteger=qa,hr.toLength=Fa,hr.toLower=function(t){return Ja(t).toLowerCase()},hr.toNumber=Ga,hr.toSafeInteger=function(t){return t?zr(qa(t),-z,z):0===t?t:0},hr.toString=Ja,hr.toUpper=function(t){return Ja(t).toUpperCase()},hr.trim=function(t,n,e){if((t=Ja(t))&&(e||n===i))return t.replace(zt,"");if(!t||!(n=ko(n)))return t;var r=Me(t),o=Me(n);return Xo(r,we(r,o),Ae(r,o)+1).join("")},hr.trimEnd=function(t,n,e){if((t=Ja(t))&&(e||n===i))return t.replace(Pt,"");if(!t||!(n=ko(n)))return t;var r=Me(t);return Xo(r,0,Ae(r,Me(n))+1).join("")},hr.trimStart=function(t,n,e){if((t=Ja(t))&&(e||n===i))return t.replace(jt,"");if(!t||!(n=ko(n)))return t;var r=Me(t);return Xo(r,we(r,Me(n))).join("")},hr.truncate=function(t,n){var e=N,r=x;if(Na(n)){var o="separator"in n?n.separator:o;e="length"in n?qa(n.length):e,r="omission"in n?ko(n.omission):r}var u=(t=Ja(t)).length;if(Se(t)){var a=Me(t);u=a.length}if(e>=u)return t;var s=e-De(r);if(s<1)return r;var c=a?Xo(a,0,s).join(""):t.slice(0,s);if(o===i)return c+r;if(a&&(s+=c.length-s),Ma(o)){if(t.slice(s).search(o)){var l,f=c;for(o.global||(o=en(o.source,Ja(Gt.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;c=c.slice(0,p===i?s:p)}}else if(t.indexOf(ko(o),s)!=s){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+r},hr.unescape=function(t){return(t=Ja(t))&&Et.test(t)?t.replace(Ot,Ie):t},hr.uniqueId=function(t){var n=++pn;return Ja(t)+n},hr.upperCase=Os,hr.upperFirst=bs,hr.each=Ju,hr.eachRight=$u,hr.first=yu,zs(hr,(Vs={},Hr(hr,(function(t,n){fn.call(hr.prototype,n)||(Vs[n]=t)})),Vs),{chain:!1}),hr.VERSION="4.17.15",Vn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){hr[t].placeholder=hr})),Vn(["drop","take"],(function(t,n){vr.prototype[t]=function(e){e=e===i?1:Je(qa(e),0);var r=this.__filtered__&&!n?new vr(this):this.clone();return r.__filtered__?r.__takeCount__=$e(e,r.__takeCount__):r.__views__.push({size:$e(e,k),type:t+(r.__dir__<0?"Right":"")}),r},vr.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}})),Vn(["filter","map","takeWhile"],(function(t,n){var e=n+1,r=e==D||3==e;vr.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Pi(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}})),Vn(["head","last"],(function(t,n){var e="take"+(n?"Right":"");vr.prototype[t]=function(){return this[e](1).value()[0]}})),Vn(["initial","tail"],(function(t,n){var e="drop"+(n?"":"Right");vr.prototype[t]=function(){return this.__filtered__?new vr(this):this[e](1)}})),vr.prototype.compact=function(){return this.filter(Rs)},vr.prototype.find=function(t){return this.filter(t).head()},vr.prototype.findLast=function(t){return this.reverse().find(t)},vr.prototype.invokeMap=Eo((function(t,n){return"function"==typeof t?new vr(this):this.map((function(e){return ro(e,t,n)}))})),vr.prototype.reject=function(t){return this.filter(sa(Pi(t)))},vr.prototype.slice=function(t,n){t=qa(t);var e=this;return e.__filtered__&&(t>0||n<0)?new vr(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(e=(n=qa(n))<0?e.dropRight(-n):e.take(n-t)),e)},vr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},vr.prototype.toArray=function(){return this.take(k)},Hr(vr.prototype,(function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),o=hr[r?"take"+("last"==n?"Right":""):n],u=r||/^find/.test(n);o&&(hr.prototype[n]=function(){var n=this.__wrapped__,a=r?[1]:arguments,s=n instanceof vr,c=a[0],l=s||va(n),f=function(t){var n=o.apply(hr,ne([t],a));return r&&p?n[0]:n};l&&e&&"function"==typeof c&&1!=c.length&&(s=l=!1);var p=this.__chain__,h=!!this.__actions__.length,g=u&&!p,d=s&&!h;if(!u&&l){n=d?n:new vr(this);var _=t.apply(n,a);return _.__actions__.push({func:Cu,args:[f],thisArg:i}),new _r(_,p)}return g&&d?t.apply(this,a):(_=this.thru(f),g?r?_.value()[0]:_.value():_)})})),Vn(["pop","push","shift","sort","splice","unshift"],(function(t){var n=un[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);hr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(va(o)?o:[],t)}return this[e]((function(e){return n.apply(va(e)?e:[],t)}))}})),Hr(vr.prototype,(function(t,n){var e=hr[n];if(e){var r=e.name+"";fn.call(or,r)||(or[r]=[]),or[r].push({name:n,func:e})}})),or[gi(i,m).name]=[{name:"wrapper",func:i}],vr.prototype.clone=function(){var t=new vr(this.__wrapped__);return t.__actions__=ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ri(this.__views__),t},vr.prototype.reverse=function(){if(this.__filtered__){var t=new vr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},vr.prototype.value=function(){var t=this.__wrapped__.value(),n=this.__dir__,e=va(t),r=n<0,o=e?t.length:0,i=function(t,n,e){var r=-1,o=e.length;for(;++r<o;){var i=e[r],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":n-=u;break;case"take":n=$e(n,t+u);break;case"takeRight":t=Je(t,n-u)}}return{start:t,end:n}}(0,o,this.__views__),u=i.start,a=i.end,s=a-u,c=r?a:u-1,l=this.__iteratees__,f=l.length,p=0,h=$e(s,this.__takeCount__);if(!e||!r&&o==s&&h==s)return Fo(t,this.__actions__);var g=[];t:for(;s--&&p<h;){for(var d=-1,_=t[c+=n];++d<f;){var v=l[d],m=v.iteratee,y=v.type,w=m(_);if(y==M)_=w;else if(!w){if(y==D)continue t;break t}}g[p++]=_}return g},hr.prototype.at=qu,hr.prototype.chain=function(){return Uu(this)},hr.prototype.commit=function(){return new _r(this.value(),this.__chain__)},hr.prototype.next=function(){this.__values__===i&&(this.__values__=Ua(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},hr.prototype.plant=function(t){for(var n,e=this;e instanceof dr;){var r=pu(e);r.__index__=0,r.__values__=i,n?o.__wrapped__=r:n=r;var o=r;e=e.__wrapped__}return o.__wrapped__=t,n},hr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof vr){var n=t;return this.__actions__.length&&(n=new vr(this)),(n=n.reverse()).__actions__.push({func:Cu,args:[Nu],thisArg:i}),new _r(n,this.__chain__)}return this.thru(Nu)},hr.prototype.toJSON=hr.prototype.valueOf=hr.prototype.value=function(){return Fo(this.__wrapped__,this.__actions__)},hr.prototype.first=hr.prototype.head,Un&&(hr.prototype[Un]=function(){return this}),hr}();zn._=ze,(o=function(){return ze}.call(n,e,n,r))===i||(r.exports=o)}).call(this)}).call(this,e(15),e(23)(t))},function(t,n,e){const r=e(3),o=e(10),u=e(0),a=e(6),s=e(12),c=e(9),l=e(4),f=e(1),p=u.mutation;function h(t,n){if(void 0===t||void 0===n)throw new TypeError("No input or output size given");const s=this;s.input_size=t,s.output_size=n,s.input=t,s.output=n,s.input_nodes=new Set,s.output_nodes=new Set,s.nodes=[],s.connections=[],s.gates=[];for(let n=0;n<t;n++){const t=new l({type:"input"});s.nodes.push(t),s.input_nodes.add(t)}for(let t=0;t<n;t++){const t=new l({type:"output"});s.nodes.push(t),s.output_nodes.add(t)}s.connect=function(t,n,e){let r=t.connect(n,e);r instanceof c&&(r=[r]);for(let t=0;t<r.length;t++){let n=r[t];s.connections.push(n)}return r};for(let t=0;t<s.input_size;t++)for(var h=s.input_size;h<s.output_size+s.input_size;h++){const n=(Math.random()-.5)*s.input_size*Math.sqrt(2/s.input_size);s.connect(s.nodes[t],s.nodes[h],n)}s.activate=function(t,{dropout_rate:n=0,trace:e=!0}={}){let r=0;for(let n=0;n<s.nodes.length&&r!==s.input_nodes.size;n++){const o=s.nodes[n];s.input_nodes.has(o)&&o.activate(t[r++],{trace:e})}if(r!==t.length)throw Error(`There are ${r} input nodes, but ${t.length} inputs were passed`);s.nodes.forEach((t,r)=>{s.input_nodes.has(t)||s.output_nodes.has(t)||(n&&(t.mask=Math.random()<n?0:1),t.activate({trace:e}))});const o=[];for(let t=0;t<s.nodes.length&&o.length!==s.output_nodes.size;t++){const n=s.nodes[t];s.output_nodes.has(n)&&o.push(n.activate({trace:e}))}if(o.length!==s.output_nodes.size)throw Error(`There are ${s.output_nodes.size} output nodes, but ${o.length} outputs were passed`);return o},s.noTraceActivate=function(t){return s.activate(t,{trace:!1})},s.propagate=function(t,n,e,r){const o=s.output_size||s.output;s.input_size||s.input;if(void 0===r||r.length!==o)throw new Error("Output target length should match network output length");let i=0;for(let u=0;i<o;u++)s.output_nodes.has(s.nodes[u])&&(s.nodes[u].propagate(r[i],{rate:t,momentum:n,update:e}),i++);for(let r=s.nodes.length-1;r>=0;r--){const o=s.nodes[r];s.input_nodes.has(o)||s.output_nodes.has(o)||o.propagate({rate:t,momentum:n,update:e})}s.input_nodes.forEach(r=>{r.propagate({rate:t,momentum:n,update:e})})},s.clear=function(){for(let t=0;t<s.nodes.length;t++)s.nodes[t].clear()},s.clone=function(){return f.cloneDeep(s)},s.disconnect=function(t,n){const e=s.connections;for(let r=0;r<e.length;r++){const o=e[r];if(o.from===t&&o.to===n){null!==o.gater&&s.ungate(o),e.splice(r,1);break}}t.disconnect(n)},s.gate=function(t,n){if(-1===s.nodes.indexOf(t))throw new ReferenceError("This node is not part of the network!");null==n.gater?(t.gate(n),s.gates.push(n)):r.warnings&&console.warn("This connection is already gated!")},s.ungate=function(t){const n=s.gates.indexOf(t);if(-1===n)throw new Error("This connection is not gated!");s.gates.splice(n,1),t.gater.ungate(t)},s.remove=function(t){const n=s.nodes.indexOf(t);if(-1===n)throw new ReferenceError("This node does not exist in the network!");const e=[];s.disconnect(t,t);const r=[];f.forEachRight(t.incoming,n=>{p.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),r.push(n.from),s.disconnect(n.from,t)});const o=[];f.forEachRight(t.outgoing,n=>{p.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),o.push(n.to),s.disconnect(t,n.to)});const u=[];for(f.forEach(r,t=>{f.forEach(o,n=>{if(!t.isProjectingTo(n)){const e=s.connect(t,n);u.push(e[0])}})});e.length>0&&u.length>0;){const t=e.shift(),n=Math.floor(Math.random()*u.length);s.gate(t,u[n]),u.splice(n,1)}for(i=t.gated.length-1;i>=0;i--){const n=t.gated[i];s.ungate(n)}s.nodes.splice(n,1)},s.possible=function(t){const n=this;let e=[];switch(t.name){case"SUB_NODE":return e=f.filter(n.nodes,(function(t){return!n.input_nodes.has(t)&&!n.output_nodes.has(t)})),!!e.length&&e;case"ADD_CONN":for(let t=0;t<n.nodes.length-n.output_size;t++){const r=n.nodes[t];for(let o=Math.max(t+1,n.input_size);o<n.nodes.length;o++){const t=n.nodes[o];r.isProjectingTo(t)||e.push([r,t])}}return!!e.length&&e;case"REMOVE_CONN":case"SUB_CONN":return f.each(n.connections,t=>{t.from.outgoing.length>1&&t.to.incoming.length>1&&n.nodes.indexOf(t.to)>n.nodes.indexOf(t.from)&&e.push(t)}),!!e.length&&e;case"MOD_ACTIVATION":return e=f.filter(n.nodes,t.mutateOutput?t=>"input"!==t.type:t=>"input"!==t.type&&"output"!==t.type),!!e.length&&e;case"ADD_SELF_CONN":for(let t=n.input_size;t<n.nodes.length;t++){const r=n.nodes[t];0===r.connections_self.weight&&e.push(r)}return!!e.length&&e;case"SUB_SELF_CONN":for(let t=0;t<n.connections.length;t++){const r=n.connections[t];r.from==r.to&&e.push(r)}return!!e.length&&e;case"ADD_GATE":return n.connections.forEach(t=>{null===t.gater&&e.push(t)}),!!e.length&&e;case"SUB_GATE":return n.gates.length>0&&[];case"ADD_SHARED_BIAS":return e=f.filter(n.nodes,(function(t){return!n.input_nodes.has(t)&&!n.output_nodes.has(t)})),e.length>0&&e;case"SUB_SHARED_BIAS":return e=f.filter(n.nodes,(function(t){return null!==t.sharedIncoming})),e.length>0&&e;case"ADD_SHARED_WEIGHT":return n.connections.length>0&&n.connections;case"SUB_SHARED_WEIGHT":return e=f.filter(n.connections,(function(t){return null!==t.sharedIncoming})),e.length>0&&e;case"ADD_BACK_CONN":for(let t=n.input_size;t<n.nodes.length;t++){const r=n.nodes[t];for(let o=n.input_size;o<t;o++){const t=n.nodes[o];r.isProjectingTo(t)||e.push([r,t])}}return!!e.length&&e;case"SUB_BACK_CONN":return f.each(n.connections,t=>{t.from.outgoing.length>1&&t.to.incoming.length>1&&n.nodes.indexOf(t.from)>n.nodes.indexOf(t.to)&&e.push(t)}),!!e.length&&e;case"SWAP_NODES":{if(n.nodes.length-1-n.input_size-(t.mutateOutput?0:n.output_size)<2)return!1;const r=t.mutateOutput?t=>"input"!==t.type:t=>"input"!==t.type&&"output"!==t.type;return e=f.filter(n.nodes,r),e.length>=2&&e}}},s.mutate=function(t,n){if(void 0===t)throw new Error("Mutate method is undefined!");const{maxNodes:e,maxConns:r,maxGates:o}=n||{},i=()=>{if(s.nodes.length<=s.input_nodes.size)throw new Error("Something went wrong. Total nodes is length is somehow less than size of inputs");let t=f.filter(s.connections,(function(t){return null===t.sharedIncoming}));return f.sample(t)};switch(t.name){case"ADD_NODE":{if(s.nodes.length>=e)return null;const t=new l({type:"hidden"});p.ADD_NODE.randomActivation&&t.mutate(p.MOD_ACTIVATION);const n=i(),r=n.from,o=n.to;s.disconnect(r,o);let u=s.nodes.indexOf(r);u=u>=s.input_nodes.size-1?u:s.input_nodes.size-1,s.nodes.splice(u+1,0,t);const a=s.connect(r,t)[0],c=s.connect(t,o)[0],f=n.gater;return null!=f&&s.gate(f,Math.random()>=.5?a:c),s}case"SUB_NODE":{const n=s.possible(t);return n?(s.remove(f.sample(n)),s):null}case"ADD_SHARED_BIAS":{const n=s.possible(t);if(n.length>=2){const t=f.sample(n),e=f.filter(n,n=>n!==t);if(!e)return null;const r=f.sample(e);return r.sharedIncoming=t,r.bias=t.bias,s}return null}case"SUB_SHARED_BIAS":{const n=s.possible(t);return n?(f.sample(n).sharedIncoming=null,s):null}case"ADD_SHARED_WEIGHT":{const n=s.possible(t);if(n.length>=2){const t=f.sample(n),e=f.filter(n,n=>n!==t);if(!e)return null;const r=f.sample(e);return r.sharedIncoming=t,r.weight=t.weight,s}return null}case"SUB_SHARED_WEIGHT":{const n=s.possible(t);return n?(f.sample(n).sharedIncoming=null,s):null}case"ADD_CONN":{if(s.connections.length>=r)return null;const n=s.possible(t);if(n){const t=n[Math.floor(Math.random()*n.length)];return s.connect(t[0],t[1]),s}return null}case"REMOVE_CONN":case"SUB_CONN":{const n=s.possible(t);if(n){const t=f.sample(n);return s.disconnect(t.from,t.to),s}return null}case"MOD_WEIGHT":return i().weight+=Math.random()*(t.max-t.min)+t.min,s;case"MOD_BIAS":if(s.nodes.length<=s.input_size)return null;return s.nodes[Math.floor(Math.random()*(s.nodes.length-s.input_size)+s.input_size)].mutate(t),s;case"MOD_ACTIVATION":{const n=s.possible(t);return n?(f.sample(n).mutate(t),s):null}case"ADD_SELF_CONN":{const n=s.possible(t);if(n){const t=n[Math.floor(Math.random()*n.length)];return s.connect(t,t),s}return null}case"SUB_SELF_CONN":{const n=s.possible(t);if(n){const t=n[Math.floor(Math.random()*n.length)];return s.disconnect(t.from,t.to),s}return null}case"ADD_GATE":{if(s.gates.length>=o)return null;const n=s.possible(t);if(n){const t=s.nodes[Math.floor(Math.random()*(s.nodes.length-s.input_size)+s.input_size)],e=n[Math.floor(Math.random()*n.length)];return s.gate(t,e),s}return null}case"SUB_GATE":return s.possible(t)?(s.ungate(s.gates[Math.floor(Math.random()*s.gates.length)]),s):null;case"ADD_BACK_CONN":{const n=s.possible(t);if(n){const t=n[Math.floor(Math.random()*n.length)];return s.connect(t[0],t[1]),s}return null}case"SUB_BACK_CONN":{const n=s.possible(t);if(n){const t=n[Math.floor(Math.random()*n.length)];return s.disconnect(t.from,t.to),s}return null}case"SWAP_NODES":{const n=s.possible(t);if(n){const t=f.sample(n),e=f.filter(n,(n,e)=>n!==t),r=f.sample(e),o=t.bias,i=t.squash;return t.bias=r.bias,t.squash=r.squash,r.bias=o,r.squash=i,s}return null}}},s.mutateRandom=function(t,n){const e=Array.isArray(t)&&t.length?f.cloneDeep(t):f.cloneDeep(u.mutation.ALL);for(;e.length>0;){const t=Math.floor(Math.random()*e.length),r=e[t];if(s.mutate(r,n))return s;e.splice(t,1)}return null},s.train=function(t,n){if(t[0].input.length!==(s.input_size||s.input)||t[0].output.length!==(s.output_size||s.output))throw new Error("Dataset input/output size should be same as network input/output size!");let e;r.warnings&&n&&(void 0===n.rate&&console.warn("Using default learning rate, please define a rate!"),void 0===n.iterations&&console.warn("No target iterations given, running until error is reached!")),n&&(n=f.defaults(n,{batch_size:n.batchSize,rate_policy:n.ratePolicy,cross_validate:n.crossValidate})),e=(n=f.defaults(n,{iterations:1e3,error:.05,cost:u.cost.MSE,rate:.3,dropout:0,momentum:0,batch_size:1,rate_policy:u.rate.FIXED})).cross_validate?n.cross_validate.test_error:n.error?n.error:-1;const o=n.rate,i=Date.now();if(n.batch_size>t.length)throw new Error("Batch size must be smaller or equal to dataset length!");if(void 0===n.iterations&&void 0===n.error)throw new Error("At least one of the following options must be specified: error, iterations");let a,c,l;void 0===n.iterations&&(n.iterations=0),n.cross_validate?(a=Math.ceil((1-n.cross_validate.testSize)*t.length),c=t.slice(0,a),l=t.slice(a)):c=t;let p=o,h=0,g=1;for(var d,_,v;g>e&&(0===n.iterations||h<n.iterations);){h++,p=n.rate_policy(o,h);const e=s._trainOneEpoch(c,n.batch_size,p,n.momentum,n.cost,{dropout_rate:n.dropout});if(n.clear&&s.clear(),n.cross_validate?(g=s.test(l,n.cost).error,n.clear&&s.clear()):g=e,n.shuffle)for(d=t.length;d;_=Math.floor(Math.random()*d),v=t[--d],t[d]=t[_],t[_]=v);n.log&&h%n.log==0&&console.log("iteration number",h,"error",g,"training rate",p),n.schedule&&h%n.schedule.iterations==0&&n.schedule.function({error:g,iteration_number:h})}return n.clear&&s.clear(),{error:g,iterations:h,time:Date.now()-i}},s._trainOneEpoch=function(t,n,e,r,o,{dropout_rate:i=.5}={}){let u=0;for(var a=0;a<t.length;a++){const c=t[a].input,l=t[a].output,f=!((a+1)%n!=0&&a+1!==t.length),p=s.activate(c,{dropout_rate:i});s.propagate(e,r,f,l),u+=o(l,p)}return u/t.length},s.test=function(t,n=u.cost.MSE){let e=0,r=Date.now();return f.times(t.length,r=>{let o=t[r].input,i=t[r].output,u=s.activate(o,{trace:!1});e+=n(i,u)}),e/=t.length,{error:e,time:Date.now()-r}},s.toJSON=function(){const t={nodes:[],connections:[],input_nodes:[],output_nodes:[],input_size:s.input_size,output_size:s.output_size,dropout:s.dropout,input:s.input_size,output:s.output_size};let n;for(n=0;n<s.nodes.length;n++)s.nodes[n].index=n,s.input_nodes.has(s.nodes[n])&&t.input_nodes.push(n),s.output_nodes.has(s.nodes[n])&&t.output_nodes.push(n);for(n=0;n<s.nodes.length;n++){const e=s.nodes[n],r=e.toJSON();if(r.index=n,t.nodes.push(r),0!==e.connections_self.weight){const r=e.connections_self.toJSON();r.from=n,r.to=n,r.gater=null!=e.connections_self.gater?e.connections_self.gater.index:null,t.connections.push(r)}}for(n=0;n<s.connections.length;n++){const e=s.connections[n],r=e.toJSON();r.from=e.from.index,r.to=e.to.index,r.gater=null!=e.gater?e.gater.index:null,t.connections.push(r)}return t},s.set=function(t){s.nodes.forEach(n=>Object.assign(n,{bias:t.bias,squash:t.squash}))},s.evolve=async function(t,n){if(t[0].input.length!==(s.input_size||s.input)||t[0].output.length!==(s.output_size||s.output))throw new Error("Dataset input/output size should be same as network input/output size!");let r;void 0===(n=n||{}).iterations&&void 0===n.error?(n.iterations=1e3,r=.05):n.iterations?r=-1:n.error&&(r=n.error,n.iterations=0),n=f.defaults(n,{fitness_population:n.fitnessPopulation,max_nodes:n.maxNodes,max_connections:n.maxConns,max_gates:n.maxGates=1/0,mutation_selection:n.mutationSelection,efficient_mutation:n.efficientMutation}),n=f.defaults(n,{threads:"undefined"==typeof window?e(30).cpus().length:navigator.hardwareConcurrency,growth:void 0!==n.growth?n.growth:1e-4,cost:u.cost.MSE,amount:1,fitness_population:!1,max_nodes:1/0,max_connections:1/0,max_gates:1/0,efficient_mutation:!1});const i=Date.now(),a=o.serializeDataSet(t),c=[];if("undefined"==typeof window)for(var l=0;l<n.threads;l++)c.push(new o.workers.node.TestWorker(a,n.cost));else for(l=0;l<n.threads;l++)c.push(new o.workers.browser.TestWorker(a,n.cost));n.fitness=function(t,e){return new Promise((t,r)=>{const o=e.slice();let i=0;const u=function(e){if(!o.length)return void(++i===n.threads&&t());const r=o.shift();e.evaluate(r).then((function(t){r.score=-t,r.score-=(r.nodes.length-r.input_size-r.output_size+r.connections.length+r.gates.length)*n.growth,r.score=isNaN(parseFloat(t))?-1/0:r.score,u(e)}))};for(let t=0;t<c.length;t++)u(c[t])})},n.fitness_population=!0,n.network=this,n.input=s.input_size,n.output=s.output_size;const p=new g(t,n);let h,d=-1/0,_=-1/0;for(;d<-r&&(0===n.iterations||p.generation<n.iterations);){const t=await p.evolve(),e=t.score;d=e+(t.nodes.length-t.input-t.output+t.connections.length+t.gates.length)*n.growth,e>_&&(_=e,h=t),n.log&&p.generation%n.log==0&&console.log("iteration",p.generation,"fitness",e,"error",-d),n.schedule&&p.generation%n.schedule.iterations==0&&n.schedule.function({fitness:e,error:-d,iteration:p.generation})}for(let t=0;t<c.length;t++)c[t].terminate();return void 0!==h&&(s.nodes=h.nodes,s.connections=h.connections,s.gates=h.gates,s.input_nodes=h.input_nodes,s.output_nodes=h.output_nodes,n.clear&&s.clear()),{error:-d,iterations:p.generation,time:Date.now()-i}},s.standalone=function(){const t=[],n=[],e=[],r=[],o=[];for(let t=0;t<s.input_size;t++){var u=s.nodes[t];n.push(u.activation),e.push(u.state)}for(r.push("for(var i = 0; i < input.length; i++) A[i] = input[i];"),i=0;i<s.nodes.length;i++)s.nodes[i].index=i;for(i=s.input_size;i<s.nodes.length;i++){let u=s.nodes[i];n.push(u.activation),e.push(u.state);let c=t.indexOf(u.squash.name);-1===c&&(c=t.length,t.push(u.squash.name),o.push(u.squash.toString()));const l=[];for(var a=0;a<u.incoming.length;a++){const t=u.incoming[a];t.from.index;let n=`A[${t.from.index}] * ${t.weight}`;null!=t.gater&&(n+=` * A[${t.gater.index}]`),l.push(n)}if(u.connections_self.weight){const t=u.connections_self;let n=`S[${i}] * ${t.weight}`;null!=t.gater&&(n+=` * A[${t.gater.index}]`),l.push(n)}const f=`S[${i}] = ${l.join(" + ")} + ${u.bias};`,p=`A[${i}] = F[${c}](S[${i}])${u.mask?"":" * "+u.mask};`;r.push(f),r.push(p)}let c=[];for(i=s.nodes.length-s.output_size;i<s.nodes.length;i++)c.push(`A[${i}]`);c=`return [${c.join(",")}];`,r.push(c);let l="";return l+=`var F = [${o.toString()}];\r\n`,l+=`var A = [${n.toString()}];\r\n`,l+=`var S = [${e.toString()}];\r\n`,l+=`function activate(input){\r\n${r.join("\r\n")}\r\n}`,l},s.serialize=function(){const t=[],n=[],e=[],r=["LOGISTIC","TANH","IDENTITY","STEP","RELU","SOFTSIGN","SINUSOID","GAUSSIAN","BENT_IDENTITY","BIPOLAR","BIPOLAR_SIGMOID","HARD_TANH","ABSOLUTE","INVERSE","SELU"];e.push(s.input_size),e.push(s.output_size);let o=0;f.forEach(s.nodes,e=>{e.index=o,o++,t.push(e.activation),n.push(e.state)});for(let t=s.input_size;t<s.nodes.length;t++){const n=s.nodes[t];e.push(n.index),e.push(n.bias),e.push(r.indexOf(n.squash.name)),e.push(n.connections_self.weight),e.push(null==n.connections_self.gater?-1:n.connections_self.gater.index),f.times(n.incoming.length,t=>{const r=n.incoming[t];e.push(r.from.index),e.push(r.weight),e.push(null==r.gater?-1:r.gater.index)}),e.push(-2)}return[t,n,e]},s.addNodes=function(t){t instanceof l?t=[t]:t instanceof a&&(t=t.nodes),s.nodes.push(...t);for(let n=0;n<t.length;n++)s.connections.push(...t[n].outgoing),s.gates.push(...t[n].gated),t[n].connections_self.weight&&s.connections.push(t[n].connections_self)}}h.fromJSON=function(t){const n=new h(t.input_size,t.output_size);return n.dropout=t.dropout,n.nodes=[],n.connections=[],n.input_nodes=new Set,n.output_nodes=new Set,t.nodes.forEach((t,e)=>{const r=l.fromJSON(t);r.index=e,n.nodes.push(r)}),t.connections.forEach(t=>{const e=n.connect(n.nodes[t.from],n.nodes[t.to])[0];e.weight=t.weight,null!=t.gater&&n.gate(n.nodes[t.gater],e)}),t.input_nodes.forEach(t=>n.input_nodes.add(n.nodes[t])),t.output_nodes.forEach(t=>n.output_nodes.add(n.nodes[t])),n},h.merge=function(t,n){if(t=h.fromJSON(t.toJSON()),n=h.fromJSON(n.toJSON()),t.output_size!==n.input_size)throw new Error("Output size of network1 should be the same as the input size of network2!");let e;for(e=0;e<n.connections.length;e++){const r=n.connections[e];if("input"===r.from.type){let e=n.nodes.indexOf(r.from);r.from=t.nodes[t.nodes.length-1-e]}}for(e=n.input-1;e>=0;e--)n.nodes.splice(e,1);for(e=t.nodes.length-t.output;e<t.nodes.length;e++)t.nodes[e].type="hidden";return t.connections=t.connections.concat(n.connections),t.nodes=t.nodes.concat(n.nodes),t},h.crossOver=function(t,n,e){if(t.input_size!==n.input_size||t.output_size!==n.output_size)throw new Error("Networks don`t have the same input/output size!");const r=new h(t.input_size,t.output_size);r.connections=[],r.nodes=[],r.input_nodes=new Set,r.output_nodes=new Set;const o=t.score||0,i=n.score||0;let u;if(e||o===i){const e=Math.max(t.nodes.length,n.nodes.length),r=Math.min(t.nodes.length,n.nodes.length);u=Math.floor(Math.random()*(e-r+1)+r)}else u=o>i?t.nodes.length:n.nodes.length;const a=t.input_size,s=t.output_size;let f;for(f=0;f<t.nodes.length;f++)t.nodes[f].index=f;for(f=0;f<n.nodes.length;f++)n.nodes[f].index=f;for(f=0;f<u;f++){let e,o="";if(f<a){o="input";const r=Math.random()>=.5?t:n;let i=-1,u=-1;for(;i<f;){if(u++,u>=r.nodes.length)throw RangeError("something is wrong with the size of the input");r.input_nodes.has(r.nodes[u])&&i++}e=r.nodes[u]}else if(f<a+s){o="output";const r=Math.random()>=.5?t:n;let i=-1,u=-1;for(;i<f-a;){if(u++,u>=r.nodes.length)throw RangeError("something is wrong with the size of the output");r.output_nodes.has(r.nodes[u])&&i++}e=r.nodes[u]}else{let r;o="hidden",r=f>=t.nodes.length?n:f>=n.nodes.length?t:Math.random()>=.5?t:n;const i=Math.floor(Math.random()*r.nodes.length);e=r.nodes[i]}const i=new l({bias:e.bias,squash:e.squash,type:e.type});"input"===o?r.input_nodes.add(i):"output"===o&&r.output_nodes.add(i),r.nodes.push(i)}const p={},g={};for(f=0;f<t.connections.length;f++){const n=t.connections[f],e={weight:n.weight,from:n.from.index,to:n.to.index,gater:null!=n.gater?n.gater.index:-1};p[c.innovationID(e.from,e.to)]=e}for(f=0;f<n.connections.length;f++){const t=n.connections[f],e={weight:t.weight,from:t.from.index,to:t.to.index,gater:null!=t.gater?t.gater.index:-1};g[c.innovationID(e.from,e.to)]=e}var d=[],_=Object.keys(p),v=Object.keys(g);for(f=_.length-1;f>=0;f--)if(void 0!==g[_[f]]){const t=Math.random()>=.5?p[_[f]]:g[_[f]];d.push(t),g[_[f]]=void 0}else(o>=i||e)&&d.push(p[_[f]]);if(i>=o||e)for(f=0;f<v.length;f++)void 0!==g[v[f]]&&d.push(g[v[f]]);for(f=0;f<d.length;f++){let t=d[f];if(t.to<u&&t.from<u){const n=r.nodes[t.from],e=r.nodes[t.to],o=r.connect(n,e)[0];o.weight=t.weight,-1!==t.gater&&t.gater<u&&r.gate(r.nodes[t.gater],o)}}return r},h.architecture={Construct:function(t){const n=new h(0,0);let e,r,o=[];for(e=0;e<t.length;e++)if(t[e]instanceof a||t[e]instanceof s)for(r=0;r<t[e].nodes.length;r++)o.push(t[e].nodes[r]),0===e?n.input_nodes.add(t[e].nodes[r]):e===t.length-1&&n.output_nodes.add(t[e].nodes[r]);else t[e]instanceof l&&o.push(t[e]);const i=f.reduce(o,(t,n)=>t+("output"===n.type),0),u=f.reduce(o,(t,n)=>t+("input"===n.type),0),c=[],p=[];for(e=o.length-1;e>=0;e--)"output"===o[e].type||!i&&o[e].outgoing.length+o[e].gated.length===0?(o[e].type="output",n.output_size++,p.push(o[e]),o.splice(e,1)):"input"!==o[e].type&&(u||o[e].incoming.length)||(o[e].type="input",n.input_size++,c.push(o[e]),o.splice(e,1));if(n.input=n.input_size,n.output=n.output_size,o=c.concat(o).concat(p),0===n.input_size||0===n.output_size)throw new Error("Given nodes have no clear input/output node!");return n.addNodes(o),n},Perceptron:function(){const t=Array.from(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");const n=[new a(t[0])];return f.times(t.length-1,e=>{const r=new a(t[e+1]);n.push(r),n[e].connect(n[e+1],u.connection.ALL_TO_ALL)}),h.architecture.Construct(n)},Random:function(t,n,e,r){r?!r&&f.isPlainObject(e)&&(r=e,e=n,n=void 0):(e=n,n=void 0),n=n||0,r=f.defaults(r,{connections:2*n,backconnections:0,selfconnections:0,gates:0});const o=new h(t,e);return f.times(n,()=>o.mutate(u.mutation.ADD_NODE)),f.times(r.connections-n,()=>o.mutate(u.mutation.ADD_CONN)),f.times(r.backconnections,()=>o.mutate(u.mutation.ADD_BACK_CONN)),f.times(r.selfconnections,()=>o.mutate(u.mutation.ADD_SELF_CONN)),f.times(r.gates,()=>o.mutate(u.mutation.ADD_GATE)),o},LSTM:function(){const t=Array.from(arguments),n=t.slice(-1)[0];let e,r;if("number"==typeof n?(e=t,r={}):(e=t.slice(t.length-1),r=n),e.length<3)throw new Error("You have to specify at least 3 layer sizes, one for each of 1.inputs, 2. hidden, 3. output");r=f.defaults(r,{memory_to_memory:!1,output_to_memory:!1,output_to_gates:!1,input_to_output:!0,input_to_deep:!0});const o=new a(e.shift());o.set({type:"input"});const i=new a(e.pop());i.set({type:"output"}),r.input_to_output&&o.connect(i,u.connection.ALL_TO_ALL);const s=e,c=[];let l=o;f.times(s.length,t=>{const n=s[t],e=new a(n),f=new a(n),p=new a(n),h=new a(n),g=t===s.length-1?i:new a(n);e.set({bias:1}),f.set({bias:1}),h.set({bias:1});const d=l.connect(p,u.connection.ALL_TO_ALL);l.connect(e,u.connection.ALL_TO_ALL),l.connect(h,u.connection.ALL_TO_ALL),l.connect(f,u.connection.ALL_TO_ALL),p.connect(e,u.connection.ALL_TO_ALL),p.connect(f,u.connection.ALL_TO_ALL),p.connect(h,u.connection.ALL_TO_ALL);const _=p.connect(p,u.connection.ONE_TO_ONE),v=p.connect(g,u.connection.ALL_TO_ALL);if(e.gate(d,u.gating.INPUT),f.gate(_,u.gating.SELF),h.gate(v,u.gating.OUTPUT),r.input_to_deep&&t>0){const t=o.connect(p,u.connection.ALL_TO_ALL);e.gate(t,u.gating.INPUT)}if(r.memory_to_memory){const t=p.connect(p,u.connection.ALL_TO_ELSE);e.gate(t,u.gating.INPUT)}if(r.output_to_memory){const t=i.connect(p,u.connection.ALL_TO_ALL);e.gate(t,u.gating.INPUT)}r.output_to_gates&&(i.connect(e,u.connection.ALL_TO_ALL),i.connect(f,u.connection.ALL_TO_ALL),i.connect(h,u.connection.ALL_TO_ALL)),c.push(e),c.push(f),c.push(p),c.push(h),t!==s.length-1&&c.push(g),l=g});const p=[];return p.push(o),f.forEach(c,t=>p.push(t)),p.push(i),h.architecture.Construct(p)},GRU:function(){const t=Array.from(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layer sizes");const n=new a(t.shift(),"input"),e=new a(t.pop(),"output"),r=t,o=[];o.push(n);let i=n;for(var u=0;u<r.length;u++){const t=s.GRU(r[u]);i.connect(t),i=t,o.push(t)}return i.connect(e),o.push(e),h.architecture.Construct(o)},Hopfield:function(t){const n=new a(t,"input"),e=new a(t,"output");return n.connect(e,u.connection.ALL_TO_ALL),e.set({squash:u.activation.STEP}),h.architecture.Construct([n,e])},NARX:function(t,n,e,r,o){Array.isArray(n)||(n=[n]);const i=[],a=s.Dense(t),c=s.Memory(t,r),l=[];for(let t=0;t<n.length;t++)l.push(s.Dense(n[t]));const f=s.Dense(e),p=s.Memory(e,o);a.connect(l[0],u.connection.ALL_TO_ALL),a.connect(c,u.connection.ONE_TO_ONE,1),i.push(a),c.connect(l[0],u.connection.ALL_TO_ALL),p.connect(l[0],u.connection.ALL_TO_ALL),i.push(c),i.push(p);for(let t=0;t<l.length;t++)t<l.length-1?l[t].connect(l[t+1],u.connection.ALL_TO_ALL):l[t].connect(f,u.connection.ALL_TO_ALL),i.push(l[t]);return f.connect(p,u.connection.ONE_TO_ONE,1),i.push(f),a.set({type:"input"}),f.set({type:"output"}),h.architecture.Construct(i)},Liquid:function(){}},t.exports=h;const g=function(t,{generation:n=0,input:e=1,output:r=1,equal:o=!0,clean:i=!1,population_size:a=50,growth:s=1e-4,cost:c=u.cost.MSE,amount:l=1,elitism:p=1,provenance:g=0,mutation_rate:d=.4,mutation_amount:_=1,fitness_population:v=!1,fitness:m=function(n=t,e,r=1,o=u.cost.MSE,i=1e-4){let a=0;for(let t=0;t<r;t++)a-=e.test(n,o).error;return a-=(e.nodes.length-e.input-e.output+e.connections.length+e.gates.length)*i,a=isNaN(a)?-1/0:a,a/r},selection:y=u.selection.POWER,crossover:w=[u.crossover.SINGLE_POINT,u.crossover.TWO_POINT,u.crossover.UNIFORM,u.crossover.AVERAGE],mutation:A=u.mutation.FFW,efficientMutation:O=!1,template:b=new h(e,r),max_nodes:E=1/0,maxConns:S=1/0,maxGates:L=1/0}={}){let N=this;f.assignIn(N,{generation:n,input:e,output:r,equal:o,clean:i,population_size:a,growth:s,cost:c,amount:l,elitism:p,provenance:g,mutation_rate:d,mutation_amount:_,fitness_population:v,fitness:m,selection:y,crossover:w,mutation:A,efficientMutation:O,template:b,max_nodes:E,maxConns:S,maxGates:L}),N.createPool=function(t,n){return Array(n).fill(h.fromJSON({...t.toJSON(),score:void 0}))},N.population=N.createPool(N.template,N.population_size),N.filterGenome=function(t,n,e,r){let o=[...t];const i=function(t){const n=e(t);if("boolean"!=typeof n)throw new Error("pickGenome must always return a boolean!");return n};if(r){for(let n=0;n<t.length;n++)if(i(o[n])){const t=r(o[n]);if(!(t instanceof h))throw new Error("adjustGenome must always return a network!");o[n]=t}}else for(let e=0;e<t.length;e++)i(o[e])&&(o[e]=h.fromJSON(n.toJSON()));return o},N.mutateRandom=function(t,n){let e=n?[...n]:[...N.mutation];e=e.filter((function(n){return n!==u.mutation.ADD_NODE||t.nodes.length<N.maxNodes||n!==u.mutation.ADD_CONN||t.connections.length<N.maxConns||n!==u.mutation.ADD_GATE||t.gates.length<N.maxGates}));do{const n=e[Math.floor(Math.random()*e.length)];if(t.mutate(n))return n;e=e.filter((function(t){return t.name!==n.name}))}while(e&&e.length>0);return null},N.evolve=async function(t,n,e){if(N.elitism+N.provenance>N.population_size)throw new Error("Can`t evolve! Elitism + provenance exceeds population size!");t=t||N.dataset,void 0===N.population[N.population.length-1].score&&await N.evaluate(t),n&&(N.population=N.filterGenome(N.population,N.template,n,e)),N.sort();const r=[];for(let t=0;t<N.elitism;t++)r.push(N.population[t]);const o=Array(N.provenance).fill(h.fromJSON(N.template.toJSON()));for(let t=0;t<N.population_size-N.elitism-N.provenance;t++)o.push(N.getOffspring());N.population=o,N.mutate(),N.population.push(...r),await N.evaluate(t),n&&(N.population=N.filterGenome(N.population,N.template,n,e)),N.sort();const i=h.fromJSON(N.population[0].toJSON());i.score=N.population[0].score;for(let t=0;t<N.population.length;t++)N.population[t].score=void 0;return N.generation++,i},N.getParent=function(){switch(N.selection.name){case"POWER":N.population[0].score<N.population[1].score&&N.sort();var t=Math.floor(Math.pow(Math.random(),N.selection.power)*N.population.length);return N.population[t];case"FITNESS_PROPORTIONATE":var n=0,e=0;for(let t=0;t<N.population.length;t++){var r=N.population[t].score;e=r<e?r:e,n+=r}n+=(e=Math.abs(e))*N.population.length;var o=Math.random()*n,i=0;for(let t=0;t<N.population.length;t++){let n=N.population[t];if(o<(i+=n.score+e))return n}return N.population[Math.floor(Math.random()*N.population.length)];case"TOURNAMENT":if(N.selection.size>N.population_size)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");var u=[];for(let t=0;t<N.selection.size;t++){let t=N.population[Math.floor(Math.random()*N.population.length)];u.push(t)}u.sort((function(t,n){return n.score-t.score}));for(let t=0;t<N.selection.size;t++)if(Math.random()<N.selection.probability||t===N.selection.size-1)return u[t]}},N.getOffspring=function(){var t=N.getParent(),n=N.getParent();return h.crossOver(t,n,N.equal)},N.mutate=function(t){if(t){for(let n=0;n<N.population.length;n++)if(Math.random()<=N.mutation_rate)for(let e=0;e<N.mutation_amount;e++)N.population[n].mutate(t)}else for(let t=0;t<N.population.length;t++)if(Math.random()<=N.mutation_rate)for(let n=0;n<N.mutation_amount;n++)N.mutateRandom(N.population[t],N.mutation)},N.evaluate=async function(t){if(t=t||N.dataset,N.fitness_population){if(N.clear)for(let t=0;t<N.population.length;t++)N.population[t].clear();await N.fitness(t,N.population)}else for(let n=0;n<N.population.length;n++){const e=N.population[n];N.clear&&e.clear(),e.score=await N.fitness(t,e),N.population[n]=e}return N.sort(),N.population[0]},N.sort=function(){N.population.sort((function(t,n){return n.score-t.score}))},N.getFittest=function(){return void 0===N.population[N.population.length-1].score&&N.evaluate(),N.population[0].score<N.population[1].score&&N.sort(),N.population[0]},N.getAverage=function(){void 0===N.population[N.population.length-1].score&&N.evaluate();let t=0;for(let n=0;n<N.population.length;n++)t+=N.population[n].score;return t/N.population.length},N.toJSON=function(){const t=[];for(let n=0;n<N.population.length;n++)t.push(N.population[n].toJSON());return t},N.fromJSON=function(t){const n=[];for(let e=0;e<t.length;e++)n.push(h.fromJSON(t[e]));N.population=n,N.population_size=n.length}}},function(t,n){t.exports={warnings:!1}},function(t,n,e){e(1);const r=e(0),o=e(9);e(3);function i(t){let n=this;Object.assign(n,{bias:2*Math.random()-1,squash:r.activation.LOGISTIC,activation:0,state:0,old:0,mask:1,delta_bias_previous:0,delta_bias_total:0,delta_bias:[],incoming:[],outgoing:[],gated:[],sharedIncoming:null,connections_self:new o(n,n,0),error_responsibility:0,error_projected:0,error_gated:0,...t}),n.activate=function(t,e){if(null==e&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e={trace:!0,...e},null!=t&&Number.isFinite(t))return n.activation=t;const r=function(){null!==n.sharedIncoming&&(n.bias=n.sharedIncoming.bias),n.state=n.connections_self.gain*n.connections_self.weight*n.state+n.bias;for(let t=0;t<n.incoming.length;t++){const e=n.incoming[t];n.state+=e.from.activation*e.weight*e.gain}return n.state};if(e.trace){n.old=n.state,n.state=r(),n.activation=n.squash(n.state)*n.mask,n.derivative=n.squash(n.state,!0);const t=[],e=[];for(let r=0;r<n.gated.length;r++){const o=n.gated[r];o.gain=n.activation;const i=t.indexOf(o.to);i>-1?e[i]+=o.weight*o.from.activation:(t.push(o.to),e.push(o.weight*o.from.activation+(o.to.connections_self.gater===n?o.to.old:0)))}for(let r=0;r<n.incoming.length;r++){const o=n.incoming[r];o.elegibility=n.connections_self.gain*n.connections_self.weight*o.elegibility+o.from.activation*o.gain;for(let r=0;r<t.length;r++){const[i,u]=[t[r],e[r]],a=o.xtrace_nodes.indexOf(i);a>-1?o.xtrace_values[a]=i.connections_self.gain*i.connections_self.weight*o.xtrace_values[a]+n.derivative*o.elegibility*u:(o.xtrace_nodes.push(i),o.xtrace_values.push(n.derivative*o.elegibility*u))}}return n.activation}if("input"===n.type)return n.activation=0;n.state=r(),n.activation=n.squash(n.state);for(let t=0;t<n.gated.length;t++)n.gated[t].gain=n.activation;return n.activation},n.noTraceActivate=function(t){return n.activate(t,{trace:!1})},n.propagate=function(t,e){if(null==e&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e={momentum:0,rate:.3,update:!0,...e},null!=t&&Number.isFinite(t))n.error_responsibility=n.error_projected=t-n.activation;else{n.error_projected=0;for(let t=0;t<n.outgoing.length;t++){const e=n.outgoing[t];n.error_projected+=e.to.error_responsibility*e.weight*e.gain}n.error_projected*=n.derivative||1,n.error_gated=0;for(let t=0;t<n.gated.length;t++){const e=n.gated[t],r=e.to,o=(r.connections_self.gater===n?r.old:0)+e.weight*e.from.activation;n.error_gated+=r.error_responsibility*o}n.error_gated*=n.derivative||1,n.error_responsibility=n.error_projected+n.error_gated}for(let t=0;t<n.incoming.length;t++){const r=n.incoming[t];let o=n.error_projected*r.elegibility;for(let t=0;t<r.xtrace_nodes.length;t++){o+=r.xtrace_nodes[t].error_responsibility*r.xtrace_values[t]}r.delta_weights_total+=e.rate*o*n.mask,e.update&&(r.delta_weights_total+=e.momentum*r.delta_weights_previous,null===r.sharedIncoming&&(r.weight+=r.delta_weights_total),r.delta_weights_previous=r.delta_weights_total,r.delta_weights_total=0)}return n.delta_bias_total+=e.rate*n.error_responsibility,e.update&&(n.delta_bias_total+=e.momentum*n.delta_bias_previous,null===n.sharedIncoming&&(n.bias+=n.delta_bias_total),n.delta_bias_previous=n.delta_bias_total,n.delta_bias_total=0),{responsibility:n.error_responsibility,projected:n.error_projected,gated:n.error_gated}},n.connect=function(t,e,r){if(null==t)throw new ReferenceError("Missing required parameter 'nodes'");if(null==r&&"object"==typeof e&&(r=e,e=void 0),r=r||{},t instanceof i){if(t===n)return n.connections_self.weight=e||1,n.connections_self;if(n.isProjectingTo(t))throw new ReferenceError("Node is already projecting to 'target'");{const i=new o(n,t,e,r);return n.outgoing.push(i),t.incoming.push(i),r.twosided&&t.connect(n),i}}if(Array.isArray(t)){const i=[];for(let u=0;u<t.length;u++){const a=new o(n,t[u],e,r);n.outgoing.push(a),t[u].incoming.push(a),i.push(a),r.twosided&&t[u].connect(n)}return i}throw new TypeError(`Parameter 'target': Expected 'Node' or 'Node[]' - but recieved, ${t}`)},n.disconnect=function(t,e){if(null==t)throw new ReferenceError("Missing required parameter 'target'");if(e=e||{},!(t instanceof i)){if(Array.isArray(t)){const r=[];for(let o=0;o<t.length;o++)for(let i=0;i<n.outgoing.length;i++){const u=n.outgoing[i];if(u.to===t[o]){n.outgoing.splice(i,1),u.to.incoming.splice(u.to.incoming.indexOf(u),1),null!=u.gater&&u.gater.ungate(u),e.twosided&&t[o].disconnect(n),r.push(u);break}}return r}throw new TypeError(`Parameter 'target': Expected 'Node' or 'Node[]' - but recieved, ${t}`)}if(t===n)return n.connections_self.weight=0,n.connections_self;for(let r=0;r<n.outgoing.length;r++){const o=n.outgoing[r];if(o.to===t)return n.outgoing.splice(r,1),o.to.incoming.splice(o.to.incoming.indexOf(o),1),null!=o.gater&&o.gater.ungate(o),e.twosided&&t.disconnect(n),o}},n.gate=function(t){if(null==t)throw new ReferenceError("Missing required parameter 'connections'");if(Array.isArray(t))for(let e=0;e<t.length;e++){const r=t[e];n.gated.push(r),r.gater=n}else n.gated.push(t),t.gater=n;return t},n.ungate=function(t){if(null==t)throw new ReferenceError("Missing required parameter 'connections'");if(Array.isArray(t))for(let e=0;e<t.length;e++){const r=t[e];n.gated.splice(n.gated.indexOf(r),1),r.gater=null,r.gain=1}else n.gated.splice(n.gated.indexOf(t),1),t.gater=null,t.gain=1;return t},n.clear=function(){for(let t=0;t<n.incoming.length;t++){const e=n.incoming[t];e.elegibility=0,e.xtrace_nodes=[],e.xtrace_values=[]}for(let t=0;t<n.gated.length;t++){n.gated[t].gain=0}n.error_responsibility=n.error_projected=n.error_gated=0,n.old=n.state=n.activation=0},n.mutate=function(t){switch((t={method:Math.random()<.5?r.mutation.MOD_ACTIVATION:r.mutation.MOD_BIAS,...t}).method){case r.mutation.MOD_ACTIVATION:t.allowed?n.squash=t.allowed[(e=t.allowed.length,o=t.allowed.indexOf(n.squash),(o+Math.floor(Math.random()*(e-1))+1)%e)]:n.squash=r.activation[function(t,n){return t[(t.indexOf(n)+Math.floor(Math.random()*(t.length-1))+1)%t.length]}(Object.keys(r.activation),n.squash.name)];break;case r.mutation.MOD_BIAS:null===n.sharedIncoming&&(n.bias+=Math.random()*(t.method.max-t.method.min)+t.method.min)}var e,o},n.isProjectingTo=function(t){if(null==t)throw new ReferenceError("Missing required parameter 'nodes'");if(t===n)return 0!==n.connections_self.weight;if(Array.isArray(t)){let e=0;for(let r=0;r<t.length;r++){const o=t[r];for(let t=0;t<n.outgoing.length;t++)if(n.outgoing[t].to===o){e++;break}}return t.length===e}for(let e=0;e<n.outgoing.length;e++)if(n.outgoing[e].to===t)return!0;return!1},n.isProjectedBy=function(t){if(null==t)throw new ReferenceError("Missing required parameter 'nodes'");if(t===n)return 0!==n.connections_self.weight;if(Array.isArray(t)){let e=0;for(let r=0;r<t.length;r++){const o=t[r];for(let t=0;t<n.incoming.length;t++)if(n.incoming[t].from===o){e++;break}}return t.length===e}for(let e=0;e<n.incoming.length;e++)if(n.incoming[e].from===t)return!0;return!1},n.toJSON=function(){return{bias:n.bias,type:n.type,squash:n.squash.name,mask:n.mask,shared:n.shared}}}i.fromJSON=function(t){if(null==t)throw new ReferenceError("Missing required parameter 'json'");"string"==typeof t&&(t=JSON.parse(t));const n=new i;return Object.assign(n,{...t},{squash:r.activation[t.squash]}),n},t.exports=i},function(t,n){function e(t,n){if(null==t||null==n)throw new ReferenceError("Missing at least one required parameters: `targets`, `outputs`");if(t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n],t.length!==n.length)throw new RangeError(`Required "targets.length === outputs.length"; Received "targets.length=${t.length}" & "outputs.length=${n.length}`);return[t,n]}const r={CROSS_ENTROPY:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e-(t[o]*Math.log(Math.max(n[o],1e-15))+(1-t[o])*Math.log(1-Math.max(n[o],1e-15)))}),0)/n.length},MSE:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+Math.pow(t[o]-n[o],2)}),0)/n.length},BINARY:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+(Math.round(2*t[o])!==Math.round(2*n[o]))}),0)},MAE:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+Math.abs(t[o]-n[o])}),0)/n.length},MAPE:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+Math.abs((n[o]-t[o])/Math.max(t[o],1e-15))}),0)/n.length},WAPE:function(t,n){[t,n]=e(t,n);let r=0,o=0;for(let e=0;e<n.length;e++)r+=Math.abs(t[e]-n[e]),o+=t[e];return r/o},MSLE:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+(Math.log(Math.max(t[o],1e-15))-Math.log(Math.max(n[o],1e-15)))}),0)},HINGE:function(t,n){return[t,n]=e(t,n),n.reduce((function(e,r,o){return e+Math.max(0,1-t[o]*n[o])}),0)},ABS:function(t,n){[t,n]=e(t,n);let r=0;for(let e=0;e<t.length;e++)r+=Math.abs(t[e]-n[e]);return r},DIFF:function(t,n){[t,n]=e(t,n);let r=0;for(let e=0;e<t.length;e++)r+=t[e]-n[e];return r},HuberLoss:function(t,n,r){[t,n]=e(t,n),void 0===r&&(r={}),(void 0===r.delta||isNaN(r.delta))&&(r.delta=5);let o=this.ABS(t,n);return o<=r.delta?.5*this.MSE(t,n)*t.length:r.delta*o-.5*r.delta},QuantileLoss:function(t,n,r){[t,n]=e(t,n),void 0===r&&(r={}),(void 0===r.delta||isNaN(r.delta))&&(r.delta=.5),r.delta=Math.min(1,Math.max(0,r.delta));let o=0;for(let e=0;e<t.length;e++)o+=n[e]<t[e]?(r.delta-1)*Math.abs(t[e]-n[e]):r.delta*Math.abs(t[e]-n[e]);return o},LogCoshLoss:function(t,n){[t,n]=e(t,n);let r=0;for(let e=0;e<t.length;e++)r+=Math.log(Math.cosh(t[e]-n[e]));return r}};t.exports=r},function(t,n,e){const r=e(1),o=e(0),i=e(3),u=e(4);t.exports=function t(n){const e=this;e.nodes=[],e.connections_self=[],e.incoming=[],e.outgoing=[];for(let t=0;t<n;t++)e.nodes.push(new u);e.activate=function(t){if(null!=t&&t.length!==e.nodes.length)throw new RangeError("Array with values should be same as the amount of nodes!");const n=[];for(let r=0;r<e.nodes.length;r++){const o=null==t?e.nodes[r].activate():e.nodes[r].activate(t[r]);n.push(o)}return n},e.propagate=function(t,n){if(!n&&r.isPlainObject(t)&&(n=t,t=void 0),null!=t&&t.length!==e.nodes.length)throw new RangeError("Array with values should be same as the amount of nodes!");const o=[];for(let r=e.nodes.length-1;r>=0;r--)null==t?o.push(e.nodes[r].propagate(n)):o.push(e.nodes[r].propagate(t[r],n));return o},e.connect=function(t,n,r){const a=!!t.nodes&&e.nodes==t.nodes;null==n&&(a?(i.warnings&&console.warn("No group connection specified, using ONE_TO_ONE"),n=o.connection.ONE_TO_ONE):(i.warnings&&console.warn("No group connection specified, using ALL_TO_ALL"),n=o.connection.ALL_TO_ALL));let s=[],c=[];if(s=e.output_nodes?e.output_nodes:e.nodes,t.input_nodes)c=t.input_nodes;else if(t.nodes)c=t.nodes;else{if(!(t instanceof u))throw new TypeError("Type of target not supported");c=[t]}if(n===o.connection.ONE_TO_ONE&&s.length!==c.length)throw new RangeError("Method is one-to-one but there are unequal number of source and target nodes");const l=[];for(let t=0;t<c.length;t++){if(n===o.connection.ALL_TO_ELSE){let n=!1;for(let e=0;e<s.length;e++)if(c[t]==s[e]){n=!0;break}if(n)continue}if(n===o.connection.ONE_TO_ONE){let n=s[t].connect(c[t],r);l.push(n)}else for(let n=0;n<s.length;n++){let e=s[n].connect(c[t],r);l.push(e)}}for(let n=0;n<l.length;n++){const r=l[n];a?e.connections_self.push(r):(e.outgoing.push(r),t.incoming.push(r))}return l},e.gate=function(t,n){if(null==n)throw new TypeError("Please specify Gating.INPUT, Gating.OUTPUT");Array.isArray(t)||(t=[t]);const r=[],i=[];let u,a;for(u=0;u<t.length;u++){const n=t[u];r.includes(n.from)||r.push(n.from),i.includes(n.to)||i.push(n.to)}switch(n){case o.gating.INPUT:for(u=0;u<i.length;u++){const n=i[u],r=e.nodes[u%e.nodes.length];for(a=0;a<n.incoming.length;a++){const e=n.incoming[a];t.includes(e)&&r.gate(e)}}break;case o.gating.OUTPUT:for(u=0;u<r.length;u++){const n=r[u],o=e.nodes[u%this.nodes.length];for(a=0;a<n.outgoing.length;a++){const e=n.outgoing[a];t.includes(e)&&o.gate(e)}}break;case o.gating.SELF:for(u=0;u<r.length;u++){const n=r[u],o=e.nodes[u%e.nodes.length];t.includes(n.connections_self)&&o.gate(n.connections_self)}}},e.set=function(t){if("object"!=typeof t)throw TypeError("options_to_set has to be an object with the properties to set and the desired values");for(let n=0;n<e.nodes.length;n++)Object.assign(e.nodes[n],t)},e.disconnect=function(n,r){if(r=r||!1,n instanceof t)for(let t=0;t<e.nodes.length;t++)for(let o=0;o<n.nodes.length;o++)e.nodes[t].disconnect(n.nodes[o],{twosided:r}),r&&(e.incoming=e.incoming.filter(e=>!!e&&!(e.from===n.nodes[o]&&e.to===this.nodes[t]))),e.outgoing=e.outgoing.filter(r=>!!r&&!(r.from===e.nodes[t]&&r.to===n.nodes[o]));else if(n instanceof u)for(let t=0;t<e.nodes.length;t++)e.nodes[t].disconnect(n,{twosided:r}),r&&(e.incoming=e.incoming.filter(r=>!(r.from===n&&r.to===e.nodes[t]))),e.outgoing=e.outgoing.filter(r=>!(r.from===e.nodes[t]&&r.to===n))},e.clear=function(){for(let t=0;t<e.nodes.length;t++)e.nodes[t].clear();return e},e.addNodes=function(n){n instanceof u?n=[n]:n instanceof t&&(n=n.nodes),e.nodes.push(...n)}}},function(t,n){const e={LOGISTIC:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>Math.exp(-t)/Math.pow(1+Math.exp(-t),2):t=>1/(1+Math.exp(-t));return Array.isArray(t)?t.map(e(r)):e(r(t))},TANH:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>1-Math.tanh(t)*Math.tanh(t):t=>Math.tanh(t);return Array.isArray(t)?t.map(e(r)):e(r(t))},IDENTITY:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>1:t=>t;return Array.isArray(t)?t.map(e(r)):e(r(t))},STEP:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>0:t=>t>0?1:0;return Array.isArray(t)?t.map(e(r)):e(r(t))},RELU:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>t>0?1:0:t=>t>0?t:0;return Array.isArray(t)?t.map(e(r)):e(r(t))},SOFTSIGN:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>t/((1+Math.abs(t))*(1+Math.abs(t))):t=>t/1+Math.abs(t);return Array.isArray(t)?t.map(e(r)):e(r(t))},SINUSOID:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>Math.cos(t):t=>Math.sin(t);return Array.isArray(t)?t.map(e(r)):e(r(t))},GAUSSIAN:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>-2*t*Math.exp(-t*t):t=>Math.exp(-t*t);return Array.isArray(t)?t.map(e(r)):e(r(t))},BENT_IDENTITY:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>t/(2*Math.sqrt(t*t+1))+1:t=>(Math.sqrt(t*t+1)-1)/2+t;return Array.isArray(t)?t.map(e(r)):e(r(t))},BIPOLAR:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>0:t=>t>0?1:-1;return Array.isArray(t)?t.map(e(r)):e(r(t))},BIPOLAR_SIGMOID:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>2*Math.exp(-t)/Math.pow(1+Math.exp(-t),2):t=>2/(1+Math.exp(-t))-1;return Array.isArray(t)?t.map(e(r)):e(r(t))},HARD_TANH:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>t>-1&&t<1?1:0:t=>Math.max(-1,Math.min(1,t));return Array.isArray(t)?t.map(e(r)):e(r(t))},ABSOLUTE:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>t<0?-1:1:t=>Math.abs(t);return Array.isArray(t)?t.map(e(r)):e(r(t))},INVERSE:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=n?t=>-1:t=>1-t;return Array.isArray(t)?t.map(e(r)):e(r(t))},SELU:function(t,n){const e=function(t){const n=Number.MAX_VALUE;return t===1/0?n:t===-1/0?-n:t};if(null==t)throw new ReferenceError("Parameter 'x' is required, but it was not defined");const r=1.6732632423543772,o=1.0507009873554805,i=n?t=>t>0?o:((t>0?t:r*Math.exp(t)-r)+r)*o:t=>(t>0?t:r*Math.exp(t)-r)*o;return Array.isArray(t)?t.map(e(i)):e(i(t))}};t.exports=e},function(t,n){const e={FIXED:function(t){if(null==t)throw new ReferenceError("Missing required parameter 'base_rate'");return t},STEP:function(t,n,e){if(null==t||null==n)throw new ReferenceError("Missing required parameter 'base_rate' or 'iteration'");return e=Object.assign({gamma:.9,step_size:100},e),t*Math.pow(e.gamma,Math.floor(n/e.step_size))},EXP:function(t,n,e){if(null==t||null==n)throw new ReferenceError("Missing required parameter 'base_rate' or 'iteration'");return e=Object.assign({gamma:.999},e),t*Math.pow(e.gamma,n)},INV:function(t,n,e){if(null==t||null==n)throw new ReferenceError("Missing required parameter 'base_rate' or 'iteration'");return e=Object.assign({gamma:.001,power:2},e),t*Math.pow(1+e.gamma*n,-e.power)}};t.exports=e},function(t,n,e){const r=e(1);function o(t,n,e,o){if(null==t||null==n)throw new ReferenceError("Missing required parameter 'from' or 'to'");let i=this;!o&&r.isPlainObject(e)&&(o=e,e=void 0),o=o||{},e=null==e?2*Math.random()-1:e,Object.assign(i,{gain:1,gater:null,elegibility:0,delta_weights_previous:0,delta_weights_total:0,delta_weights:[],xtrace_nodes:[],sharedIncoming:null,xtrace_values:[]},o,{from:t,to:n,weight:e}),o.gater&&o.gater.gate(i),i.toJSON=function(){return{weight:i.weight}}}o.innovationID=function(t,n){if(null==t||null==n)throw new ReferenceError("Missing required parameter 'a' or 'b'");return.5*(t+n)*(t+n+1)+n},t.exports=o},function(t,n,e){var r={workers:e(25),serializeDataSet:function(t){for(var n=[t[0].input.length,t[0].output.length],e=0;e<t.length;e++){var r;for(r=0;r<n[0];r++)n.push(t[e].input[r]);for(r=0;r<n[1];r++)n.push(t[e].output[r])}return n},activateSerializedNetwork:function(t,n,e,r,o){for(var i=0;i<r[0];i++)n[i]=t[i];for(i=2;i<r.length;i++){let t=r[i++],u=r[i++],a=r[i++],s=r[i++],c=r[i++];for(e[t]=(-1===c?1:n[c])*s*e[t]+u;-2!==r[i];)e[t]+=n[r[i++]]*r[i++]*(-1===r[i++]?1:n[r[i-1]]);n[t]=o[a](e[t])}var u=[];for(i=n.length-r[1];i<n.length;i++)u.push(n[i]);return u},deserializeDataSet:function(t){for(var n=[],e=t[0]+t[1],r=0;r<(t.length-2)/e;r++){let i=[];for(var o=2+r*e;o<2+r*e+t[0];o++)i.push(t[o]);let u=[];for(o=2+r*e+t[0];o<2+r*e+e;o++)u.push(t[o]);n.push(i),n.push(u)}return n},testSerializedSet:function(t,n,e,r,o,i){for(var u=0,a=0;a<t.length;a+=2){let s=this.activateSerializedNetwork(t[a],e,r,o,i);u+=n(t[a+1],s)}return u/(t.length/2)},activations:[function(t){return 1/(1+Math.exp(-t))},function(t){return Math.tanh(t)},function(t){return t},function(t){return t>0?1:0},function(t){return t>0?t:0},function(t){return t/(1+Math.abs(t))},function(t){return Math.sin(t)},function(t){return Math.exp(-Math.pow(t,2))},function(t){return(Math.sqrt(Math.pow(t,2)+1)-1)/2+t},function(t){return t>0?1:-1},function(t){return 2/(1+Math.exp(-t))-1},function(t){return Math.max(-1,Math.min(1,t))},function(t){return Math.abs(t)},function(t){return 1-t},function(t){var n=1.6732632423543772;return 1.0507009873554805*(t>0?t:n*Math.exp(t)-n)}]};for(var o in r)t.exports[o]=r[o]},function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=a(p);l=!0;for(var n=c.length;n;){for(s=c,c=[];++f<n;)s&&s[f].run();f=-1,n=c.length}s=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function g(t,n){this.fun=t,this.array=n}function d(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new g(t,n)),1!==c.length||l||a(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n,e){e(1);const r=e(0),o=(e(4),e(6));class i extends o{constructor(){super(...arguments),this.input_nodes=[],this.output_nodes=[]}static Dense(t){const n=new i(t);return n.input_nodes=n.nodes,n.output_nodes=n.nodes,n}static LSTM(t){const n=new i,e=new o(t),u=new o(t),a=new o(t),s=new o(t),c=new o(t),l=new o(t);u.set({bias:1}),a.set({bias:1}),c.set({bias:1}),s.connect(u,r.connection.ALL_TO_ALL),s.connect(a,r.connection.ALL_TO_ALL),s.connect(c,r.connection.ALL_TO_ALL);const f=s.connect(s,r.connection.ONE_TO_ONE),p=s.connect(l,r.connection.ALL_TO_ALL);e.connect(s,r.connection.ALL_TO_ALL),e.connect(c,r.connection.ALL_TO_ALL),e.connect(a,r.connection.ALL_TO_ALL);const h=e.connect(u,r.connection.ALL_TO_ALL);return a.gate(f,r.gating.SELF),c.gate(p,r.gating.OUTPUT),u.gate(h,r.gating.INPUT),n.addNodes(e),n.addNodes(u),n.addNodes(a),n.addNodes(s),n.addNodes(c),n.addNodes(l),n.input_nodes.push(...e.nodes),n.output_nodes.push(...l.nodes),n}static GRU(t){const n=new i,e=new o(t),u=new o(t),a=new o(t),s=new o(t),c=new o(t),l=new o(t),f=new o(t);f.set({bias:0,squash:r.activation.IDENTITY,type:"constant"}),c.set({squash:r.activation.TANH}),a.set({bias:0,squash:r.activation.INVERSE,type:"constant"}),u.set({bias:1}),s.set({bias:0}),e.connect(u,r.connection.ALL_TO_ALL),e.connect(s,r.connection.ALL_TO_ALL),e.connect(c,r.connection.ALL_TO_ALL),f.connect(u,r.connection.ALL_TO_ALL),u.connect(a,r.connection.ONE_TO_ONE,1),f.connect(s,r.connection.ALL_TO_ALL);const p=f.connect(c,r.connection.ALL_TO_ALL);s.gate(p,r.gating.OUTPUT);const h=f.connect(l,r.connection.ALL_TO_ALL),g=c.connect(l,r.connection.ALL_TO_ALL);return u.gate(h,r.gating.OUTPUT),a.gate(g,r.gating.OUTPUT),l.connect(f,r.connection.ONE_TO_ONE,1),n.addNodes(e),n.addNodes(u),n.addNodes(a),n.addNodes(s),n.addNodes(c),n.addNodes(l),n.addNodes(f),n.input_nodes.push(...e.nodes),n.output_nodes.push(...l.nodes),n}static Memory(t,n){const e=new i,u=new o(t);let a=u;const s=[];for(let e=0;e<n;e++){const n=new o(t);n.set({squash:r.activation.IDENTITY,bias:0,type:"constant"}),a.connect(n,r.connection.ONE_TO_ONE,1),s.push(n),a=n}return e.input_nodes.push(...u.nodes),e.output_nodes.push(...s.slice(-1)[0].nodes),s.reverse().forEach(t=>e.addNodes(t)),e}}t.exports=i},function(t,n){t.exports=function(t,n,e,r,o,i){this.state=Array.isArray(t)?t.slice(0):t,this.action=Array.isArray(n)?n.slice(0):n,this.reward=e,this.nextState=Array.isArray(r)?r.slice(0):r,this.nextAction=Array.isArray(o)?o.slice(0):o,this.isFinalState=i,this.loss=0}},function(t,n,e){const r=e(2);let o,i=function(t,n){return Math.floor(Math.random()*(n+1-t)+t)},u=!1,a=function(t,n){let e;if(u)e=o,u=!1;else{let t,n,r;do{t=2*Math.random()-1,n=2*Math.random()-1,r=t*t+n*n}while(r>=1);r=Math.sqrt(-2*Math.log(r)/r),e=t*r,o=n*r,u=!0}return t+n*e};RL={getOption:function(t,n,e){return void 0===t||void 0===t[n]?e:t[n]}},t.exports.getMaxValueIndex=function(t){let n=0,e=t[0];for(let r=1;r<t.length;r++)t[r]>e&&(e=t[r],n=r);return n},t.exports.shuffle=function(t){let n,e,r;for(r=t.length-1;r>0;r--)n=Math.floor(Math.random()*(r+1)),e=t[r],t[r]=t[n],t[n]=e;return t},t.exports.randomInt=i,t.exports.pickRandom=function(t){return t[i(0,t.length-1)]},t.exports.mean=function(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n/t.length},t.exports.gaussianNoise=a,t.exports.addGaussianNoiseToNetwork=function(t,n=.2){let e=r.fromJSON(t.toJSON());for(let t=0;t<e.nodes.length;t++)e.nodes[t].bias=a(e.nodes[t].bias,n);for(let t=0;t<e.gates.length;t++)e.gates[t].bias=a(e.gates[t].bias,n);for(let t=0;t<e.connections.length;t++)e.connections[t].weight=a(e.connections[t].weight,n);return e},t.exports.RL=RL},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){e(13);const r=e(14);function o(t,n){this.buffer=[],this.maxSize=t,this.noiseRate=n||0}o.prototype={toJSON:function(){let t={};return t.buffer=this.buffer,t.maxSize=this.maxSize,t.noiseRate=this.noiseRate,t},add:function(t){void 0!==t.state&&null!==t.state&&void 0!==t.action&&null!==t.action&&void 0!==t.reward&&null!==t.reward&&(this.buffer.length>=this.maxSize&&this.buffer.shift(),this.buffer.push(t))},getRandomMiniBatch:function(t){if(t>=this.buffer.length)return this.buffer;let n=this.buffer.slice(0),e=[];for(let o=0;o<t;o++)e.push(n.splice(r.randomInt(0,n.length-1),1)[0]);return e},getAllExperiences:function(){return this.buffer},getMiniBatchWithPER(t){if(t>=this.buffer.length)return this.buffer;let n=[],e=this.buffer.slice(0),r=0;for(let t=0;t<e.length;t++)r+=Math.abs(e[t].loss);for(let o=0;o<t;o++)for(let t=0;t<e.length;t++)if(Math.random()*(1+this.noiseRate)-this.noiseRate/2<=Math.abs(e[t].loss)/r){n.push(e.splice(t,1)[0]);break}return n}},o.fromJSON=function(t){let n=new o(t.maxSize,t.noiseRate);return n.buffer=t.buffer,n},t.exports=o},function(t,n,e){var r;const o={activation:e(7),cost:e(5),methods:e(0),Connection:e(9),architect:e(24),Network:e(2),config:e(3),Group:e(6),Layer:e(12),Node:e(4),Neat:e(36),Population:e(37),GAN:e(38),multi:e(10),DQN:e(39),DDPG:e(40)};var i;void 0===(r=function(){return o}.apply(n,[]))||(t.exports=r),t.exports&&(t.exports=o),"object"==typeof window&&(i=window.carrot,o.ninja=function(){return window.carrot=i,o},window.carrot=o)},function(t,n,e){const r=e(7),o={ADD_NODE:{name:"ADD_NODE",randomActivation:!0},SUB_NODE:{name:"SUB_NODE",keep_gates:!0},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",min:-1,max:1},MOD_BIAS:{name:"MOD_BIAS",min:-1,max:1},MOD_ACTIVATION:{name:"MOD_ACTIVATION",mutateOutput:!1,allowed:[r.LOGISTIC,r.TANH,r.RELU,r.IDENTITY,r.STEP,r.SOFTSIGN,r.SINUSOID,r.GAUSSIAN,r.BENT_IDENTITY,r.BIPOLAR,r.BIPOLAR_SIGMOID,r.HARD_TANH,r.ABSOLUTE,r.INVERSE,r.SELU]},ADD_SELF_CONN:{name:"ADD_SELF_CONN"},SUB_SELF_CONN:{name:"SUB_SELF_CONN"},ADD_GATE:{name:"ADD_GATE"},SUB_GATE:{name:"SUB_GATE"},ADD_BACK_CONN:{name:"ADD_BACK_CONN"},SUB_BACK_CONN:{name:"SUB_BACK_CONN"},SWAP_NODES:{name:"SWAP_NODES",mutateOutput:!1},ADD_SHARED_BIAS:{name:"ADD_SHARED_BIAS"},SUB_SHARED_BIAS:{name:"SUB_SHARED_BIAS"},ADD_SHARED_WEIGHT:{name:"ADD_SHARED_WEIGHT"},SUB_SHARED_WEIGHT:{name:"SUB_SHARED_WEIGHT"}};o.ALL=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.ADD_GATE,o.SUB_GATE,o.ADD_SELF_CONN,o.SUB_SELF_CONN,o.ADD_BACK_CONN,o.SUB_BACK_CONN,o.SWAP_NODES,o.ADD_SHARED_BIAS,o.SUB_SHARED_BIAS,o.ADD_SHARED_WEIGHT,o.SUB_SHARED_WEIGHT],o.FFW=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.SWAP_NODES,o.ADD_SHARED_BIAS,o.SUB_SHARED_BIAS],t.exports=o},function(t,n){t.exports={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE"},POWER:{name:"POWER",power:4},TOURNAMENT:{name:"TOURNAMENT",size:5,probability:.5}}},function(t,n){t.exports={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}}},function(t,n){t.exports={OUTPUT:{name:"OUTPUT"},INPUT:{name:"INPUT"},SELF:{name:"SELF"}}},function(t,n){t.exports={ALL_TO_ALL:{name:"OUTPUT"},ALL_TO_ELSE:{name:"INPUT"},ONE_TO_ONE:{name:"SELF"}}},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){const r=e(0),o=e(2),i=e(6),u=e(12),a=e(4),s=e(1),c=(e(31),{Construct:function(t){const n=new o(0,0);let e,r,c=[];for(e=0;e<t.length;e++)if(t[e]instanceof i||t[e]instanceof u)for(r=0;r<t[e].nodes.length;r++)c.push(t[e].nodes[r]),0===e?n.input_nodes.add(t[e].nodes[r]):e===t.length-1&&n.output_nodes.add(t[e].nodes[r]);else t[e]instanceof a&&c.push(t[e]);const l=s.reduce(c,(t,n)=>t+("output"===n.type),0),f=s.reduce(c,(t,n)=>t+("input"===n.type),0),p=[],h=[];for(e=c.length-1;e>=0;e--)"output"===c[e].type||!l&&c[e].outgoing.length+c[e].gated.length===0?(c[e].type="output",n.output_size++,h.push(c[e]),c.splice(e,1)):"input"!==c[e].type&&(f||c[e].incoming.length)||(c[e].type="input",n.input_size++,p.push(c[e]),c.splice(e,1));if(n.input=n.input_size,n.output=n.output_size,c=p.concat(c).concat(h),0===n.input_size||0===n.output_size)throw new Error("Given nodes have no clear input/output node!");for(e=0;e<c.length;e++){for(r=0;r<c[e].gated.length;r++)n.gates.push(c[e].gated[r]);0!==c[e].connections_self.weight&&n.connections.push(c[e].connections_self)}return n.addNodes(c),n},Perceptron:function(){const t=Array.from(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");const n=[new i(t[0])];return s.times(t.length-1,e=>{const o=new i(t[e+1]);n.push(o),n[e].connect(n[e+1],r.connection.ALL_TO_ALL)}),c.Construct(n)},Random:function(t,n,e,i){i?!i&&s.isPlainObject(e)&&(i=e,e=n,n=void 0):(e=n,n=void 0),n=n||0,i=s.defaults(i,{connections:2*n,backconnections:0,selfconnections:0,gates:0});const u=new o(t,e);return s.times(n,()=>u.mutate(r.mutation.ADD_NODE)),s.times(i.connections-n,()=>u.mutate(r.mutation.ADD_CONN)),s.times(i.backconnections,()=>u.mutate(r.mutation.ADD_BACK_CONN)),s.times(i.selfconnections,()=>u.mutate(r.mutation.ADD_SELF_CONN)),s.times(i.gates,()=>u.mutate(r.mutation.ADD_GATE)),u},LSTM:function(){const t=Array.from(arguments),n=t.slice(-1)[0];let e,o;if("number"==typeof n?(e=t,o={}):(e=t.slice(t.length-1),o=n),e.length<3)throw new Error("You have to specify at least 3 layer sizes, one for each of 1.inputs, 2. hidden, 3. output");o=s.defaults(o,{memory_to_memory:!1,output_to_memory:!1,output_to_gates:!1,input_to_output:!0,input_to_deep:!0});const u=new i(e.shift());u.set({type:"input"});const a=new i(e.pop());a.set({type:"output"}),o.input_to_output&&u.connect(a,r.connection.ALL_TO_ALL);const l=e,f=[];let p=u;s.times(l.length,t=>{const n=l[t],e=new i(n),s=new i(n),c=new i(n),h=new i(n),g=t===l.length-1?a:new i(n);e.set({bias:1}),s.set({bias:1}),h.set({bias:1});const d=p.connect(c,r.connection.ALL_TO_ALL);p.connect(e,r.connection.ALL_TO_ALL),p.connect(h,r.connection.ALL_TO_ALL),p.connect(s,r.connection.ALL_TO_ALL),c.connect(e,r.connection.ALL_TO_ALL),c.connect(s,r.connection.ALL_TO_ALL),c.connect(h,r.connection.ALL_TO_ALL);const _=c.connect(c,r.connection.ONE_TO_ONE),v=c.connect(g,r.connection.ALL_TO_ALL);if(e.gate(d,r.gating.INPUT),s.gate(_,r.gating.SELF),h.gate(v,r.gating.OUTPUT),o.input_to_deep&&t>0){const t=u.connect(c,r.connection.ALL_TO_ALL);e.gate(t,r.gating.INPUT)}if(o.memory_to_memory){const t=c.connect(c,r.connection.ALL_TO_ELSE);e.gate(t,r.gating.INPUT)}if(o.output_to_memory){const t=a.connect(c,r.connection.ALL_TO_ALL);e.gate(t,r.gating.INPUT)}o.output_to_gates&&(a.connect(e,r.connection.ALL_TO_ALL),a.connect(s,r.connection.ALL_TO_ALL),a.connect(h,r.connection.ALL_TO_ALL)),f.push(e),f.push(s),f.push(c),f.push(h),t!==l.length-1&&f.push(g),p=g});const h=[];return h.push(u),s.forEach(f,t=>h.push(t)),h.push(a),c.Construct(h)},GRU:function(){const t=Array.from(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layer sizes");const n=new i(t.shift(),"input"),e=new i(t.pop(),"output"),r=t,o=[];o.push(n);let a=n;for(var s=0;s<r.length;s++){const t=u.GRU(r[s]);a.connect(t),a=t,o.push(t)}return a.connect(e),o.push(e),c.Construct(o)},Hopfield:function(t){const n=new i(t,"input"),e=new i(t,"output");return n.connect(e,r.connection.ALL_TO_ALL),e.set({squash:r.activation.STEP}),new c.Construct([n,e])},NARX:function(t,n,e,o,i){Array.isArray(n)||(n=[n]);const a=[],s=u.Dense(t),l=u.Memory(t,o),f=[];for(let t=0;t<n.length;t++)f.push(u.Dense(n[t]));const p=u.Dense(e),h=u.Memory(e,i);s.connect(f[0],r.connection.ALL_TO_ALL),s.connect(l,r.connection.ONE_TO_ONE,1),a.push(s),l.connect(f[0],r.connection.ALL_TO_ALL),h.connect(f[0],r.connection.ALL_TO_ALL),a.push(l),a.push(h);for(let t=0;t<f.length;t++)t<f.length-1?f[t].connect(f[t+1],r.connection.ALL_TO_ALL):f[t].connect(p,r.connection.ALL_TO_ALL),a.push(f[t]);return p.connect(h,r.connection.ONE_TO_ONE,1),a.push(p),s.set({type:"input"}),p.set({type:"output"}),c.Construct(a)},Liquid:function(){}});t.exports=c},function(t,n,e){var r={node:{TestWorker:e(26)},browser:{TestWorker:e(29)}};t.exports=r},function(t,n,e){(function(n,r){t.exports=s;const o=e(27),i=e(28),u=e(5);let a=9230;function s(t,e){const s=n.execArgv.join(),c=s.includes("inspect")||s.includes("debug");this.worker=c?o.fork(i.join(r,"/worker"),[],{execArgv:["--inspect="+a++]}):o.fork(i.join(r,"/worker"));const l=e.name in u;this.worker.send({serialized_dataset:t,cost_function:l?e.name:e.toString(),cost_is_standard:l})}s.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:r[0],states:r[1],conns:r[2]},i=this.worker;this.worker.on("message",(function t(e){i.removeListener("message",t),n(e)})),this.worker.send(o)})},terminate:function(){this.worker.kill()}}}).call(this,e(11),"/")},function(t,n){},function(t,n,e){(function(t){function e(t,n){for(var e=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}function r(t,n){if(t.filter)return t.filter(n);for(var e=[],r=0;r<t.length;r++)n(t[r],r,t)&&e.push(t[r]);return e}n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,o="/"===u.charAt(0))}return(o?"/":"")+(n=e(r(n.split("/"),(function(t){return!!t})),!o).join("/"))||"."},n.normalize=function(t){var i=n.isAbsolute(t),u="/"===o(t,-1);return(t=e(r(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&u&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,(function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},n.relative=function(t,e){function r(t){for(var n=0;n<t.length&&""===t[n];n++);for(var e=t.length-1;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),u=Math.min(o.length,i.length),a=u,s=0;s<u;s++)if(o[s]!==i[s]){a=s;break}var c=[];for(s=a;s<o.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var n=t.charCodeAt(0),e=47===n,r=-1,o=!0,i=t.length-1;i>=1;--i)if(47===(n=t.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?e?"/":".":e&&1===r?"/":t.slice(0,r)},n.basename=function(t,n){var e=function(t){"string"!=typeof t&&(t+="");var n,e=0,r=-1,o=!0;for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!o){e=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":t.slice(e,r)}(t);return n&&e.substr(-1*n.length)===n&&(e=e.substr(0,e.length-n.length)),e},n.extname=function(t){"string"!=typeof t&&(t+="");for(var n=-1,e=0,r=-1,o=!0,i=0,u=t.length-1;u>=0;--u){var a=t.charCodeAt(u);if(47!==a)-1===r&&(o=!1,r=u+1),46===a?-1===n?n=u:1!==i&&(i=1):-1!==n&&(i=-1);else if(!o){e=u+1;break}}return-1===n||-1===r||0===i||1===i&&n===r-1&&n===e+1?"":t.slice(n,r)};var o="b"==="ab".substr(-1)?function(t,n,e){return t.substr(n,e)}:function(t,n,e){return n<0&&(n=t.length+n),t.substr(n,e)}}).call(this,e(11))},function(t,n,e){t.exports=o;var r=e(10);function o(t,n){var e=new Blob([this._createBlobString(n)]);this.url=window.URL.createObjectURL(e),this.worker=new Worker(this.url);var r={set:new Float64Array(t).buffer};this.worker.postMessage(r,[r.set])}o.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:new Float64Array(r[0]).buffer,states:new Float64Array(r[1]).buffer,conns:new Float64Array(r[2]).buffer};this.worker.onmessage=function(t){var e=new Float64Array(t.data.buffer)[0];n(e)},this.worker.postMessage(o,[o.activations,o.states,o.conns])})},terminate:function(){this.worker.terminate(),window.URL.revokeObjectURL(this.url)},_createBlobString:function(t){return`\n      var F = [${r.activations.toString()}];\n      var cost = ${t.toString()};\n      var multi = {\n        deserializeDataSet: ${r.deserializeDataSet.toString()},\n        testSerializedSet: ${r.testSerializedSet.toString()},\n        activateSerializedNetwork: ${r.activateSerializedNetwork.toString()}\n      };\n\n      this.onmessage = function (e) {\n        if(typeof e.data.set === 'undefined'){\n          var A = new Float64Array(e.data.activations);\n          var S = new Float64Array(e.data.states);\n          var data = new Float64Array(e.data.conns);\n\n          var error = multi.testSerializedSet(set, cost, A, S, data, F);\n\n          var answer = { buffer: new Float64Array([error ]).buffer };\n          postMessage(answer, [answer.buffer]);\n        } else {\n          set = multi.deserializeDataSet(new Float64Array(e.data.set));\n        }\n      };`}}},function(t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n",n.homedir=function(){return"/"}},function(t,n,e){"use strict";(function(n){var r=e(32);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(t,n){if(t===n)return 0;for(var e=t.length,r=n.length,o=0,i=Math.min(e,r);o<i;++o)if(t[o]!==n[o]){e=t[o],r=n[o];break}return e<r?-1:r<e?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var u=e(33),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function f(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var p=t.exports=m,h=/\s*function\s+([^\(\s]*)\s*/;function g(t){if(u.isFunction(t)){if(c)return t.name;var n=t.toString().match(h);return n&&n[1]}}function d(t,n){return"string"==typeof t?t.length<n?t:t.slice(0,n):t}function _(t){if(c||!u.isFunction(t))return u.inspect(t);var n=g(t);return"[Function"+(n?": "+n:"")+"]"}function v(t,n,e,r,o){throw new p.AssertionError({message:e,actual:t,expected:n,operator:r,stackStartFunction:o})}function m(t,n){t||v(t,!0,n,"==",p.ok)}function y(t,n,e,r){if(t===n)return!0;if(i(t)&&i(n))return 0===o(t,n);if(u.isDate(t)&&u.isDate(n))return t.getTime()===n.getTime();if(u.isRegExp(t)&&u.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(f(t)&&f(n)&&l(t)===l(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===o(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===r.expected.indexOf(n)||(r.actual.push(t),r.expected.push(n),function(t,n,e,r){if(null==t||null==n)return!1;if(u.isPrimitive(t)||u.isPrimitive(n))return t===n;if(e&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(n))return!1;var o=w(t),i=w(n);if(o&&!i||!o&&i)return!1;if(o)return t=s.call(t),n=s.call(n),y(t,n,e);var a,c,l=b(t),f=b(n);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(a=l[c],!y(t[a],n[a],e,r))return!1;return!0}(t,n,e,r))}return e?t===n:t==n}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function A(t,n){if(!t||!n)return!1;if("[object RegExp]"==Object.prototype.toString.call(n))return n.test(t);try{if(t instanceof n)return!0}catch(t){}return!Error.isPrototypeOf(n)&&!0===n.call({},t)}function O(t,n,e,r){var o;if("function"!=typeof n)throw new TypeError('"block" argument must be a function');"string"==typeof e&&(r=e,e=null),o=function(t){var n;try{t()}catch(t){n=t}return n}(n),r=(e&&e.name?" ("+e.name+").":".")+(r?" "+r:"."),t&&!o&&v(o,e,"Missing expected exception"+r);var i="string"==typeof r,a=!t&&o&&!e;if((!t&&u.isError(o)&&i&&A(o,e)||a)&&v(o,e,"Got unwanted exception"+r),t&&o&&e&&!A(o,e)||!t&&o)throw o}p.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(_(t.actual),128)+" "+t.operator+" "+d(_(t.expected),128)}(this),this.generatedMessage=!0);var n=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var e=new Error;if(e.stack){var r=e.stack,o=g(n),i=r.indexOf("\n"+o);if(i>=0){var u=r.indexOf("\n",i+1);r=r.substring(u+1)}this.stack=r}}},u.inherits(p.AssertionError,Error),p.fail=v,p.ok=m,p.equal=function(t,n,e){t!=n&&v(t,n,e,"==",p.equal)},p.notEqual=function(t,n,e){t==n&&v(t,n,e,"!=",p.notEqual)},p.deepEqual=function(t,n,e){y(t,n,!1)||v(t,n,e,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(t,n,e){y(t,n,!0)||v(t,n,e,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(t,n,e){y(t,n,!1)&&v(t,n,e,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function t(n,e,r){y(n,e,!0)&&v(n,e,r,"notDeepStrictEqual",t)},p.strictEqual=function(t,n,e){t!==n&&v(t,n,e,"===",p.strictEqual)},p.notStrictEqual=function(t,n,e){t===n&&v(t,n,e,"!==",p.notStrictEqual)},p.throws=function(t,n,e){O(!0,t,n,e)},p.doesNotThrow=function(t,n,e){O(!1,t,n,e)},p.ifError=function(t){if(t)throw t},p.strict=r((function t(n,e){n||v(n,!0,e,"==",t)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var b=Object.keys||function(t){var n=[];for(var e in t)a.call(t,e)&&n.push(e);return n}}).call(this,e(15))},function(t,n,e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function u(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var n={},e=0;e<10;e++)n["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(t){return n[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,n){for(var e,a,s=u(t),c=1;c<arguments.length;c++){for(var l in e=Object(arguments[c]))o.call(e,l)&&(s[l]=e[l]);if(r){a=r(e);for(var f=0;f<a.length;f++)i.call(e,a[f])&&(s[a[f]]=e[a[f]])}}return s}},function(t,n,e){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var n=Object.keys(t),e={},r=0;r<n.length;r++)e[n[r]]=Object.getOwnPropertyDescriptor(t,n[r]);return e},o=/%[sdj%]/g;n.format=function(t){if(!v(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(a(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,i=r.length,u=String(t).replace(o,(function(t){if("%%"===t)return"%";if(e>=i)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}})),s=r[e];e<i;s=r[++e])d(s)||!w(s)?u+=" "+s:u+=" "+a(s);return u},n.deprecate=function(e,r){if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return n.deprecate(e,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return e.apply(this,arguments)}};var i,u={};function a(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(e)?r.showHidden=e:e&&n._extend(r,e),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,t,r.depth)}function s(t,n){var e=a.styles[n];return e?"["+a.colors[e][0]+"m"+t+"["+a.colors[e][1]+"m":t}function c(t,n){return t}function l(t,e,r){if(t.customInspect&&e&&b(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return v(o)||(o=l(t,o,r)),o}var i=function(t,n){if(m(n))return t.stylize("undefined","undefined");if(v(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}if(_(n))return t.stylize(""+n,"number");if(g(n))return t.stylize(""+n,"boolean");if(d(n))return t.stylize("null","null")}(t,e);if(i)return i;var u=Object.keys(e),a=function(t){var n={};return t.forEach((function(t,e){n[t]=!0})),n}(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(e)),O(e)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(e);if(0===u.length){if(b(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(y(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(A(e))return t.stylize(Date.prototype.toString.call(e),"date");if(O(e))return f(e)}var c,w="",E=!1,S=["{","}"];(h(e)&&(E=!0,S=["[","]"]),b(e))&&(w=" [Function"+(e.name?": "+e.name:"")+"]");return y(e)&&(w=" "+RegExp.prototype.toString.call(e)),A(e)&&(w=" "+Date.prototype.toUTCString.call(e)),O(e)&&(w=" "+f(e)),0!==u.length||E&&0!=e.length?r<0?y(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=E?function(t,n,e,r,o){for(var i=[],u=0,a=n.length;u<a;++u)x(n,String(u))?i.push(p(t,n,e,r,String(u),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(t,n,e,r,o,!0))})),i}(t,e,r,a,u):u.map((function(n){return p(t,e,r,a,n,E)})),t.seen.pop(),function(t,n,e){if(t.reduce((function(t,n){return n.indexOf("\n")>=0&&0,t+n.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1];return e[0]+n+" "+t.join(", ")+" "+e[1]}(c,w,S)):S[0]+w+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,n,e,r,o,i){var u,a,s;if((s=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]}).get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),x(r,o)||(u="["+o+"]"),a||(t.seen.indexOf(s.value)<0?(a=d(e)?l(t,s.value,null):l(t,s.value,e-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),m(u)){if(i&&o.match(/^\d+$/))return a;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function d(t){return null===t}function _(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function y(t){return w(t)&&"[object RegExp]"===E(t)}function w(t){return"object"==typeof t&&null!==t}function A(t){return w(t)&&"[object Date]"===E(t)}function O(t){return w(t)&&("[object Error]"===E(t)||t instanceof Error)}function b(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(e){if(m(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!u[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;u[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else u[e]=function(){};return u[e]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=g,n.isNull=d,n.isNullOrUndefined=function(t){return null==t},n.isNumber=_,n.isString=v,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=m,n.isRegExp=y,n.isObject=w,n.isDate=A,n.isError=O,n.isFunction=b,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=e(34);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,n=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],n].join(" ")}function x(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",N(),n.format.apply(n,arguments))},n.inherits=e(35),n._extend=function(t,n){if(!n||!w(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,n){if(!t){var e=new Error("Promise was rejected with a falsy value");e.reason=t,t=e}return n(t)}n.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var n;if("function"!=typeof(n=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,T,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,e,r=new Promise((function(t,r){n=t,e=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?e(t):n(r)}));try{t.apply(this,o)}catch(t){e(t)}return r}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),T&&Object.defineProperty(n,T,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,r(t))},n.promisify.custom=T,n.callbackify=function(n){if("function"!=typeof n)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var o=e.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};n.apply(this,e).then((function(n){t.nextTick(u,null,n)}),(function(n){t.nextTick(R,n,u)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(n)),Object.defineProperties(e,r(n)),e}}).call(this,e(11))},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(n,e,r){const o=r(1),i=r(2),u=r(0),a=(r(3),function(n,e,r,u){const s=this;e||r||u?!r&&!u&&Array.isArray(n)&&o.isPlainObject(e)?(r=n,u=e,n=e=void 0):!u&&o.isInteger(n)&&o.isInteger(e)&&o.isPlainObject(r)&&(u=r,r=void 0):(o.isPlainObject(n)?u=n:Array.isArray(n)&&(r=n),n=void 0),n=n||1,e=e||1,r=r||[],u=o.defaultsDeep(u,a.default.options),Object.assign(s,{inputs:n,outputs:e,dataset:r,...u}),s.createPool=function(t,n){const e=[];for(let r=0;r<n;r++)e.push(i.fromJSON({...t.toJSON(),score:void 0}));return e},s.createPopulation=function(t,n){!n&&Number.isInteger(t)&&(n=t,t=void 0),n=n||s.population_size,copyNetwork=t?()=>t.clone():s.template?()=>s.template.clone():()=>new i(s.inputs,s.outputs);const e=[];for(let t=0;t<n;t++)e.push(copyNetwork());return e},s.population=s.population||s.createPopulation(s.template,s.population_size),s.replace=function(n,e,r){if(null==n&&null==e&&null==r)throw new ReferenceError("Missing required parameter 'transform'");function o(t){return t instanceof i?()=>t:"function"==typeof t?t:new TypeError(`Expected ${t} to be a {Network|Function}`)}function u(n){return Number.isFinite(n)?(t,e,r)=>e===n:n instanceof i?(t,e,r)=>t===n:"function"==typeof n?n:null==n?()=>!0:new TypeError(`Expected ${t} to be a {Number|Network|Function|undefined}`)}null==e&&null==r?(r=o(n),e=u(),n=s.population):null==r?(r=o(e),e=u(n),n=s.population):(r=o(r),e=u(e),n=n||s.population);const a=[];for(let t=0;t<n.length;t++)e(n[t],t,n)?a[t]=r(n[t],t,n):a.push(n[t]);return a},s.resize=function(t){if("number"==typeof t||"string"==typeof t&&+t==+t){let n=t-s.population.length;if(n>0)for(1===s.population.length&&(s.population.push(s.population[0].clone()),n--);n-- >0;)s.population.push(s.getOffspring());else for(;n++<0;)s.population.pop()}else{if(!Array.isArray(t)||!t.length)throw new Error("Neat.resize needs a number or an array of new population members!");for(let n=0;n<t.length;n++)s.population.push(t[n])}return s.population_size=s.population.length,s.population},s.mutate=function(t){const n={maxNodes:s.maxNodes,maxConns:s.maxConns,maxGates:s.maxGates},e=t?(t,n,e)=>t.mutate(n,e):(t,n,e)=>t.mutateRandom(n,e);t=t||s.mutation;const r=[];for(let o=0;o<s.population.length;o++)if(Math.random()<=s.mutation_rate)for(let i=0;i<s.mutation_amount;i++)r.push(e(s.population[o],t,n));return r},s.evolve=async function(t,n,e){if(s.elitism+s.provenance>s.population_size)throw new Error("Can't evolve! Elitism + provenance exceeds population size!");"function"==typeof t&&(adjustGenome=n,n=t,t=void 0);const r=t=>Array.isArray(t)&&t.length;let i=r(t)?t:r(s.dataset)?s.dataset:null,u=s.population;const a=o.every(u,t=>"number"==typeof t.score||"string"==typeof t.score&&+t.score==+t.score);if(i&&!a)await s.evaluate(i);else if(!a)throw new Error("If no dataset is passed, all networks in population must have numeric '.score' properties!");n&&(u=s.replace(u,n,e)),s.sort(u);const c=[];for(let t=0;t<s.elitism;t++)c.push(u[t].clone());const l=[];for(let t=0;t<s.provenance;t++)l.push(s.template.clone());for(let t=0;t<s.population_size-s.elitism-s.provenance;t++)l.push(s.getOffspring());u=s.population=l,s.mutate();for(let t=0;t<c.length;t++)u.push(c[t]);if(i&&await s.evaluate(i),n&&(s.population=s.replace(u,n,e)),s.sort(u),!i)for(let t=0;t<u.length;t++)u[t].score=void 0;return s.generation++,s.population},s.getParent=function(){switch(s.selection.name){case"POWER":{s.population[0].score<s.population[1].score&&s.sort();const t=Math.floor(Math.pow(Math.random(),s.selection.power)*s.population.length);return s.population[t]}case"FITNESS_PROPORTIONATE":{let t=0,n=0;for(let e=0;e<s.population.length;e++){const r=s.population[e].score;n=r<n?r:n,t+=r}n=Math.abs(n),t+=n*s.population.length;let e=Math.random()*t,r=0;for(let t=0;t<s.population.length;t++){const o=s.population[t];if(r+=o.score+n,e<r)return o}return s.population[Math.floor(Math.random()*s.population.length)]}case"TOURNAMENT":{if(s.selection.size>s.population_size)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");const t=[];for(let n=0;n<s.selection.size;n++){let n=s.population[Math.floor(Math.random()*s.population.length)];t.push(n)}t.sort((function(t,n){return n.score-t.score}));for(let n=0;n<s.selection.size;n++)if(Math.random()<s.selection.probability||n===s.selection.size-1)return t[n]}}},s.getOffspring=function(){const t=s.getParent(),n=s.getParent();return i.crossOver(t,n,s.equal)},s.evaluate=async function(t){if(!(t=t||s.dataset).length)throw new Error("A dataset must be passed to the Neat constructor or Neat.evaluate()!");if(s.fitnessPopulation){if(s.clear)for(let t=0;t<s.population.length;t++)s.population[t].clear();s.fitness(t,s.population)}else for(let n=0;n<s.population.length;n++){const e=s.population[n];s.clear&&e.clear(),e.score=s.fitness(t,e),s.population[n]=e}return s.sort(),s.population[0]},s.sort=function(t){(t=Array.isArray(t)&&t.length?t:s.population).sort((function(t,n){return n.score-t.score}))},s.getFittest=function(){return void 0===s.population[s.population.length-1].score&&s.evaluate(),s.population[0].score<s.population[1].score&&s.sort(),s.population[0]},s.getAverage=function(){void 0===s.population[s.population.length-1].score&&s.evaluate();let t=0;for(let n=0;n<s.population.length;n++)t+=s.population[n].score;return t/s.population.length},s.toJSON=function(){const t=[];for(let n=0;n<s.population.length;n++)t.push(s.population[n].toJSON());return t},s.fromJSON=function(t){const n=[];for(let e=0;e<t.length;e++)n.push(i.fromJSON(t[e]));s.population=n,s.population_size=n.length}});a.default={options:{generation:0,equal:!0,clean:!1,population_size:50,growth:1e-4,cost:u.cost.MSE,amount:1,elitism:1,provenance:0,mutation_rate:.4,mutation_amount:1,fitnessPopulation:!1,fitness:function(t=dataset,n,e=1,r=u.cost.MSE,o=1e-4){let i=0;for(let o=0;o<e;o++)i-=n.test(t,r).error;return i-=(n.nodes.length-n.input-n.output+n.connections.length+n.gates.length)*o,i=isNaN(i)?-1/0:i,i/e},selection:u.selection.POWER,crossover:[u.crossover.SINGLE_POINT,u.crossover.TWO_POINT,u.crossover.UNIFORM,u.crossover.AVERAGE],mutation:u.mutation.ALL,maxNodes:1/0,maxConns:1/0,maxGates:1/0}},n.exports=a},function(t,n){},function(t,n,e){e(2)},function(t,n,e){const r=e(2),o=e(16),i=e(13),u=e(14),a=e(8),s=e(5);function c(t,n,e){this.tdErrorClamp=u.RL.getOption(e,"tdErrorClamp",1),this.isTraining=u.RL.getOption(e,"isTraining",!0),this.isDoubleDQN=u.RL.getOption(e,"isDoubleDQN",!1),this.isUsingPER=u.RL.getOption(e,"isUsingPER",!0),this.isUsingSARSA=u.RL.getOption(e,"isUsingSARSA",!1),this.gamma=u.RL.getOption(e,"gamma",.7),this.loss=u.RL.getOption(e,"loss",s.ABS),this.lossOptions=u.RL.getOption(e,"lossOptions",{}),this.startLearningThreshold=u.RL.getOption(e,"startLearningThreshold",10),this.numActions=n,this.hiddenNeurons=u.RL.getOption(e,"hiddenNeurons",[10]),this.hiddenNeuronsB=u.RL.getOption(e,"hiddenNeuronsB",this.hiddenNeurons),this.network=u.RL.getOption(e,"network",new r.architecture.Perceptron(t,...this.hiddenNeurons,n)),this.networkB=this.isDoubleDQN?u.RL.getOption(e,"networkB",new r.architecture.Perceptron(t,...this.hiddenNeuronsB,n)):null,this.learningRate=u.RL.getOption(e,"learningRate",.1),this.learningRateDecay=u.RL.getOption(e,"learningRateDecay",.999),this.learningRateMin=u.RL.getOption(e,"learningRateMin",.01),this.isDoubleDQN&&(this.learningRateB=u.RL.getOption(e,"learningRateB",this.learningRate),this.learningRateBDecay=u.RL.getOption(e,"learningRateBDecay",this.learningRateDecay),this.learningRateBMin=u.RL.getOption(e,"learningRateBMin",this.learningRateMin));let i=u.RL.getOption(e,"experienceSize",1e4),a=u.RL.getOption(e,"noisyPER",null);this.replayBuffer=u.RL.getOption(e,"experience",new o(i,null===a?0:a)),this.learningStepsPerIteration=u.RL.getOption(e,"learningStepsPerIteration",10),this.explore=u.RL.getOption(e,"explore",.3),this.exploreDecay=u.RL.getOption(e,"exploreDecay",.9999),this.exploreMin=u.RL.getOption(e,"exploreMin",.01),this.timeStep=0,this.reward=null,this.state=null,this.nextState=null,this.action=null}c.prototype={toJSON:function(){let t={};return t.network=this.network.toJSON(),t.networkB=this.isDoubleDQN?this.networkB.toJSON():null,t.gamma=this.gamma,t.explore=this.explore,t.exploreDecay=this.exploreDecay,t.exploreMin=this.exploreMin,t.learningRate=this.learningRate,t.learningRateDecay=this.learningRateDecay,t.learningRateMin=this.learningRateMin,t.learningRateB=this.learningRateB,t.learningRateBDecay=this.learningRateBDecay,t.learningRateBMin=this.learningRateBMin,t.learningStepsPerIteration=this.learningStepsPerIteration,t.isTraining=this.isTraining,t.isUsingPER=this.isUsingPER,t.isUsingSARSA=this.isUsingSARSA,t.isDoubleDQN=this.isDoubleDQN,t.tdErrorClamp=this.tdErrorClamp,t.timeStep=this.timeStep,t.experience=this.replayBuffer,t},act:function(t,n){Array.isArray(n)||(n=[]);let e,r=Math.max(this.exploreMin,a.EXP(this.explore,this.timeStep,{gamma:this.exploreDecay}));if(this.isTraining&&(r>Math.random()||this.timeStep<this.startLearningThreshold))do{e=u.randomInt(0,this.numActions-1)}while(-1!==n.indexOf(e));else if(this.isDoubleDQN){let r=this.network.activate(t,{trace:!1}),o=this.networkB.activate(t,{trace:!1});for(let t=0;t<n.length;t++)r[n[t]]=-1,o[n[t]]=-1;let i=r.map((t,n)=>t+o[n]);e=u.getMaxValueIndex(i)}else{let r=this.network.activate(t,{trace:!1});for(let t=0;t<n.length;t++)r[n[t]]=-1;e=u.getMaxValueIndex(r)}return this.state=this.nextState,this.action=this.nextAction,this.nextState=t,this.nextAction=e,e},learn:function(t,n=!1){const e=(1+t)/2;let r=1;if(null!=this.reward&&this.isTraining){let t=new i(this.state,this.action,e,this.nextState,this.nextAction,n);if(this.replayBuffer.add(t),this.timeStep>=this.startLearningThreshold){t.loss=this.study(t),r=t.loss;let n=this.isUsingPER?this.replayBuffer.getMiniBatchWithPER(this.learningStepsPerIteration):this.replayBuffer.getRandomMiniBatch(this.learningStepsPerIteration);for(let t=0;t<n.length;t++)this.study(n[t])}}return this.timeStep++,this.reward=t,r},study:function(t){let n,e=!this.isDoubleDQN||Math.random()<.5?"A":"B",r=this.isDoubleDQN&&"A"!==e?this.networkB.activate(t.nextState,{trace:!1}):this.network.activate(t.nextState,{trace:!1}),o=this.isUsingSARSA?t.nextAction:u.getMaxValueIndex(r);n=t.isFinalState?t.reward:this.isDoubleDQN?t.reward+this.gamma*("A"===e?this.networkB.activate(t.nextState,{trace:!1})[o]:this.network.activate(t.nextState,{trace:!1})[o])-("A"===e?this.network.activate(t.state,{trace:!1})[t.action]:this.networkB.activate(t.state,{trace:!1})[t.action]):this.isUsingSARSA?t.reward+this.gamma*r[o]-this.network.activate(t.state)[o]:t.reward+this.gamma*r[o];let i=this.isDoubleDQN&&"A"!==e?this.networkB.activate(t.state):this.network.activate(t.state),s=[...i];i[t.action]=n;let c=this.loss(i,s,this.lossOptions);if(Math.abs(c)>this.tdErrorClamp&&(c=c>this.tdErrorClamp?this.tdErrorClamp:-this.tdErrorClamp),this.isDoubleDQN&&"A"!==e){let t=Math.max(this.learningRateBMin,a.EXP(this.learningRateB,this.timeStep,{gamma:this.learningRateBDecay}));this.networkB.propagate(t,0,!0,i)}else{let t=Math.max(this.learningRateMin,a.EXP(this.learningRate,this.timeStep,{gamma:this.learningRateDecay}));this.network.propagate(t,0,!0,i)}return c}},c.fromJSON=function(t){t.network=t.network instanceof r?t.network.toJSON():r.fromJSON(t.network),t.isDoubleDQN?t.networkB=t.networkB instanceof r?t.networkB.toJSON():r.fromJSON(t.networkB):t.networkB=void 0;let n=new c(t.network.input_size,t.network.output_size,t);return n.timeStep=t.timeStep,n},t.exports=c},function(t,n,e){const r=e(2),o=e(16),i=e(13),u=e(14),a=e(8);function s(t,n,e){let i=u.RL.getOption(e,"hiddenNeuronsActor",[10]),a=u.RL.getOption(e,"hiddenNeuronsCritic",i);this.actor=u.RL.getOption(e,"actor",new r.architecture.Perceptron(t,i,n)),this.critic=u.RL.getOption(e,"critic",new r.architecture.Perceptron(t+n,a,n)),this.actorTarget=u.RL.getOption(e,"actorTarget",r.fromJSON(this.actor.toJSON())),this.criticTarget=u.RL.getOption(e,"criticTarget",r.fromJSON(this.critic.toJSON()));let s=u.RL.getOption(e,"experienceSize",5e4),c=u.RL.getOption(e,"noisyPER",null);this.replayBuffer=u.RL.getOption(e,"replayBuffer",new o(s,null===c?0:c)),this.learningStepsPerIteration=u.RL.getOption(e,"learningStepsPerIteration",100),this.startLearningThreshold=u.RL.getOption(e,"startLearningThreshold",0),this.isContinuousTask=u.RL.getOption(e,"isContinuousTask",!1),this.gamma=u.RL.getOption(e,"gamma",.7),this.theta=u.RL.getOption(e,"theta",.01),this.criticLossOptions=u.RL.getOption(e,"criticLossOptions",{}),this.isTraining=u.RL.getOption(e,"isTraining",!0),this.isUsingPER=u.RL.getOption(e,"isUsingPER",!0),this.learningRateActor=u.RL.getOption(e,"learningRateActor",.2),this.learningRateActorDecay=u.RL.getOption(e,"learningRateActorDecay",.9),this.learningRateActorMin=u.RL.getOption(e,"learningRateActorMin",.005),this.learningRateCritic=u.RL.getOption(e,"learningRateCritic",.2),this.learningRateCriticDecay=u.RL.getOption(e,"learningRateCriticDecay",.9),this.learningRateCriticMin=u.RL.getOption(e,"learningRateCriticMin",.05),this.noiseStandardDeviation=u.RL.getOption(e,"noiseStandardDeviation",.1),this.noiseStandardDeviationDecay=u.RL.getOption(e,"noiseStandardDeviationDecay",.99),this.noiseStandardDeviationMin=u.RL.getOption(e,"noiseStandardDeviationMin",.001),this.timeStep=0,this.actions=[],this.state=null,this.lastState=null}s.prototype={toJSON:function(){let t={};return t.actor=this.actor.toJSON(),t.critic=this.critic.toJSON(),t.actorTarget=this.actorTarget.toJSON(),t.criticTarget=this.criticTarget.toJSON(),t.gamma=this.gamma,t.theta=this.theta,t.noiseStandardDeviation=this.noiseStandardDeviation,t.noiseStandardDeviationDecay=this.noiseStandardDeviationDecay,t.noiseStandardDeviationMin=this.noiseStandardDeviationMin,t.learningRateActor=this.learningRateActor,t.learningRateActorDecay=this.learningRateActorDecay,t.learningRateActorMin=this.learningRateActorMin,t.learningRateCritic=this.learningRateCritic,t.learningRateCriticDecay=this.learningRateCriticDecay,t.learningRateCriticMin=this.learningRateCriticMin,t.isTraining=this.isTraining,t.isUsingPER=this.isUsingPER,t.timeStep=this.timeStep,t.learningStepsPerIteration=this.learningStepsPerIteration,t.replayBuffer=this.replayBuffer.toJSON(),t},act:function(t,n){void 0===n&&(n=[]);let e=Math.max(this.noiseStandardDeviationMin,a.EXP(this.noiseStandardDeviation,this.timeStep,{gamma:this.noiseStandardDeviationDecay})),r=u.addGaussianNoiseToNetwork(this.actor,e).activate(t);if(this.startLearningThreshold>this.timeStep)for(let t=0;t<r.length;t++)r[t]=Math.random();for(let t=0;t<n.length;t++)r[n[t]]=-1;return this.actions=r,this.lastState=this.state,this.state=t,this.isContinuousTask?r:u.getMaxValueIndex(r)},learn:function(t,n=!1){if(this.timeStep++,1===this.timeStep||!this.isTraining||this.startLearningThreshold>this.timeStep)return this.lastReward=t,1;let e=new i(this.lastState,this.actions,this.lastReward,this.state,0,n);e.loss=this.study(e),this.replayBuffer.add(e);let r=this.isUsingPER?this.replayBuffer.getMiniBatchWithPER(this.learningStepsPerIteration):this.replayBuffer.getRandomMiniBatch(this.learningStepsPerIteration);for(let t=0;t<r.length;t++)this.study(r[t]);return this.lastReward=t,e.loss},study:function(t){let n=t.state.concat(t.action);this.critic.activate(n);let e=this.actor.activate(t.state),r=this.criticTarget.activate(t.nextState.concat(this.actorTarget.activate(t.nextState,{trace:!1})),{trace:!1}),o=[];for(let n=0;n<r.length;n++)o.push(t.isFinalState?t.reward:t.reward+this.gamma*r[n]);let i=Math.max(this.learningRateCriticMin,a.EXP(this.learningRateCritic,this.timeStep,{gamma:this.learningRateCriticDecay}));this.critic.propagate(i,0,!0,o);let s=-u.mean(this.critic.activate(t.state.concat(e),{trace:!1}));e[u.getMaxValueIndex(t.action)]*=s;let c=Math.max(this.learningRateActorMin,a.EXP(this.learningRateActor,this.timeStep,{gamma:this.learningRateActorDecay}));this.actor.propagate(c,0,!0,e);let l=this.actor.activate(t.state,{trace:!1}),f=this.actorTarget.activate(t.state),p=this.critic.activate(n,{trace:!1}),h=this.criticTarget.activate(n);for(let t=0;t<l.length;t++)f[t]=this.theta*l[t]+(1-this.theta)*f[t];for(let t=0;t<p.length;t++)h[t]=this.theta*p[t]+(1-this.theta)*h[t];return this.actorTarget.propagate(1,0,!0,f),this.criticTarget.propagate(1,0,!0,h),s}},s.fromJSON=function(t){t.actor=t.actor instanceof r?t.actor:r.fromJSON(t.actor),t.critic=t.critic instanceof r?t.critic:r.fromJSON(t.critic),t.actorTarget=t.actorTarget instanceof r?t.actorTarget:r.fromJSON(t.actorTarget),t.criticTarget=t.criticTarget instanceof r?t.criticTarget:r.fromJSON(t.criticTarget),t.replayBuffer=t.replayBuffer instanceof o?t.replayBuffer:o.fromJSON(t.replayBuffer);let n=new s(t.actor.input_size,t.actor.output_size,t);return n.timeStep=t.timeStep,n},t.exports=s}]);