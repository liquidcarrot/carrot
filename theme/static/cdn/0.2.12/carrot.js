/*!
 * The MIT License
 * 
 * Copyright (c) 2018-present Liquid Carrot Corporation <people@liquidcarrot.io> https://liquidcarrot.io. 
 * 
 * Copyright for portions of Carrot are held by the following parties as a part of project Carrot:
 * - Copyright 2017 Thomas Wagenaar <wagenaartje@protonmail.com>
 * - Copyright 2017 Juan Cazala - cazala.com
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("child_process"),require("os")):"function"==typeof define&&define.amd?define(["child_process","os"],n):"object"==typeof exports?exports.carrot=n(require("child_process"),require("os")):t.carrot=n(t.child_process,t.os)}(window,function(t,n){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=10)}([function(t,n,e){var r={activation:e(4),mutation:e(11),selection:e(12),crossover:e(13),cost:e(14),gating:e(15),connection:e(16),rate:e(17)};t.exports=r},function(t,n){t.exports={warnings:!1}},function(t,n,e){let r=e(9),o=e(0),i=e(5);e(1);function u(t){this.bias="input"===t?0:.2*Math.random()-.1,this.squash=o.activation.LOGISTIC,this.type=t||"hidden",this.activation=0,this.state=0,this.old=0,this.mask=1,this.previousDeltaBias=0,this.totalDeltaBias=0,this.connections={in:[],out:[],gated:[],self:new i(this,this,0)},this.error={responsibility:0,projected:0,gated:0}}u.prototype={activate:function(t){if(!r.isNil(t)){if(r.isNumber(t)){if(r.isFinite(t))return this.activation=t,this.activation;throw new TypeError('Parameter "input": '+t+' is not a valid "number".')}throw new TypeError('Parameter "input": Expected a "number", got a '+typeof t)}var n;for(this.old=this.state,this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,n=0;n<this.connections.in.length;n++){const t=this.connections.in[n];this.state+=t.from.activation*t.weight*t.gain}this.activation=this.squash(this.state)*this.mask,this.derivative=this.squash(this.state,!0);var e=[],o=[];for(n=0;n<this.connections.gated.length;n++){let t=this.connections.gated[n],r=t.to,i=e.indexOf(r);i>-1?o[i]+=t.weight*t.from.activation:(e.push(r),o.push(t.weight*t.from.activation+(r.connections.self.gater===this?r.old:0))),t.gain=this.activation}for(n=0;n<this.connections.in.length;n++){let t=this.connections.in[n];t.elegibility=this.connections.self.gain*this.connections.self.weight*t.elegibility+t.from.activation*t.gain;for(var i=0;i<e.length;i++){let n=e[i],r=o[i],u=t.xtrace.nodes.indexOf(n);u>-1?t.xtrace.values[u]=n.connections.self.gain*n.connections.self.weight*t.xtrace.values[u]+this.derivative*t.elegibility*r:(t.xtrace.nodes.push(n),t.xtrace.values.push(this.derivative*t.elegibility*r))}}return this.activation},noTraceActivate:function(t){if(!r.isNil(t)){if(r.isNumber(t)){if(r.isFinite(t))return this.activation=t,this.activation;throw new TypeError('Parameter "input": '+t+' is not a valid "number".')}throw new TypeError('Parameter "input": Expected a "number", got a '+typeof t)}var n;for(this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,n=0;n<this.connections.in.length;n++){var e=this.connections.in[n];this.state+=e.from.activation*e.weight*e.gain}for(this.activation=this.squash(this.state),n=0;n<this.connections.gated.length;n++)this.connections.gated[n].gain=this.activation;return this.activation},propagate:function(t,n,e,o){if(!r.isNil(t)){if(!r.isNumber(t))throw new TypeError('Parameter "rate": Expected a "number", got a '+typeof t);if(!r.isFinite(t))throw new TypeError('Parameter "rate": '+t+' is not a valid "number".')}if(!r.isNil(n)){if(!r.isNumber(n))throw new TypeError('Parameter "momentum": Expected a "number", got a '+typeof n);if(!r.isFinite(n))throw new TypeError('Parameter "momentum": '+n+' is not a valid "number".')}if(!r.isNil(e)&&!r.isBoolean(e))throw new TypeError('Parameter "update": Expected a "boolean", got a '+typeof e);if(!r.isNil(o)){if(!r.isNumber(o))throw new TypeError('Parameter "target": Expected a "number", got a '+typeof o);if(!r.isFinite(o))throw new TypeError('Parameter "target": '+o+' is not a valid "number".')}n=n||0,t=t||.3;var i=0;if("output"===this.type)this.error.responsibility=this.error.projected=o-this.activation;else{var u;for(u=0;u<this.connections.out.length;u++){let t=this.connections.out[u];i+=t.to.error.responsibility*t.weight*t.gain}for(this.error.projected=this.derivative*i,i=0,u=0;u<this.connections.gated.length;u++){let t=this.connections.gated[u],n=t.to,e=n.connections.self.gater===this?n.old:0;e+=t.weight*t.from.activation,i+=n.error.responsibility*e}this.error.gated=this.derivative*i,this.error.responsibility=this.error.projected+this.error.gated}if("constant"!==this.type){for(u=0;u<this.connections.in.length;u++){let r=this.connections.in[u],o=this.error.projected*r.elegibility;for(var s=0;s<r.xtrace.nodes.length;s++){let t=r.xtrace.nodes[s],n=r.xtrace.values[s];o+=t.error.responsibility*n}let i=t*o*this.mask;r.totalDeltaWeight+=i,e&&(r.totalDeltaWeight+=n*r.previousDeltaWeight,r.weight+=r.totalDeltaWeight,r.previousDeltaWeight=r.totalDeltaWeight,r.totalDeltaWeight=0)}var a=t*this.error.responsibility;this.totalDeltaBias+=a,e&&(this.totalDeltaBias+=n*this.previousDeltaBias,this.bias+=this.totalDeltaBias,this.previousDeltaBias=this.totalDeltaBias,this.totalDeltaBias=0)}},connect:function(t,n){var e=[];if(void 0!==t.bias){if(this.isProjectingTo(t))throw new Error("Already projecting a connection to this node!");if(t===this)this.connections.self.weight=n||1,e.push(this.connections.self);else{let r=new i(this,t,n);t.connections.in.push(r),this.connections.out.push(r),e.push(r)}}else for(var r=0;r<t.nodes.length;r++){let o=new i(this,t.nodes[r],n);t.nodes[r].connections.in.push(o),this.connections.out.push(o),t.connections.in.push(o),e.push(o)}return e},disconnect:function(t,n){if(this!==t){for(var e=0;e<this.connections.out.length;e++){let n=this.connections.out[e];if(n.to===t){this.connections.out.splice(e,1);let t=n.to.connections.in.indexOf(n);n.to.connections.in.splice(t,1),null!==n.gater&&n.gater.ungate(n);break}}n&&t.disconnect(this)}else this.connections.self.weight=0},gate:function(t){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var e=t[n];this.connections.gated.push(e),e.gater=this}},ungate:function(t){Array.isArray(t)||(t=[t]);for(var n=t.length-1;n>=0;n--){var e=t[n],r=this.connections.gated.indexOf(e);this.connections.gated.splice(r,1),e.gater=null,e.gain=1}},clear:function(){for(var t=0;t<this.connections.in.length;t++){var n=this.connections.in[t];n.elegibility=0,n.xtrace={nodes:[],values:[]}}for(t=0;t<this.connections.gated.length;t++){this.connections.gated[t].gain=0}this.error.responsibility=this.error.projected=this.error.gated=0,this.old=this.state=this.activation=0},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!(t.name in o.mutation))throw new Error("This method does not exist!");switch(t){case o.mutation.MOD_ACTIVATION:var n=t.allowed[(t.allowed.indexOf(this.squash)+Math.floor(Math.random()*(t.allowed.length-1))+1)%t.allowed.length];this.squash=n;break;case o.mutation.MOD_BIAS:var e=Math.random()*(t.max-t.min)+t.min;this.bias+=e}},isProjectingTo:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.out.length;n++){if(this.connections.out[n].to===t)return!0}return!1},isProjectedBy:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.in.length;n++){if(this.connections.in[n].from===t)return!0}return!1},toJSON:function(){return{bias:this.bias,type:this.type,squash:this.squash.name,mask:this.mask}}},u.fromJSON=function(t){var n=new u;return n.bias=t.bias,n.type=t.type,n.mask=t.mask,n.squash=o.activation[t.squash],n},t.exports=u},function(t,n,e){let r=e(9);var o=e(6),i=e(0),u=e(5),s=e(1),a=e(2),c=i.mutation;function f(t,n){if(void 0===t||void 0===n)throw new Error("No input or output size given");var e;for(this.input=t,this.output=n,this.nodes=[],this.connections=[],this.gates=[],this.selfconns=[],this.dropout=0,e=0;e<this.input+this.output;e++){var r=e<this.input?"input":"output";this.nodes.push(new a(r))}for(e=0;e<this.input;e++)for(var o=this.input;o<this.output+this.input;o++){var i=Math.random()*this.input*Math.sqrt(2/this.input);this.connect(this.nodes[e],this.nodes[o],i)}}f.prototype={activate:function(t,n){for(var e=[],r=0;r<this.nodes.length;r++)if("input"===this.nodes[r].type)this.nodes[r].activate(t[r]);else if("output"===this.nodes[r].type){var o=this.nodes[r].activate();e.push(o)}else n&&(this.nodes[r].mask=Math.random()<this.dropout?0:1),this.nodes[r].activate();return e},noTraceActivate:function(t){for(var n=[],e=0;e<this.nodes.length;e++)if("input"===this.nodes[e].type)this.nodes[e].noTraceActivate(t[e]);else if("output"===this.nodes[e].type){var r=this.nodes[e].noTraceActivate();n.push(r)}else this.nodes[e].noTraceActivate();return n},propagate:function(t,n,e,r){if(void 0===r||r.length!==this.output)throw new Error("Output target length should match network output length");var o,i=r.length;for(o=this.nodes.length-1;o>=this.nodes.length-this.output;o--)this.nodes[o].propagate(t,n,e,r[--i]);for(o=this.nodes.length-this.output-1;o>=this.input;o--)this.nodes[o].propagate(t,n,e)},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()},connect:function(t,n,e){for(var r=t.connect(n,e),o=0;o<r.length;o++){var i=r[o];t!==n?this.connections.push(i):this.selfconns.push(i)}return r},disconnect:function(t,n){for(var e=t===n?this.selfconns:this.connections,r=0;r<e.length;r++){var o=e[r];if(o.from===t&&o.to===n){null!==o.gater&&this.ungate(o),e.splice(r,1);break}}t.disconnect(n)},gate:function(t,n){if(-1===this.nodes.indexOf(t))throw new Error("This node is not part of the network!");null==n.gater?(t.gate(n),this.gates.push(n)):s.warnings&&console.warn("This connection is already gated!")},ungate:function(t){var n=this.gates.indexOf(t);if(-1===n)throw new Error("This connection is not gated!");this.gates.splice(n,1),t.gater.ungate(t)},remove:function(t){var n=this.nodes.indexOf(t);if(-1===n)throw new Error("This node does not exist in the network!");var e=[];this.disconnect(t,t);for(var r=[],o=t.connections.in.length-1;o>=0;o--){let n=t.connections.in[o];c.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),r.push(n.from),this.disconnect(n.from,t)}var i=[];for(o=t.connections.out.length-1;o>=0;o--){let n=t.connections.out[o];c.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),i.push(n.to),this.disconnect(t,n.to)}var u=[];for(o=0;o<r.length;o++){let t=r[o];for(var s=0;s<i.length;s++){let n=i[s];if(!t.isProjectingTo(n)){var a=this.connect(t,n);u.push(a[0])}}}for(o=0;o<e.length&&0!==u.length;o++){let t=e[o],n=Math.floor(Math.random()*u.length);this.gate(t,u[n]),u.splice(n,1)}for(o=t.connections.gated.length-1;o>=0;o--){let n=t.connections.gated[o];this.ungate(n)}this.disconnect(t,t),this.nodes.splice(n,1)},getPossibleMutations:function(t){let n=[];for(var e,r,o=0;o<t.length;o++){var i=t[o];switch(i){case c.SUB_NODE:if(this.nodes.length===this.input+this.output)continue;break;case c.ADD_CONN:var u=[];for(e=0;e<this.nodes.length-this.output;e++){let t=this.nodes[e];for(r=Math.max(e+1,this.input);r<this.nodes.length;r++){let n=this.nodes[r];t.isProjectingTo(n)||u.push([t,n])}}if(0===u.length)continue;break;case c.SUB_CONN:{let t=[];for(e=0;e<this.connections.length;e++){let n=this.connections[e];n.from.connections.out.length>1&&n.to.connections.in.length>1&&this.nodes.indexOf(n.to)>this.nodes.indexOf(n.from)&&t.push(n)}if(0===t.length)continue;break}case c.MOD_ACTIVATION:if(!i.mutateOutput&&this.input+this.output===this.nodes.length)continue;break;case c.ADD_SELF_CONN:{let t=[];for(e=this.input;e<this.nodes.length;e++){let n=this.nodes[e];0===n.connections.self.weight&&t.push(n)}if(0===t.length)continue;break}case c.SUB_SELF_CONN:if(0===this.selfconns.length)continue;break;case c.ADD_GATE:{var s=this.connections.concat(this.selfconns);let t=[];for(e=0;e<s.length;e++){let n=s[e];null===n.gater&&t.push(n)}if(0===t.length)continue;break}case c.SUB_GATE:if(0===this.gates.length)continue;break;case c.ADD_BACK_CONN:u=[];for(e=this.input;e<this.nodes.length;e++){let t=this.nodes[e];for(r=this.input;r<e;r++){let n=this.nodes[r];t.isProjectingTo(n)||u.push([t,n])}}if(0===u.length)continue;break;case c.SUB_BACK_CONN:{let t=[];for(e=0;e<this.connections.length;e++){let n=this.connections[e];n.from.connections.out.length>1&&n.to.connections.in.length>1&&this.nodes.indexOf(n.from)>this.nodes.indexOf(n.to)&&t.push(n)}if(0===t.length)continue;break}case c.SWAP_NODES:if(i.mutateOutput&&this.nodes.length-this.input<2||!i.mutateOutput&&this.nodes.length-this.input-this.output<2)continue}n.push(i)}return n},mutate:function(t){if(void 0===t)throw new Error("No (correct) mutate method given!");var n,e;switch(t){case c.ADD_NODE:var o=(d=this.connections[Math.floor(Math.random()*this.connections.length)]).gater;this.disconnect(d.from,d.to);var i=this.nodes.indexOf(d.to),u=new a("hidden");c.ADD_NODE.randomActivation&&u.mutate(c.MOD_ACTIVATION);var f=Math.min(i,this.nodes.length-this.output);this.nodes.splice(f,0,u);var h=this.connect(d.from,u)[0],l=this.connect(u,d.to)[0];null!=o&&this.gate(o,Math.random()>=.5?h:l);break;case c.SUB_NODE:{if(this.nodes.length===this.input+this.output){s.warnings&&console.warn("No more nodes left to remove!");break}let t=r.filter(this.nodes,function(t){return"output"!==t.type&&"input"!==t.type});this.remove(r.sample(t));break}case c.ADD_CONN:var p=[];for(n=0;n<this.nodes.length-this.output;n++){let t=this.nodes[n];for(e=Math.max(n+1,this.input);e<this.nodes.length;e++){let n=this.nodes[e];t.isProjectingTo(n)||p.push([t,n])}}if(0===p.length){s.warnings&&console.warn("No more connections to be made!");break}var g=p[Math.floor(Math.random()*p.length)];this.connect(g[0],g[1]);break;case c.SUB_CONN:{let t=[];for(n=0;n<this.connections.length;n++){let e=this.connections[n];e.from.connections.out.length>1&&e.to.connections.in.length>1&&this.nodes.indexOf(e.to)>this.nodes.indexOf(e.from)&&t.push(e)}if(0===t.length){s.warnings&&console.warn("No connections to remove!");break}var v=t[Math.floor(Math.random()*t.length)];this.disconnect(v.from,v.to);break}case c.MOD_WEIGHT:var d=(y=this.connections.concat(this.selfconns))[Math.floor(Math.random()*y.length)],_=Math.random()*(t.max-t.min)+t.min;d.weight+=_;break;case c.MOD_BIAS:var m=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input);(u=this.nodes[m]).mutate(t);break;case c.MOD_ACTIVATION:{if(!t.mutateOutput&&this.input+this.output===this.nodes.length){s.warnings&&console.warn("No nodes that allow mutation of activation function");break}let n;n=t.mutateOutput?r.filter(this.nodes,function(t,n){return"input"!==t.type}):r.filter(this.nodes,function(t,n){return"input"!==t.type&&"output"!==t.type}),r.sample(n).mutate(t);break}case c.ADD_SELF_CONN:{let t=[];for(n=this.input;n<this.nodes.length;n++){let e=this.nodes[n];0===e.connections.self.weight&&t.push(e)}if(0===t.length){s.warnings&&console.warn("No more self-connections to add!");break}u=t[Math.floor(Math.random()*t.length)];this.connect(u,u);break}case c.SUB_SELF_CONN:if(0===this.selfconns.length){s.warnings&&console.warn("No more self-connections to remove!");break}var w=this.selfconns[Math.floor(Math.random()*this.selfconns.length)];this.disconnect(w.from,w.to);break;case c.ADD_GATE:{var y=this.connections.concat(this.selfconns);let t=[];for(n=0;n<y.length;n++){let e=y[n];null===e.gater&&t.push(e)}if(0===t.length){s.warnings&&console.warn("No more connections to gate!");break}m=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),u=this.nodes[m],w=t[Math.floor(Math.random()*t.length)];this.gate(u,w);break}case c.SUB_GATE:if(0===this.gates.length){s.warnings&&console.warn("No more connections to ungate!");break}m=Math.floor(Math.random()*this.gates.length);var b=this.gates[m];this.ungate(b);break;case c.ADD_BACK_CONN:p=[];for(n=this.input;n<this.nodes.length;n++){let t=this.nodes[n];for(e=this.input;e<n;e++){let n=this.nodes[e];t.isProjectingTo(n)||p.push([t,n])}}if(0===p.length){s.warnings&&console.warn("No more connections to be made!");break}g=p[Math.floor(Math.random()*p.length)];this.connect(g[0],g[1]);break;case c.SUB_BACK_CONN:{let t=[];for(n=0;n<this.connections.length;n++){let e=this.connections[n];e.from.connections.out.length>1&&e.to.connections.in.length>1&&this.nodes.indexOf(e.from)>this.nodes.indexOf(e.to)&&t.push(e)}if(0===t.length){s.warnings&&console.warn("No connections to remove!");break}v=t[Math.floor(Math.random()*t.length)];this.disconnect(v.from,v.to);break}case c.SWAP_NODES:{if(t.mutateOutput&&this.nodes.length-1-this.input<2||!t.mutateOutput&&this.nodes.length-1-this.input-this.output<2){s.warnings&&console.warn("No nodes that allow swapping of bias and activation function");break}let n,e,o;if(t.mutateOutput){if((n=r.filter(this.nodes,function(t,n){return"input"!==t.type})).length<2){s.warnings&&console.warn("Less than 2 availables nodes, SWAP_NODES mutation failed!");break}e=r.sample(n);let t=r.filter(n,function(t,n){return t!==e});o=r.sample(t)}else{if((n=r.filter(this.nodes,function(t,n){return"input"!==t.type&&"output"!==t.type})).length<2){s.warnings&&console.warn("Less than 2 availables nodes, SWAP_NODES mutation failed!");break}e=r.sample(n);let t=r.filter(n,function(t,n){return t!==e});o=r.sample(t)}var O=e.bias,A=e.squash;e.bias=o.bias,e.squash=o.squash,o.bias=O,o.squash=A;break}}},train:function(t,n){if(t[0].input.length!==this.input||t[0].output.length!==this.output)throw new Error("Dataset input/output size should be same as network input/output size!");void 0===(n=n||{}).rate&&s.warnings&&console.warn("Using default learning rate, please define a rate!"),void 0===n.iterations&&s.warnings&&console.warn("No target iterations given, running until error is reached!");var e=n.error||.05,r=n.cost||i.cost.MSE,o=n.rate||.3,u=n.dropout||0,a=n.momentum||0,c=n.batchSize||1,f=n.ratePolicy||i.rate.FIXED(),h=Date.now();if(c>t.length)throw new Error("Batch size must be smaller or equal to dataset length!");if(void 0===n.iterations&&void 0===n.error)throw new Error("At least one of the following options must be specified: error, iterations");if(void 0===n.error?e=-1:void 0===n.iterations&&(n.iterations=0),this.dropout=u,n.crossValidate){let e=Math.ceil((1-n.crossValidate.testSize)*t.length);var l=t.slice(0,e),p=t.slice(e)}for(var g,v,d,_=o,m=0,w=1;w>e&&(0===n.iterations||m<n.iterations)&&!(n.crossValidate&&w<=n.crossValidate.testError);){if(_=f(o,++m),n.crossValidate?(this._trainSet(l,c,_,a,r),n.clear&&this.clear(),w=this.test(p,r).error,n.clear&&this.clear()):(w=this._trainSet(t,c,_,a,r),n.clear&&this.clear()),n.shuffle)for(g=t.length;g;v=Math.floor(Math.random()*g),d=t[--g],t[g]=t[v],t[v]=d);n.log&&m%n.log==0&&console.log("iteration",m,"error",w,"rate",_),n.schedule&&m%n.schedule.iterations==0&&n.schedule.function({error:w,iteration:m})}if(n.clear&&this.clear(),u)for(g=0;g<this.nodes.length;g++)"hidden"!==this.nodes[g].type&&"constant"!==this.nodes[g].type||(this.nodes[g].mask=1-this.dropout);return{error:w,iterations:m,time:Date.now()-h}},_trainSet:function(t,n,e,r,o){for(var i=0,u=0;u<t.length;u++){var s=t[u].input,a=t[u].output,c=!((u+1)%n!=0&&u+1!==t.length),f=this.activate(s,!0);this.propagate(e,r,c,a),i+=o(a,f)}return i/t.length},test:function(t,n=i.cost.MSE){var e;if(this.dropout)for(e=0;e<this.nodes.length;e++)"hidden"!==this.nodes[e].type&&"constant"!==this.nodes[e].type||(this.nodes[e].mask=1-this.dropout);var r=0,o=Date.now();for(e=0;e<t.length;e++){let o=t[e].input;r+=n(t[e].output,this.noTraceActivate(o))}return{error:r/=t.length,time:Date.now()-o}},graph:function(t,n){var e,r=0,o=0,i={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}]};for(e=0;e<this.nodes.length;e++){var u=this.nodes[e];"input"===u.type?(1===this.input?i.constraints[0].offsets.push({node:e,offset:0}):i.constraints[0].offsets.push({node:e,offset:.8*t/(this.input-1)*r++}),i.constraints[1].offsets.push({node:e,offset:0})):"output"===u.type&&(1===this.output?i.constraints[0].offsets.push({node:e,offset:0}):i.constraints[0].offsets.push({node:e,offset:.8*t/(this.output-1)*o++}),i.constraints[1].offsets.push({node:e,offset:-.8*n})),i.nodes.push({id:e,name:"hidden"===u.type?u.squash.name:u.type.toUpperCase(),activation:u.activation,bias:u.bias})}var s=this.connections.concat(this.selfconns);for(e=0;e<s.length;e++){var a=s[e];if(null==a.gater)i.links.push({source:this.nodes.indexOf(a.from),target:this.nodes.indexOf(a.to),weight:a.weight});else{var c=i.nodes.length;i.nodes.push({id:c,activation:a.gater.activation,name:"GATE"}),i.links.push({source:this.nodes.indexOf(a.from),target:c,weight:.5*a.weight}),i.links.push({source:c,target:this.nodes.indexOf(a.to),weight:.5*a.weight}),i.links.push({source:this.nodes.indexOf(a.gater),target:c,weight:a.gater.activation,gate:!0})}}return i},toJSON:function(){var t,n={nodes:[],connections:[],input:this.input,output:this.output,dropout:this.dropout};for(t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=0;t<this.nodes.length;t++){let e=this.nodes[t],r=e.toJSON();if(r.index=t,n.nodes.push(r),0!==e.connections.self.weight){let r=e.connections.self.toJSON();r.from=t,r.to=t,r.gater=null!=e.connections.self.gater?e.connections.self.gater.index:null,n.connections.push(r)}}for(t=0;t<this.connections.length;t++){let e=this.connections[t],r=e.toJSON();r.from=e.from.index,r.to=e.to.index,r.gater=null!=e.gater?e.gater.index:null,n.connections.push(r)}return n},set:function(t){for(var n=0;n<this.nodes.length;n++)this.nodes[n].bias=t.bias||this.nodes[n].bias,this.nodes[n].squash=t.squash||this.nodes[n].squash},evolve:async function(t,n){if(t[0].input.length!==this.input||t[0].output.length!==this.output)throw new Error("Dataset input/output size should be same as network input/output size!");let r;void 0===(n=n||{}).iterations&&void 0===n.error?(n.iterations=1e3,r=.05):n.iterations?r=-1:n.error&&(r=n.error,n.iterations=0);var u=void 0!==n.growth?n.growth:1e-4,s=n.cost||i.cost.MSE,a=n.amount||1,c=n.threads;void 0===c&&(c="undefined"==typeof window?e(27).cpus().length:navigator.hardwareConcurrency);var f,h=Date.now();if(1===c)f=function(n){for(var e=0,r=0;r<a;r++)e-=n.test(t,s).error;return e-=(n.nodes.length-n.input-n.output+n.connections.length+n.gates.length)*u,(e=isNaN(e)?-1/0:e)/a};else{var p=o.serializeDataSet(t),g=[];if("undefined"==typeof window)for(var v=0;v<c;v++)g.push(new o.workers.node.TestWorker(p,s));else for(v=0;v<c;v++)g.push(new o.workers.browser.TestWorker(p,s));f=function(t){return new Promise((n,e)=>{for(var r=t.slice(),o=0,i=function(t){if(r.length){var e=r.shift();t.evaluate(e).then(function(n){e.score=-n,e.score-=(e.nodes.length-e.input-e.output+e.connections.length+e.gates.length)*u,e.score=isNaN(parseFloat(n))?-1/0:e.score,i(t)})}else++o===c&&n()},s=0;s<g.length;s++)i(g[s])})},n.fitnessPopulation=!0}n.network=this;for(var d,_=new l(this.input,this.output,f,n),m=-1/0,w=-1/0;m<-r&&(0===n.iterations||_.generation<n.iterations);){let t=await _.evolve(),e=t.score;m=e+(t.nodes.length-t.input-t.output+t.connections.length+t.gates.length)*u,e>w&&(w=e,d=t),n.log&&_.generation%n.log==0&&console.log("iteration",_.generation,"fitness",e,"error",-m),n.schedule&&_.generation%n.schedule.iterations==0&&n.schedule.function({fitness:e,error:-m,iteration:_.generation})}if(c>1)for(v=0;v<g.length;v++)g[v].terminate();return void 0!==d&&(this.nodes=d.nodes,this.connections=d.connections,this.selfconns=d.selfconns,this.gates=d.gates,n.clear&&this.clear()),{error:-m,iterations:_.generation,time:Date.now()-h}},standalone:function(){var t,n=[],e=[],r=[],o=[],i=[];for(t=0;t<this.input;t++){var u=this.nodes[t];e.push(u.activation),r.push(u.state)}for(o.push("for(var i = 0; i < input.length; i++) A[i] = input[i];"),t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=this.input;t<this.nodes.length;t++){let u=this.nodes[t];e.push(u.activation),r.push(u.state);var s=n.indexOf(u.squash.name);-1===s&&(s=n.length,n.push(u.squash.name),i.push(u.squash.toString()));for(var a=[],c=0;c<u.connections.in.length;c++){var f=u.connections.in[c],h=`A[${f.from.index}] * ${f.weight}`;null!=f.gater&&(h+=` * A[${f.gater.index}]`),a.push(h)}if(u.connections.self.weight){let n=u.connections.self,e=`S[${t}] * ${n.weight}`;null!=n.gater&&(e+=` * A[${n.gater.index}]`),a.push(e)}var l=`S[${t}] = ${a.join(" + ")} + ${u.bias};`,p=`A[${t}] = F[${s}](S[${t}])${u.mask?"":" * "+u.mask};`;o.push(l),o.push(p)}var g=[];for(t=this.nodes.length-this.output;t<this.nodes.length;t++)g.push(`A[${t}]`);g=`return [${g.join(",")}];`,o.push(g);var v="";return v+=`var F = [${i.toString()}];\r\n`,v+=`var A = [${e.toString()}];\r\n`,v+=`var S = [${r.toString()}];\r\n`,v+=`function activate(input){\r\n${o.join("\r\n")}\r\n}`},serialize:function(){var t,n=[],e=[],r=[],o=["LOGISTIC","TANH","IDENTITY","STEP","RELU","SOFTSIGN","SINUSOID","GAUSSIAN","BENT_IDENTITY","BIPOLAR","BIPOLAR_SIGMOID","HARD_TANH","ABSOLUTE","INVERSE","SELU"];for(r.push(this.input),r.push(this.output),t=0;t<this.nodes.length;t++){let r=this.nodes[t];r.index=t,n.push(r.activation),e.push(r.state)}for(t=this.input;t<this.nodes.length;t++){let n=this.nodes[t];r.push(n.index),r.push(n.bias),r.push(o.indexOf(n.squash.name)),r.push(n.connections.self.weight),r.push(null==n.connections.self.gater?-1:n.connections.self.gater.index);for(var i=0;i<n.connections.in.length;i++){let t=n.connections.in[i];r.push(t.from.index),r.push(t.weight),r.push(null==t.gater?-1:t.gater.index)}r.push(-2)}return[n,e,r]}},f.fromJSON=function(t){var n,e=new f(t.input,t.output);for(e.dropout=t.dropout,e.nodes=[],e.connections=[],n=0;n<t.nodes.length;n++)e.nodes.push(a.fromJSON(t.nodes[n]));for(n=0;n<t.connections.length;n++){var r=t.connections[n],o=e.connect(e.nodes[r.from],e.nodes[r.to])[0];o.weight=r.weight,null!=r.gater&&e.gate(e.nodes[r.gater],o)}return e},f.merge=function(t,n){if(t=f.fromJSON(t.toJSON()),n=f.fromJSON(n.toJSON()),t.output!==n.input)throw new Error("Output size of network1 should be the same as the input size of network2!");var e;for(e=0;e<n.connections.length;e++){let r=n.connections[e];if("input"===r.from.type){let e=n.nodes.indexOf(r.from);r.from=t.nodes[t.nodes.length-1-e]}}for(e=n.input-1;e>=0;e--)n.nodes.splice(e,1);for(e=t.nodes.length-t.output;e<t.nodes.length;e++)t.nodes[e].type="hidden";return t.connections=t.connections.concat(n.connections),t.nodes=t.nodes.concat(n.nodes),t},f.crossOver=function(t,n,e){if(t.input!==n.input||t.output!==n.output)throw new Error("Networks don't have the same input/output size!");var r=new f(t.input,t.output);r.connections=[],r.nodes=[];var o,i=t.score||0,s=n.score||0;if(e||i===s){let e=Math.max(t.nodes.length,n.nodes.length),r=Math.min(t.nodes.length,n.nodes.length);o=Math.floor(Math.random()*(e-r+1)+r)}else o=i>s?t.nodes.length:n.nodes.length;var c,h=t.output;for(c=0;c<t.nodes.length;c++)t.nodes[c].index=c;for(c=0;c<n.nodes.length;c++)n.nodes[c].index=c;for(c=0;c<o;c++){var l;if(c<o-h){let e=Math.random();l=e>=.5?t.nodes[c]:n.nodes[c];let r=e<.5?t.nodes[c]:n.nodes[c];void 0!==l&&"output"!==l.type||(l=r)}else l=Math.random()>=.5?t.nodes[t.nodes.length+c-o]:n.nodes[n.nodes.length+c-o];var p=new a;p.bias=l.bias,p.squash=l.squash,p.type=l.type,r.nodes.push(p)}var g={},v={};for(c=0;c<t.connections.length;c++){let n=t.connections[c],e={weight:n.weight,from:n.from.index,to:n.to.index,gater:null!=n.gater?n.gater.index:-1};g[u.innovationID(e.from,e.to)]=e}for(c=0;c<t.selfconns.length;c++){let n=t.selfconns[c],e={weight:n.weight,from:n.from.index,to:n.to.index,gater:null!=n.gater?n.gater.index:-1};g[u.innovationID(e.from,e.to)]=e}for(c=0;c<n.connections.length;c++){let t=n.connections[c],e={weight:t.weight,from:t.from.index,to:t.to.index,gater:null!=t.gater?t.gater.index:-1};v[u.innovationID(e.from,e.to)]=e}for(c=0;c<n.selfconns.length;c++){let t=n.selfconns[c],e={weight:t.weight,from:t.from.index,to:t.to.index,gater:null!=t.gater?t.gater.index:-1};v[u.innovationID(e.from,e.to)]=e}var d=[],_=Object.keys(g),m=Object.keys(v);for(c=_.length-1;c>=0;c--)if(void 0!==v[_[c]]){let t=Math.random()>=.5?g[_[c]]:v[_[c]];d.push(t),v[_[c]]=void 0}else(i>=s||e)&&d.push(g[_[c]]);if(s>=i||e)for(c=0;c<m.length;c++)void 0!==v[m[c]]&&d.push(v[m[c]]);for(c=0;c<d.length;c++){let t=d[c];if(t.to<o&&t.from<o){let n=r.nodes[t.from],e=r.nodes[t.to],i=r.connect(n,e)[0];i.weight=t.weight,-1!==t.gater&&t.gater<o&&r.gate(r.nodes[t.gater],i)}}return r},t.exports=f;var h=i.selection;function l(t,n,e,r){this.input=t,this.output=n,this.fitness=e,r=r||{},this.equal=r.equal||!0,this.clear=r.clear||!1,this.popsize=r.popsize||50,this.elitism=r.elitism||1,this.provenance=r.provenance||0,this.mutationRate=r.mutationRate||.4,this.mutationAmount=r.mutationAmount||1,this.fitnessPopulation=r.fitnessPopulation||!1,this.selection=r.selection||i.selection.POWER,this.crossover=r.crossover||[i.crossover.SINGLE_POINT,i.crossover.TWO_POINT,i.crossover.UNIFORM,i.crossover.AVERAGE],this.mutation=r.mutation||i.mutation.FFW,this.efficientMutation=r.efficientMutation||!1,this.template=r.network||new f(this.input,this.output),this.maxNodes=r.maxNodes||1/0,this.maxConns=r.maxConns||1/0,this.maxGates=r.maxGates||1/0,this.selectMutationMethod="function"==typeof r.mutationSelection?r.mutationSelection.bind(this):this.selectMutationMethod,this.generation=0,this.createPool(this.template)}l.prototype={createPool:function(t){this.population=[];for(var n=0;n<this.popsize;n++){var e=f.fromJSON(t.toJSON());e.score=void 0,this.population.push(e)}},evolve:async function(){void 0===this.population[this.population.length-1].score&&await this.evaluate(),this.sort();var t=f.fromJSON(this.population[0].toJSON());t.score=this.population[0].score;for(var n=[],e=[],r=0;r<this.elitism;r++)e.push(this.population[r]);for(r=0;r<this.provenance;r++)n.push(f.fromJSON(this.template.toJSON()));for(r=0;r<this.popsize-this.elitism-this.provenance;r++)n.push(this.getOffspring());for(this.population=n,this.mutate(),this.population.push(...e),r=0;r<this.population.length;r++)this.population[r].score=void 0;return this.generation++,t},getOffspring:function(){var t=this.getParent(),n=this.getParent();return f.crossOver(t,n,this.equal)},selectMutationMethod:function(t){var n=this.efficientMutation?t.getPossibleMutations(this.mutation):this.mutation,e=n[Math.floor(Math.random()*n.length)];if(e===i.mutation.ADD_NODE&&t.nodes.length>=this.maxNodes)s.warnings&&console.warn("maxNodes exceeded!");else if(e===i.mutation.ADD_CONN&&t.connections.length>=this.maxConns)s.warnings&&console.warn("maxConns exceeded!");else{if(!(e===i.mutation.ADD_GATE&&t.gates.length>=this.maxGates))return e;s.warnings&&console.warn("maxGates exceeded!")}},mutate:function(){for(var t=0;t<this.population.length;t++)if(Math.random()<=this.mutationRate)for(var n=0;n<this.mutationAmount;n++){var e=this.selectMutationMethod(this.population[t]);this.population[t].mutate(e)}},evaluate:async function(){var t;if(this.fitnessPopulation){if(this.clear)for(t=0;t<this.population.length;t++)this.population[t].clear();await this.fitness(this.population)}else for(t=0;t<this.population.length;t++){var n=this.population[t];this.clear&&n.clear(),n.score=await this.fitness(n)}},sort:function(){this.population.sort(function(t,n){return n.score-t.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.population[0].score<this.population[1].score&&this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();for(var t=0,n=0;n<this.population.length;n++)t+=this.population[n].score;return t/this.population.length},getParent:function(){var t;switch(this.selection){case h.POWER:this.population[0].score<this.population[1].score&&this.sort();var n=Math.floor(Math.pow(Math.random(),this.selection.power)*this.population.length);return this.population[n];case h.FITNESS_PROPORTIONATE:var e=0,r=0;for(t=0;t<this.population.length;t++){var o=this.population[t].score;r=o<r?o:r,e+=o}e+=(r=Math.abs(r))*this.population.length;var i=Math.random()*e,u=0;for(t=0;t<this.population.length;t++){let n=this.population[t];if(i<(u+=n.score+r))return n}return this.population[Math.floor(Math.random()*this.population.length)];case h.TOURNAMENT:if(this.selection.size>this.popsize)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");var s=[];for(t=0;t<this.selection.size;t++){let t=this.population[Math.floor(Math.random()*this.population.length)];s.push(t)}for(s.sort(function(t,n){return n.score-t.score}),t=0;t<this.selection.size;t++)if(Math.random()<this.selection.probability||t===this.selection.size-1)return s[t]}},export:function(){for(var t=[],n=0;n<this.population.length;n++){var e=this.population[n];t.push(e.toJSON())}return t},import:function(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];n.push(f.fromJSON(r))}this.population=n,this.popsize=n.length}}},function(t,n){var e={LOGISTIC:function(t,n){var e=1/(1+Math.exp(-t));return n?e*(1-e):e},TANH:function(t,n){return n?1-Math.pow(Math.tanh(t),2):Math.tanh(t)},IDENTITY:function(t,n){return n?1:t},STEP:function(t,n){return n?0:t>0?1:0},RELU:function(t,n){return n?t>0?1:0:t>0?t:0},SOFTSIGN:function(t,n){var e=1+Math.abs(t);return n?t/Math.pow(e,2):t/e},SINUSOID:function(t,n){return n?Math.cos(t):Math.sin(t)},GAUSSIAN:function(t,n){var e=Math.exp(-Math.pow(t,2));return n?-2*t*e:e},BENT_IDENTITY:function(t,n){var e=Math.sqrt(Math.pow(t,2)+1);return n?t/(2*e)+1:(e-1)/2+t},BIPOLAR:function(t,n){return n?0:t>0?1:-1},BIPOLAR_SIGMOID:function(t,n){var e=2/(1+Math.exp(-t))-1;return n?.5*(1+e)*(1-e):e},HARD_TANH:function(t,n){return n?t>-1&&t<1?1:0:Math.max(-1,Math.min(1,t))},ABSOLUTE:function(t,n){return n?t<0?-1:1:Math.abs(t)},INVERSE:function(t,n){return n?-1:1-t},SELU:function(t,n){var e=1.6732632423543772,r=1.0507009873554805,o=t>0?t:e*Math.exp(t)-e;return n?t>0?r:(o+e)*r:o*r}};t.exports=e},function(t,n){function e(t,n,e){this.from=t,this.to=n,this.gain=1,this.weight=void 0===e?.2*Math.random()-.1:e,this.gater=null,this.elegibility=0,this.previousDeltaWeight=0,this.totalDeltaWeight=0,this.xtrace={nodes:[],values:[]}}e.prototype={toJSON:function(){return{weight:this.weight}}},e.innovationID=function(t,n){return.5*(t+n)*(t+n+1)+n},t.exports=e},function(t,n,e){var r={workers:e(21),serializeDataSet:function(t){for(var n=[t[0].input.length,t[0].output.length],e=0;e<t.length;e++){var r;for(r=0;r<n[0];r++)n.push(t[e].input[r]);for(r=0;r<n[1];r++)n.push(t[e].output[r])}return n},activateSerializedNetwork:function(t,n,e,r,o){for(var i=0;i<r[0];i++)n[i]=t[i];for(i=2;i<r.length;i++){let t=r[i++],u=r[i++],s=r[i++],a=r[i++],c=r[i++];for(e[t]=(-1===c?1:n[c])*a*e[t]+u;-2!==r[i];)e[t]+=n[r[i++]]*r[i++]*(-1===r[i++]?1:n[r[i-1]]);n[t]=o[s](e[t])}var u=[];for(i=n.length-r[1];i<n.length;i++)u.push(n[i]);return u},deserializeDataSet:function(t){for(var n=[],e=t[0]+t[1],r=0;r<(t.length-2)/e;r++){let i=[];for(var o=2+r*e;o<2+r*e+t[0];o++)i.push(t[o]);let u=[];for(o=2+r*e+t[0];o<2+r*e+e;o++)u.push(t[o]);n.push(i),n.push(u)}return n},testSerializedSet:function(t,n,e,r,o,i){for(var u=0,s=0;s<t.length;s+=2){let a=this.activateSerializedNetwork(t[s],e,r,o,i);u+=n(t[s+1],a)}return u/(t.length/2)},activations:[function(t){return 1/(1+Math.exp(-t))},function(t){return Math.tanh(t)},function(t){return t},function(t){return t>0?1:0},function(t){return t>0?t:0},function(t){return t/(1+Math.abs(t))},function(t){return Math.sin(t)},function(t){return Math.exp(-Math.pow(t,2))},function(t){return(Math.sqrt(Math.pow(t,2)+1)-1)/2+t},function(t){return t>0?1:-1},function(t){return 2/(1+Math.exp(-t))-1},function(t){return Math.max(-1,Math.min(1,t))},function(t){return Math.abs(t)},function(t){return 1-t},function(t){var n=1.6732632423543772;return 1.0507009873554805*(t>0?t:n*Math.exp(t)-n)}]};for(var o in r)t.exports[o]=r[o]},function(t,n,e){t.exports=s;var r=e(0),o=e(1),i=e(8),u=e(2);function s(t){this.nodes=[],this.connections={in:[],out:[],self:[]};for(var n=0;n<t;n++)this.nodes.push(new u)}s.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var r;r=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(r)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var r=this.nodes.length-1;r>=0;r--)void 0===e?this.nodes[r].propagate(t,n,!0):this.nodes[r].propagate(t,n,!0,e[r])},connect:function(t,n,e){let a=this===t;var c,f,h=[];if(t instanceof s){if(void 0===n&&(a?(o.warnings&&console.warn("No group connection specified, using ONE_TO_ONE"),n=r.connection.ONE_TO_ONE):(o.warnings&&console.warn("No group connection specified, using ALL_TO_ALL"),n=r.connection.ALL_TO_ALL)),n===r.connection.ALL_TO_ALL||n===r.connection.ALL_TO_ELSE)for(c=0;c<this.nodes.length;c++)for(f=0;f<t.nodes.length;f++){if(n===r.connection.ALL_TO_ELSE&&this.nodes[c]===t.nodes[f])continue;let o=this.nodes[c].connect(t.nodes[f],e);this.connections.out.push(o[0]),t.connections.in.push(o[0]),h.push(o[0])}else if(n===r.connection.ONE_TO_ONE)if(a)for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t.nodes[c],e);this.connections.self.push(n[0]),h.push(n[0])}else{if(this.nodes.length!==t.nodes.length)throw new Error("From and To group must be the same size!");for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t.nodes[c],e);this.connections.out.push(n[0]),t.connections.in.push(n[0]),h.push(n[0])}}}else if(t instanceof i)h=t.input(this,n,e);else if(t instanceof u)for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t,e);this.connections.out.push(n[0]),h.push(n[0])}return h},gate:function(t,n){if(void 0===n)throw new Error("Please specify Gating.INPUT, Gating.OUTPUT");Array.isArray(t)||(t=[t]);var e,o,i=[],u=[];for(e=0;e<t.length;e++){var s=t[e];i.includes(s.from)||i.push(s.from),u.includes(s.to)||u.push(s.to)}switch(n){case r.gating.INPUT:for(e=0;e<u.length;e++){let n=u[e],r=this.nodes[e%this.nodes.length];for(o=0;o<n.connections.in.length;o++){let e=n.connections.in[o];t.includes(e)&&r.gate(e)}}break;case r.gating.OUTPUT:for(e=0;e<i.length;e++){let n=i[e],r=this.nodes[e%this.nodes.length];for(o=0;o<n.connections.out.length;o++){let e=n.connections.out[o];t.includes(e)&&r.gate(e)}}break;case r.gating.SELF:for(e=0;e<i.length;e++){let n=i[e],r=this.nodes[e%this.nodes.length];t.includes(n.connections.self)&&r.gate(n.connections.self)}}},set:function(t){for(var n=0;n<this.nodes.length;n++)void 0!==t.bias&&(this.nodes[n].bias=t.bias),this.nodes[n].squash=t.squash||this.nodes[n].squash,this.nodes[n].type=t.type||this.nodes[n].type},disconnect:function(t,n){var e,r,o;if(n=n||!1,t instanceof s)for(e=0;e<this.nodes.length;e++)for(r=0;r<t.nodes.length;r++){for(this.nodes[e].disconnect(t.nodes[r],n),o=this.connections.out.length-1;o>=0;o--){let n=this.connections.out[o];if(n.from===this.nodes[e]&&n.to===t.nodes[r]){this.connections.out.splice(o,1);break}}if(n)for(o=this.connections.in.length-1;o>=0;o--){let n=this.connections.in[o];if(n.from===t.nodes[r]&&n.to===this.nodes[e]){this.connections.in.splice(o,1);break}}}else if(t instanceof u)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),r=this.connections.out.length-1;r>=0;r--){let n=this.connections.out[r];if(n.from===this.nodes[e]&&n.to===t){this.connections.out.splice(r,1);break}}if(n)for(r=this.connections.in.length-1;r>=0;r--){var i=this.connections.in[r];if(i.from===t&&i.to===this.nodes[e]){this.connections.in.splice(r,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}}},function(t,n,e){var r=e(0),o=e(7),i=e(2);function u(){this.output=null,this.nodes=[],this.connections={in:[],out:[],self:[]}}u.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var r;r=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(r)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var r=this.nodes.length-1;r>=0;r--)void 0===e?this.nodes[r].propagate(t,n,!0):this.nodes[r].propagate(t,n,!0,e[r])},connect:function(t,n,e){var r;return t instanceof o||t instanceof i?r=this.output.connect(t,n,e):t instanceof u&&(r=t.input(this,n,e)),r},gate:function(t,n){this.output.gate(t,n)},set:function(t){for(var n=0;n<this.nodes.length;n++){var e=this.nodes[n];e instanceof i?(void 0!==t.bias&&(e.bias=t.bias),e.squash=t.squash||e.squash,e.type=t.type||e.type):e instanceof o&&e.set(t)}},disconnect:function(t,n){var e,r,u;if(n=n||!1,t instanceof o)for(e=0;e<this.nodes.length;e++)for(r=0;r<t.nodes.length;r++){for(this.nodes[e].disconnect(t.nodes[r],n),u=this.connections.out.length-1;u>=0;u--){let n=this.connections.out[u];if(n.from===this.nodes[e]&&n.to===t.nodes[r]){this.connections.out.splice(u,1);break}}if(n)for(u=this.connections.in.length-1;u>=0;u--){let n=this.connections.in[u];if(n.from===t.nodes[r]&&n.to===this.nodes[e]){this.connections.in.splice(u,1);break}}}else if(t instanceof i)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),r=this.connections.out.length-1;r>=0;r--){let n=this.connections.out[r];if(n.from===this.nodes[e]&&n.to===t){this.connections.out.splice(r,1);break}}if(n)for(u=this.connections.in.length-1;u>=0;u--){let n=this.connections.in[u];if(n.from===t&&n.to===this.nodes[e]){this.connections.in.splice(u,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}},u.Dense=function(t){var n=new u,e=new o(t);return n.nodes.push(e),n.output=e,n.input=function(t,n,o){return t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL,t.connect(e,n,o)},n},u.LSTM=function(t){var n=new u,e=new o(t),i=new o(t),s=new o(t),a=new o(t),c=new o(t);e.set({bias:1}),i.set({bias:1}),a.set({bias:1}),s.connect(e,r.connection.ALL_TO_ALL),s.connect(i,r.connection.ALL_TO_ALL),s.connect(a,r.connection.ALL_TO_ALL);var f=s.connect(s,r.connection.ONE_TO_ONE),h=s.connect(c,r.connection.ALL_TO_ALL);return i.gate(f,r.gating.SELF),a.gate(h,r.gating.OUTPUT),n.nodes=[e,i,s,a,c],n.output=c,n.input=function(t,n,o){t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL;var c=[],f=t.connect(s,n,o);return c=(c=(c=(c=c.concat(f)).concat(t.connect(e,n,o))).concat(t.connect(a,n,o))).concat(t.connect(i,n,o)),e.gate(f,r.gating.INPUT),c},n},u.GRU=function(t){var n=new u,e=new o(t),i=new o(t),s=new o(t),a=new o(t),c=new o(t),f=new o(t);f.set({bias:0,squash:r.activation.IDENTITY,type:"constant"}),a.set({squash:r.activation.TANH}),i.set({bias:0,squash:r.activation.INVERSE,type:"constant"}),e.set({bias:1}),s.set({bias:0}),f.connect(e,r.connection.ALL_TO_ALL),e.connect(i,r.connection.ONE_TO_ONE,1),f.connect(s,r.connection.ALL_TO_ALL);var h=f.connect(a,r.connection.ALL_TO_ALL);s.gate(h,r.gating.OUTPUT);var l=f.connect(c,r.connection.ALL_TO_ALL),p=a.connect(c,r.connection.ALL_TO_ALL);return e.gate(l,r.gating.OUTPUT),i.gate(p,r.gating.OUTPUT),c.connect(f,r.connection.ONE_TO_ONE,1),n.nodes=[e,i,s,a,c,f],n.output=c,n.input=function(t,n,o){t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL;var i=[];return i=(i=(i=i.concat(t.connect(e,n,o))).concat(t.connect(s,n,o))).concat(t.connect(a,n,o))},n},u.Memory=function(t,n){var e,i=new u,s=null;for(e=0;e<n;e++){var a=new o(t);a.set({squash:r.activation.IDENTITY,bias:0,type:"constant"}),null!=s&&s.connect(a,r.connection.ONE_TO_ONE,1),i.nodes.push(a),s=a}for(i.nodes.reverse(),e=0;e<i.nodes.length;e++)i.nodes[e].nodes.reverse();var c=new o(0);for(var f in i.nodes)c.nodes=c.nodes.concat(i.nodes[f].nodes);return i.output=c,i.input=function(t,n,e){if(t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL,t.nodes.length!==i.nodes[i.nodes.length-1].nodes.length)throw new Error("Previous layer size must be same as memory size");return t.connect(i.nodes[i.nodes.length-1],r.connection.ONE_TO_ONE,1)},i},t.exports=u},function(t,n,e){(function(t,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,u=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",l=1,p=2,g=4,v=1,d=2,_=1,m=2,w=4,y=8,b=16,O=32,A=64,N=128,T=256,x=512,E=30,L="...",S=800,M=16,D=1,k=2,I=1/0,P=9007199254740991,j=1.7976931348623157e308,U=NaN,R=4294967295,C=R-1,z=R>>>1,B=[["ary",N],["bind",_],["bindKey",m],["curry",y],["curryRight",b],["flip",x],["partial",O],["partialRight",A],["rearg",T]],F="[object Arguments]",W="[object Array]",G="[object AsyncFunction]",q="[object Boolean]",$="[object Date]",J="[object DOMException]",V="[object Error]",H="[object Function]",K="[object GeneratorFunction]",Y="[object Map]",Z="[object Number]",X="[object Null]",Q="[object Object]",tt="[object Proxy]",nt="[object RegExp]",et="[object Set]",rt="[object String]",ot="[object Symbol]",it="[object Undefined]",ut="[object WeakMap]",st="[object WeakSet]",at="[object ArrayBuffer]",ct="[object DataView]",ft="[object Float32Array]",ht="[object Float64Array]",lt="[object Int8Array]",pt="[object Int16Array]",gt="[object Int32Array]",vt="[object Uint8Array]",dt="[object Uint8ClampedArray]",_t="[object Uint16Array]",mt="[object Uint32Array]",wt=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,bt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,At=/[&<>"']/g,Nt=RegExp(Ot.source),Tt=RegExp(At.source),xt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(kt.source),Pt=/^\s+|\s+$/g,jt=/^\s+/,Ut=/\s+$/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,zt=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ft=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,$t=/^0b[01]+$/i,Jt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,Ht=/^(?:0|[1-9]\d*)$/,Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="[\\ud800-\\udfff]",nn="["+Qt+"]",en="["+Xt+"]",rn="\\d+",on="[\\u2700-\\u27bf]",un="[a-z\\xdf-\\xf6\\xf8-\\xff]",sn="[^\\ud800-\\udfff"+Qt+rn+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",an="\\ud83c[\\udffb-\\udfff]",cn="[^\\ud800-\\udfff]",fn="(?:\\ud83c[\\udde6-\\uddff]){2}",hn="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="[A-Z\\xc0-\\xd6\\xd8-\\xde]",pn="(?:"+un+"|"+sn+")",gn="(?:"+ln+"|"+sn+")",vn="(?:"+en+"|"+an+")"+"?",dn="[\\ufe0e\\ufe0f]?"+vn+("(?:\\u200d(?:"+[cn,fn,hn].join("|")+")[\\ufe0e\\ufe0f]?"+vn+")*"),_n="(?:"+[on,fn,hn].join("|")+")"+dn,mn="(?:"+[cn+en+"?",en,fn,hn,tn].join("|")+")",wn=RegExp("['’]","g"),yn=RegExp(en,"g"),bn=RegExp(an+"(?="+an+")|"+mn+dn,"g"),On=RegExp([ln+"?"+un+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[nn,ln,"$"].join("|")+")",gn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[nn,ln+pn,"$"].join("|")+")",ln+"?"+pn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ln+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rn,_n].join("|"),"g"),An=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),Nn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Tn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xn=-1,En={};En[ft]=En[ht]=En[lt]=En[pt]=En[gt]=En[vt]=En[dt]=En[_t]=En[mt]=!0,En[F]=En[W]=En[at]=En[q]=En[ct]=En[$]=En[V]=En[H]=En[Y]=En[Z]=En[Q]=En[nt]=En[et]=En[rt]=En[ut]=!1;var Ln={};Ln[F]=Ln[W]=Ln[at]=Ln[ct]=Ln[q]=Ln[$]=Ln[ft]=Ln[ht]=Ln[lt]=Ln[pt]=Ln[gt]=Ln[Y]=Ln[Z]=Ln[Q]=Ln[nt]=Ln[et]=Ln[rt]=Ln[ot]=Ln[vt]=Ln[dt]=Ln[_t]=Ln[mt]=!0,Ln[V]=Ln[H]=Ln[ut]=!1;var Sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn=parseFloat,Dn=parseInt,kn="object"==typeof t&&t&&t.Object===Object&&t,In="object"==typeof self&&self&&self.Object===Object&&self,Pn=kn||In||Function("return this")(),jn=n&&!n.nodeType&&n,Un=jn&&"object"==typeof r&&r&&!r.nodeType&&r,Rn=Un&&Un.exports===jn,Cn=Rn&&kn.process,zn=function(){try{var t=Un&&Un.require&&Un.require("util").types;return t||Cn&&Cn.binding&&Cn.binding("util")}catch(t){}}(),Bn=zn&&zn.isArrayBuffer,Fn=zn&&zn.isDate,Wn=zn&&zn.isMap,Gn=zn&&zn.isRegExp,qn=zn&&zn.isSet,$n=zn&&zn.isTypedArray;function Jn(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Vn(t,n,e,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var u=t[o];n(r,u,e(u),t)}return r}function Hn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function Kn(t,n){for(var e=null==t?0:t.length;e--&&!1!==n(t[e],e,t););return t}function Yn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return!1;return!0}function Zn(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var u=t[e];n(u,e,t)&&(i[o++]=u)}return i}function Xn(t,n){return!!(null==t?0:t.length)&&ae(t,n,0)>-1}function Qn(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1}function te(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function ne(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function ee(t,n,e,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(e=t[++o]);++o<i;)e=n(e,t[o],o,t);return e}function re(t,n,e,r){var o=null==t?0:t.length;for(r&&o&&(e=t[--o]);o--;)e=n(e,t[o],o,t);return e}function oe(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}var ie=le("length");function ue(t,n,e){var r;return e(t,function(t,e,o){if(n(t,e,o))return r=e,!1}),r}function se(t,n,e,r){for(var o=t.length,i=e+(r?1:-1);r?i--:++i<o;)if(n(t[i],i,t))return i;return-1}function ae(t,n,e){return n==n?function(t,n,e){var r=e-1,o=t.length;for(;++r<o;)if(t[r]===n)return r;return-1}(t,n,e):se(t,fe,e)}function ce(t,n,e,r){for(var o=e-1,i=t.length;++o<i;)if(r(t[o],n))return o;return-1}function fe(t){return t!=t}function he(t,n){var e=null==t?0:t.length;return e?ve(t,n)/e:U}function le(t){return function(n){return null==n?i:n[t]}}function pe(t){return function(n){return null==t?i:t[n]}}function ge(t,n,e,r,o){return o(t,function(t,o,i){e=r?(r=!1,t):n(e,t,o,i)}),e}function ve(t,n){for(var e,r=-1,o=t.length;++r<o;){var u=n(t[r]);u!==i&&(e=e===i?u:e+u)}return e}function de(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function _e(t){return function(n){return t(n)}}function me(t,n){return te(n,function(n){return t[n]})}function we(t,n){return t.has(n)}function ye(t,n){for(var e=-1,r=t.length;++e<r&&ae(n,t[e],0)>-1;);return e}function be(t,n){for(var e=t.length;e--&&ae(n,t[e],0)>-1;);return e}var Oe=pe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ae=pe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ne(t){return"\\"+Sn[t]}function Te(t){return An.test(t)}function xe(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function Ee(t,n){return function(e){return t(n(e))}}function Le(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e];u!==n&&u!==h||(t[e]=h,i[o++]=e)}return i}function Se(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function Me(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=[t,t]}),e}function De(t){return Te(t)?function(t){var n=bn.lastIndex=0;for(;bn.test(t);)++n;return n}(t):ie(t)}function ke(t){return Te(t)?function(t){return t.match(bn)||[]}(t):function(t){return t.split("")}(t)}var Ie=pe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pe=function t(n){var e,r=(n=null==n?Pn:Pe.defaults(Pn.Object(),n,Pe.pick(Pn,Tn))).Array,o=n.Date,Xt=n.Error,Qt=n.Function,tn=n.Math,nn=n.Object,en=n.RegExp,rn=n.String,on=n.TypeError,un=r.prototype,sn=Qt.prototype,an=nn.prototype,cn=n["__core-js_shared__"],fn=sn.toString,hn=an.hasOwnProperty,ln=0,pn=(e=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",gn=an.toString,vn=fn.call(nn),dn=Pn._,_n=en("^"+fn.call(hn).replace(kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=Rn?n.Buffer:i,bn=n.Symbol,An=n.Uint8Array,Sn=mn?mn.allocUnsafe:i,kn=Ee(nn.getPrototypeOf,nn),In=nn.create,jn=an.propertyIsEnumerable,Un=un.splice,Cn=bn?bn.isConcatSpreadable:i,zn=bn?bn.iterator:i,ie=bn?bn.toStringTag:i,pe=function(){try{var t=zi(nn,"defineProperty");return t({},"",{}),t}catch(t){}}(),je=n.clearTimeout!==Pn.clearTimeout&&n.clearTimeout,Ue=o&&o.now!==Pn.Date.now&&o.now,Re=n.setTimeout!==Pn.setTimeout&&n.setTimeout,Ce=tn.ceil,ze=tn.floor,Be=nn.getOwnPropertySymbols,Fe=mn?mn.isBuffer:i,We=n.isFinite,Ge=un.join,qe=Ee(nn.keys,nn),$e=tn.max,Je=tn.min,Ve=o.now,He=n.parseInt,Ke=tn.random,Ye=un.reverse,Ze=zi(n,"DataView"),Xe=zi(n,"Map"),Qe=zi(n,"Promise"),tr=zi(n,"Set"),nr=zi(n,"WeakMap"),er=zi(nn,"create"),rr=nr&&new nr,or={},ir=hu(Ze),ur=hu(Xe),sr=hu(Qe),ar=hu(tr),cr=hu(nr),fr=bn?bn.prototype:i,hr=fr?fr.valueOf:i,lr=fr?fr.toString:i;function pr(t){if(Ls(t)&&!_s(t)&&!(t instanceof _r)){if(t instanceof dr)return t;if(hn.call(t,"__wrapped__"))return lu(t)}return new dr(t)}var gr=function(){function t(){}return function(n){if(!Es(n))return{};if(In)return In(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function vr(){}function dr(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}function _r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function mr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function wr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function yr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function br(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new yr;++n<e;)this.add(t[n])}function Or(t){var n=this.__data__=new wr(t);this.size=n.size}function Ar(t,n){var e=_s(t),r=!e&&ds(t),o=!e&&!r&&bs(t),i=!e&&!r&&!o&&Us(t),u=e||r||o||i,s=u?de(t.length,rn):[],a=s.length;for(var c in t)!n&&!hn.call(t,c)||u&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ji(c,a))||s.push(c);return s}function Nr(t){var n=t.length;return n?t[Oo(0,n-1)]:i}function Tr(t,n){return au(ri(t),Pr(n,0,t.length))}function xr(t){return au(ri(t))}function Er(t,n,e){(e===i||ps(t[n],e))&&(e!==i||n in t)||kr(t,n,e)}function Lr(t,n,e){var r=t[n];hn.call(t,n)&&ps(r,e)&&(e!==i||n in t)||kr(t,n,e)}function Sr(t,n){for(var e=t.length;e--;)if(ps(t[e][0],n))return e;return-1}function Mr(t,n,e,r){return zr(t,function(t,o,i){n(r,t,e(t),i)}),r}function Dr(t,n){return t&&oi(n,oa(n),t)}function kr(t,n,e){"__proto__"==n&&pe?pe(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Ir(t,n){for(var e=-1,o=n.length,u=r(o),s=null==t;++e<o;)u[e]=s?i:Qs(t,n[e]);return u}function Pr(t,n,e){return t==t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function jr(t,n,e,r,o,u){var s,a=n&l,c=n&p,f=n&g;if(e&&(s=o?e(t,r,o,u):e(t)),s!==i)return s;if(!Es(t))return t;var h=_s(t);if(h){if(s=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&hn.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return ri(t,s)}else{var v=Wi(t),d=v==H||v==K;if(bs(t))return Zo(t,a);if(v==Q||v==F||d&&!o){if(s=c||d?{}:qi(t),!a)return c?function(t,n){return oi(t,Fi(t),n)}(t,function(t,n){return t&&oi(n,ia(n),t)}(s,t)):function(t,n){return oi(t,Bi(t),n)}(t,Dr(s,t))}else{if(!Ln[v])return o?t:{};s=function(t,n,e){var r,o,i,u=t.constructor;switch(n){case at:return Xo(t);case q:case $:return new u(+t);case ct:return function(t,n){var e=n?Xo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case ft:case ht:case lt:case pt:case gt:case vt:case dt:case _t:case mt:return Qo(t,e);case Y:return new u;case Z:case rt:return new u(t);case nt:return(i=new(o=t).constructor(o.source,Gt.exec(o))).lastIndex=o.lastIndex,i;case et:return new u;case ot:return r=t,hr?nn(hr.call(r)):{}}}(t,v,a)}}u||(u=new Or);var _=u.get(t);if(_)return _;if(u.set(t,s),Is(t))return t.forEach(function(r){s.add(jr(r,n,e,r,t,u))}),s;if(Ss(t))return t.forEach(function(r,o){s.set(o,jr(r,n,e,o,t,u))}),s;var m=h?i:(f?c?ki:Di:c?ia:oa)(t);return Hn(m||t,function(r,o){m&&(r=t[o=r]),Lr(s,o,jr(r,n,e,o,t,u))}),s}function Ur(t,n,e){var r=e.length;if(null==t)return!r;for(t=nn(t);r--;){var o=e[r],u=n[o],s=t[o];if(s===i&&!(o in t)||!u(s))return!1}return!0}function Rr(t,n,e){if("function"!=typeof t)throw new on(a);return ou(function(){t.apply(i,e)},n)}function Cr(t,n,e,r){var o=-1,i=Xn,s=!0,a=t.length,c=[],f=n.length;if(!a)return c;e&&(n=te(n,_e(e))),r?(i=Qn,s=!1):n.length>=u&&(i=we,s=!1,n=new br(n));t:for(;++o<a;){var h=t[o],l=null==e?h:e(h);if(h=r||0!==h?h:0,s&&l==l){for(var p=f;p--;)if(n[p]===l)continue t;c.push(h)}else i(n,l,r)||c.push(h)}return c}pr.templateSettings={escape:xt,evaluate:Et,interpolate:Lt,variable:"",imports:{_:pr}},pr.prototype=vr.prototype,pr.prototype.constructor=pr,dr.prototype=gr(vr.prototype),dr.prototype.constructor=dr,_r.prototype=gr(vr.prototype),_r.prototype.constructor=_r,mr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},mr.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},mr.prototype.get=function(t){var n=this.__data__;if(er){var e=n[t];return e===c?i:e}return hn.call(n,t)?n[t]:i},mr.prototype.has=function(t){var n=this.__data__;return er?n[t]!==i:hn.call(n,t)},mr.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=er&&n===i?c:n,this},wr.prototype.clear=function(){this.__data__=[],this.size=0},wr.prototype.delete=function(t){var n=this.__data__,e=Sr(n,t);return!(e<0||(e==n.length-1?n.pop():Un.call(n,e,1),--this.size,0))},wr.prototype.get=function(t){var n=this.__data__,e=Sr(n,t);return e<0?i:n[e][1]},wr.prototype.has=function(t){return Sr(this.__data__,t)>-1},wr.prototype.set=function(t,n){var e=this.__data__,r=Sr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this},yr.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Xe||wr),string:new mr}},yr.prototype.delete=function(t){var n=Ri(this,t).delete(t);return this.size-=n?1:0,n},yr.prototype.get=function(t){return Ri(this,t).get(t)},yr.prototype.has=function(t){return Ri(this,t).has(t)},yr.prototype.set=function(t,n){var e=Ri(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this},br.prototype.add=br.prototype.push=function(t){return this.__data__.set(t,c),this},br.prototype.has=function(t){return this.__data__.has(t)},Or.prototype.clear=function(){this.__data__=new wr,this.size=0},Or.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Or.prototype.get=function(t){return this.__data__.get(t)},Or.prototype.has=function(t){return this.__data__.has(t)},Or.prototype.set=function(t,n){var e=this.__data__;if(e instanceof wr){var r=e.__data__;if(!Xe||r.length<u-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new yr(r)}return e.set(t,n),this.size=e.size,this};var zr=si(Vr),Br=si(Hr,!0);function Fr(t,n){var e=!0;return zr(t,function(t,r,o){return e=!!n(t,r,o)}),e}function Wr(t,n,e){for(var r=-1,o=t.length;++r<o;){var u=t[r],s=n(u);if(null!=s&&(a===i?s==s&&!js(s):e(s,a)))var a=s,c=u}return c}function Gr(t,n){var e=[];return zr(t,function(t,r,o){n(t,r,o)&&e.push(t)}),e}function qr(t,n,e,r,o){var i=-1,u=t.length;for(e||(e=$i),o||(o=[]);++i<u;){var s=t[i];n>0&&e(s)?n>1?qr(s,n-1,e,r,o):ne(o,s):r||(o[o.length]=s)}return o}var $r=ai(),Jr=ai(!0);function Vr(t,n){return t&&$r(t,n,oa)}function Hr(t,n){return t&&Jr(t,n,oa)}function Kr(t,n){return Zn(n,function(n){return Ns(t[n])})}function Yr(t,n){for(var e=0,r=(n=Vo(n,t)).length;null!=t&&e<r;)t=t[fu(n[e++])];return e&&e==r?t:i}function Zr(t,n,e){var r=n(t);return _s(t)?r:ne(r,e(t))}function Xr(t){return null==t?t===i?it:X:ie&&ie in nn(t)?function(t){var n=hn.call(t,ie),e=t[ie];try{t[ie]=i;var r=!0}catch(t){}var o=gn.call(t);return r&&(n?t[ie]=e:delete t[ie]),o}(t):function(t){return gn.call(t)}(t)}function Qr(t,n){return t>n}function to(t,n){return null!=t&&hn.call(t,n)}function no(t,n){return null!=t&&n in nn(t)}function eo(t,n,e){for(var o=e?Qn:Xn,u=t[0].length,s=t.length,a=s,c=r(s),f=1/0,h=[];a--;){var l=t[a];a&&n&&(l=te(l,_e(n))),f=Je(l.length,f),c[a]=!e&&(n||u>=120&&l.length>=120)?new br(a&&l):i}l=t[0];var p=-1,g=c[0];t:for(;++p<u&&h.length<f;){var v=l[p],d=n?n(v):v;if(v=e||0!==v?v:0,!(g?we(g,d):o(h,d,e))){for(a=s;--a;){var _=c[a];if(!(_?we(_,d):o(t[a],d,e)))continue t}g&&g.push(d),h.push(v)}}return h}function ro(t,n,e){var r=null==(t=nu(t,n=Vo(n,t)))?t:t[fu(Au(n))];return null==r?i:Jn(r,t,e)}function oo(t){return Ls(t)&&Xr(t)==F}function io(t,n,e,r,o){return t===n||(null==t||null==n||!Ls(t)&&!Ls(n)?t!=t&&n!=n:function(t,n,e,r,o,u){var s=_s(t),a=_s(n),c=s?W:Wi(t),f=a?W:Wi(n),h=(c=c==F?Q:c)==Q,l=(f=f==F?Q:f)==Q,p=c==f;if(p&&bs(t)){if(!bs(n))return!1;s=!0,h=!1}if(p&&!h)return u||(u=new Or),s||Us(t)?Si(t,n,e,r,o,u):function(t,n,e,r,o,i,u){switch(e){case ct:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case at:return!(t.byteLength!=n.byteLength||!i(new An(t),new An(n)));case q:case $:case Z:return ps(+t,+n);case V:return t.name==n.name&&t.message==n.message;case nt:case rt:return t==n+"";case Y:var s=xe;case et:var a=r&v;if(s||(s=Se),t.size!=n.size&&!a)return!1;var c=u.get(t);if(c)return c==n;r|=d,u.set(t,n);var f=Si(s(t),s(n),r,o,i,u);return u.delete(t),f;case ot:if(hr)return hr.call(t)==hr.call(n)}return!1}(t,n,c,e,r,o,u);if(!(e&v)){var g=h&&hn.call(t,"__wrapped__"),_=l&&hn.call(n,"__wrapped__");if(g||_){var m=g?t.value():t,w=_?n.value():n;return u||(u=new Or),o(m,w,e,r,u)}}return!!p&&(u||(u=new Or),function(t,n,e,r,o,u){var s=e&v,a=Di(t),c=a.length,f=Di(n).length;if(c!=f&&!s)return!1;for(var h=c;h--;){var l=a[h];if(!(s?l in n:hn.call(n,l)))return!1}var p=u.get(t);if(p&&u.get(n))return p==n;var g=!0;u.set(t,n),u.set(n,t);for(var d=s;++h<c;){l=a[h];var _=t[l],m=n[l];if(r)var w=s?r(m,_,l,n,t,u):r(_,m,l,t,n,u);if(!(w===i?_===m||o(_,m,e,r,u):w)){g=!1;break}d||(d="constructor"==l)}if(g&&!d){var y=t.constructor,b=n.constructor;y!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(g=!1)}return u.delete(t),u.delete(n),g}(t,n,e,r,o,u))}(t,n,e,r,io,o))}function uo(t,n,e,r){var o=e.length,u=o,s=!r;if(null==t)return!u;for(t=nn(t);o--;){var a=e[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=e[o])[0],f=t[c],h=a[1];if(s&&a[2]){if(f===i&&!(c in t))return!1}else{var l=new Or;if(r)var p=r(f,h,c,t,n,l);if(!(p===i?io(h,f,v|d,r,l):p))return!1}}return!0}function so(t){return!(!Es(t)||(n=t,pn&&pn in n))&&(Ns(t)?_n:Jt).test(hu(t));var n}function ao(t){return"function"==typeof t?t:null==t?Ma:"object"==typeof t?_s(t)?go(t[0],t[1]):po(t):za(t)}function co(t){if(!Zi(t))return qe(t);var n=[];for(var e in nn(t))hn.call(t,e)&&"constructor"!=e&&n.push(e);return n}function fo(t){if(!Es(t))return function(t){var n=[];if(null!=t)for(var e in nn(t))n.push(e);return n}(t);var n=Zi(t),e=[];for(var r in t)("constructor"!=r||!n&&hn.call(t,r))&&e.push(r);return e}function ho(t,n){return t<n}function lo(t,n){var e=-1,o=ws(t)?r(t.length):[];return zr(t,function(t,r,i){o[++e]=n(t,r,i)}),o}function po(t){var n=Ci(t);return 1==n.length&&n[0][2]?Qi(n[0][0],n[0][1]):function(e){return e===t||uo(e,t,n)}}function go(t,n){return Hi(t)&&Xi(n)?Qi(fu(t),n):function(e){var r=Qs(e,t);return r===i&&r===n?ta(e,t):io(n,r,v|d)}}function vo(t,n,e,r,o){t!==n&&$r(n,function(u,s){if(Es(u))o||(o=new Or),function(t,n,e,r,o,u,s){var a=eu(t,e),c=eu(n,e),f=s.get(c);if(f)Er(t,e,f);else{var h=u?u(a,c,e+"",t,n,s):i,l=h===i;if(l){var p=_s(c),g=!p&&bs(c),v=!p&&!g&&Us(c);h=c,p||g||v?_s(a)?h=a:ys(a)?h=ri(a):g?(l=!1,h=Zo(c,!0)):v?(l=!1,h=Qo(c,!0)):h=[]:Ds(c)||ds(c)?(h=a,ds(a)?h=qs(a):Es(a)&&!Ns(a)||(h=qi(c))):l=!1}l&&(s.set(c,h),o(h,c,r,u,s),s.delete(c)),Er(t,e,h)}}(t,n,s,e,vo,r,o);else{var a=r?r(eu(t,s),u,s+"",t,n,o):i;a===i&&(a=u),Er(t,s,a)}},ia)}function _o(t,n){var e=t.length;if(e)return Ji(n+=n<0?e:0,e)?t[n]:i}function mo(t,n,e){var r=-1;return n=te(n.length?n:[Ma],_e(Ui())),function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}(lo(t,function(t,e,o){return{criteria:te(n,function(n){return n(t)}),index:++r,value:t}}),function(t,n){return function(t,n,e){for(var r=-1,o=t.criteria,i=n.criteria,u=o.length,s=e.length;++r<u;){var a=ti(o[r],i[r]);if(a){if(r>=s)return a;var c=e[r];return a*("desc"==c?-1:1)}}return t.index-n.index}(t,n,e)})}function wo(t,n,e){for(var r=-1,o=n.length,i={};++r<o;){var u=n[r],s=Yr(t,u);e(s,u)&&Eo(i,Vo(u,t),s)}return i}function yo(t,n,e,r){var o=r?ce:ae,i=-1,u=n.length,s=t;for(t===n&&(n=ri(n)),e&&(s=te(t,_e(e)));++i<u;)for(var a=0,c=n[i],f=e?e(c):c;(a=o(s,f,a,r))>-1;)s!==t&&Un.call(s,a,1),Un.call(t,a,1);return t}function bo(t,n){for(var e=t?n.length:0,r=e-1;e--;){var o=n[e];if(e==r||o!==i){var i=o;Ji(o)?Un.call(t,o,1):zo(t,o)}}return t}function Oo(t,n){return t+ze(Ke()*(n-t+1))}function Ao(t,n){var e="";if(!t||n<1||n>P)return e;do{n%2&&(e+=t),(n=ze(n/2))&&(t+=t)}while(n);return e}function No(t,n){return iu(tu(t,n,Ma),t+"")}function To(t){return Nr(pa(t))}function xo(t,n){var e=pa(t);return au(e,Pr(n,0,e.length))}function Eo(t,n,e,r){if(!Es(t))return t;for(var o=-1,u=(n=Vo(n,t)).length,s=u-1,a=t;null!=a&&++o<u;){var c=fu(n[o]),f=e;if(o!=s){var h=a[c];(f=r?r(h,c,a):i)===i&&(f=Es(h)?h:Ji(n[o+1])?[]:{})}Lr(a,c,f),a=a[c]}return t}var Lo=rr?function(t,n){return rr.set(t,n),t}:Ma,So=pe?function(t,n){return pe(t,"toString",{configurable:!0,enumerable:!1,value:Ea(n),writable:!0})}:Ma;function Mo(t){return au(pa(t))}function Do(t,n,e){var o=-1,i=t.length;n<0&&(n=-n>i?0:i+n),(e=e>i?i:e)<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var u=r(i);++o<i;)u[o]=t[o+n];return u}function ko(t,n){var e;return zr(t,function(t,r,o){return!(e=n(t,r,o))}),!!e}function Io(t,n,e){var r=0,o=null==t?r:t.length;if("number"==typeof n&&n==n&&o<=z){for(;r<o;){var i=r+o>>>1,u=t[i];null!==u&&!js(u)&&(e?u<=n:u<n)?r=i+1:o=i}return o}return Po(t,n,Ma,e)}function Po(t,n,e,r){n=e(n);for(var o=0,u=null==t?0:t.length,s=n!=n,a=null===n,c=js(n),f=n===i;o<u;){var h=ze((o+u)/2),l=e(t[h]),p=l!==i,g=null===l,v=l==l,d=js(l);if(s)var _=r||v;else _=f?v&&(r||p):a?v&&p&&(r||!g):c?v&&p&&!g&&(r||!d):!g&&!d&&(r?l<=n:l<n);_?o=h+1:u=h}return Je(u,C)}function jo(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e],s=n?n(u):u;if(!e||!ps(s,a)){var a=s;i[o++]=0===u?0:u}}return i}function Uo(t){return"number"==typeof t?t:js(t)?U:+t}function Ro(t){if("string"==typeof t)return t;if(_s(t))return te(t,Ro)+"";if(js(t))return lr?lr.call(t):"";var n=t+"";return"0"==n&&1/t==-I?"-0":n}function Co(t,n,e){var r=-1,o=Xn,i=t.length,s=!0,a=[],c=a;if(e)s=!1,o=Qn;else if(i>=u){var f=n?null:Ai(t);if(f)return Se(f);s=!1,o=we,c=new br}else c=n?[]:a;t:for(;++r<i;){var h=t[r],l=n?n(h):h;if(h=e||0!==h?h:0,s&&l==l){for(var p=c.length;p--;)if(c[p]===l)continue t;n&&c.push(l),a.push(h)}else o(c,l,e)||(c!==a&&c.push(l),a.push(h))}return a}function zo(t,n){return null==(t=nu(t,n=Vo(n,t)))||delete t[fu(Au(n))]}function Bo(t,n,e,r){return Eo(t,n,e(Yr(t,n)),r)}function Fo(t,n,e,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&n(t[i],i,t););return e?Do(t,r?0:i,r?i+1:o):Do(t,r?i+1:0,r?o:i)}function Wo(t,n){var e=t;return e instanceof _r&&(e=e.value()),ee(n,function(t,n){return n.func.apply(n.thisArg,ne([t],n.args))},e)}function Go(t,n,e){var o=t.length;if(o<2)return o?Co(t[0]):[];for(var i=-1,u=r(o);++i<o;)for(var s=t[i],a=-1;++a<o;)a!=i&&(u[i]=Cr(u[i]||s,t[a],n,e));return Co(qr(u,1),n,e)}function qo(t,n,e){for(var r=-1,o=t.length,u=n.length,s={};++r<o;){var a=r<u?n[r]:i;e(s,t[r],a)}return s}function $o(t){return ys(t)?t:[]}function Jo(t){return"function"==typeof t?t:Ma}function Vo(t,n){return _s(t)?t:Hi(t,n)?[t]:cu($s(t))}var Ho=No;function Ko(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:Do(t,n,e)}var Yo=je||function(t){return Pn.clearTimeout(t)};function Zo(t,n){if(n)return t.slice();var e=t.length,r=Sn?Sn(e):new t.constructor(e);return t.copy(r),r}function Xo(t){var n=new t.constructor(t.byteLength);return new An(n).set(new An(t)),n}function Qo(t,n){var e=n?Xo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ti(t,n){if(t!==n){var e=t!==i,r=null===t,o=t==t,u=js(t),s=n!==i,a=null===n,c=n==n,f=js(n);if(!a&&!f&&!u&&t>n||u&&s&&c&&!a&&!f||r&&s&&c||!e&&c||!o)return 1;if(!r&&!u&&!f&&t<n||f&&e&&o&&!r&&!u||a&&e&&o||!s&&o||!c)return-1}return 0}function ni(t,n,e,o){for(var i=-1,u=t.length,s=e.length,a=-1,c=n.length,f=$e(u-s,0),h=r(c+f),l=!o;++a<c;)h[a]=n[a];for(;++i<s;)(l||i<u)&&(h[e[i]]=t[i]);for(;f--;)h[a++]=t[i++];return h}function ei(t,n,e,o){for(var i=-1,u=t.length,s=-1,a=e.length,c=-1,f=n.length,h=$e(u-a,0),l=r(h+f),p=!o;++i<h;)l[i]=t[i];for(var g=i;++c<f;)l[g+c]=n[c];for(;++s<a;)(p||i<u)&&(l[g+e[s]]=t[i++]);return l}function ri(t,n){var e=-1,o=t.length;for(n||(n=r(o));++e<o;)n[e]=t[e];return n}function oi(t,n,e,r){var o=!e;e||(e={});for(var u=-1,s=n.length;++u<s;){var a=n[u],c=r?r(e[a],t[a],a,e,t):i;c===i&&(c=t[a]),o?kr(e,a,c):Lr(e,a,c)}return e}function ii(t,n){return function(e,r){var o=_s(e)?Vn:Mr,i=n?n():{};return o(e,t,Ui(r,2),i)}}function ui(t){return No(function(n,e){var r=-1,o=e.length,u=o>1?e[o-1]:i,s=o>2?e[2]:i;for(u=t.length>3&&"function"==typeof u?(o--,u):i,s&&Vi(e[0],e[1],s)&&(u=o<3?i:u,o=1),n=nn(n);++r<o;){var a=e[r];a&&t(n,a,r,u)}return n})}function si(t,n){return function(e,r){if(null==e)return e;if(!ws(e))return t(e,r);for(var o=e.length,i=n?o:-1,u=nn(e);(n?i--:++i<o)&&!1!==r(u[i],i,u););return e}}function ai(t){return function(n,e,r){for(var o=-1,i=nn(n),u=r(n),s=u.length;s--;){var a=u[t?s:++o];if(!1===e(i[a],a,i))break}return n}}function ci(t){return function(n){var e=Te(n=$s(n))?ke(n):i,r=e?e[0]:n.charAt(0),o=e?Ko(e,1).join(""):n.slice(1);return r[t]()+o}}function fi(t){return function(n){return ee(Na(da(n).replace(wn,"")),t,"")}}function hi(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=gr(t.prototype),r=t.apply(e,n);return Es(r)?r:e}}function li(t){return function(n,e,r){var o=nn(n);if(!ws(n)){var u=Ui(e,3);n=oa(n),e=function(t){return u(o[t],t,o)}}var s=t(n,e,r);return s>-1?o[u?n[s]:s]:i}}function pi(t){return Mi(function(n){var e=n.length,r=e,o=dr.prototype.thru;for(t&&n.reverse();r--;){var u=n[r];if("function"!=typeof u)throw new on(a);if(o&&!s&&"wrapper"==Pi(u))var s=new dr([],!0)}for(r=s?r:e;++r<e;){var c=Pi(u=n[r]),f="wrapper"==c?Ii(u):i;s=f&&Ki(f[0])&&f[1]==(N|y|O|T)&&!f[4].length&&1==f[9]?s[Pi(f[0])].apply(s,f[3]):1==u.length&&Ki(u)?s[c]():s.thru(u)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&_s(r))return s.plant(r).value();for(var o=0,i=e?n[o].apply(this,t):r;++o<e;)i=n[o].call(this,i);return i}})}function gi(t,n,e,o,u,s,a,c,f,h){var l=n&N,p=n&_,g=n&m,v=n&(y|b),d=n&x,w=g?i:hi(t);return function _(){for(var m=arguments.length,y=r(m),b=m;b--;)y[b]=arguments[b];if(v)var O=ji(_),A=function(t,n){for(var e=t.length,r=0;e--;)t[e]===n&&++r;return r}(y,O);if(o&&(y=ni(y,o,u,v)),s&&(y=ei(y,s,a,v)),m-=A,v&&m<h){var N=Le(y,O);return bi(t,n,gi,_.placeholder,e,y,N,c,f,h-m)}var T=p?e:this,x=g?T[t]:t;return m=y.length,c?y=function(t,n){for(var e=t.length,r=Je(n.length,e),o=ri(t);r--;){var u=n[r];t[r]=Ji(u,e)?o[u]:i}return t}(y,c):d&&m>1&&y.reverse(),l&&f<m&&(y.length=f),this&&this!==Pn&&this instanceof _&&(x=w||hi(x)),x.apply(T,y)}}function vi(t,n){return function(e,r){return function(t,n,e,r){return Vr(t,function(t,o,i){n(r,e(t),o,i)}),r}(e,t,n(r),{})}}function di(t,n){return function(e,r){var o;if(e===i&&r===i)return n;if(e!==i&&(o=e),r!==i){if(o===i)return r;"string"==typeof e||"string"==typeof r?(e=Ro(e),r=Ro(r)):(e=Uo(e),r=Uo(r)),o=t(e,r)}return o}}function _i(t){return Mi(function(n){return n=te(n,_e(Ui())),No(function(e){var r=this;return t(n,function(t){return Jn(t,r,e)})})})}function mi(t,n){var e=(n=n===i?" ":Ro(n)).length;if(e<2)return e?Ao(n,t):n;var r=Ao(n,Ce(t/De(n)));return Te(n)?Ko(ke(r),0,t).join(""):r.slice(0,t)}function wi(t){return function(n,e,o){return o&&"number"!=typeof o&&Vi(n,e,o)&&(e=o=i),n=Bs(n),e===i?(e=n,n=0):e=Bs(e),function(t,n,e,o){for(var i=-1,u=$e(Ce((n-t)/(e||1)),0),s=r(u);u--;)s[o?u:++i]=t,t+=e;return s}(n,e,o=o===i?n<e?1:-1:Bs(o),t)}}function yi(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=Gs(n),e=Gs(e)),t(n,e)}}function bi(t,n,e,r,o,u,s,a,c,f){var h=n&y;n|=h?O:A,(n&=~(h?A:O))&w||(n&=~(_|m));var l=[t,n,o,h?u:i,h?s:i,h?i:u,h?i:s,a,c,f],p=e.apply(i,l);return Ki(t)&&ru(p,l),p.placeholder=r,uu(p,t,n)}function Oi(t){var n=tn[t];return function(t,e){if(t=Gs(t),e=null==e?0:Je(Fs(e),292)){var r=($s(t)+"e").split("e");return+((r=($s(n(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return n(t)}}var Ai=tr&&1/Se(new tr([,-0]))[1]==I?function(t){return new tr(t)}:ja;function Ni(t){return function(n){var e=Wi(n);return e==Y?xe(n):e==et?Me(n):function(t,n){return te(n,function(n){return[n,t[n]]})}(n,t(n))}}function Ti(t,n,e,o,u,s,c,f){var l=n&m;if(!l&&"function"!=typeof t)throw new on(a);var p=o?o.length:0;if(p||(n&=~(O|A),o=u=i),c=c===i?c:$e(Fs(c),0),f=f===i?f:Fs(f),p-=u?u.length:0,n&A){var g=o,v=u;o=u=i}var d=l?i:Ii(t),x=[t,n,e,o,u,g,v,s,c,f];if(d&&function(t,n){var e=t[1],r=n[1],o=e|r,i=o<(_|m|N),u=r==N&&e==y||r==N&&e==T&&t[7].length<=n[8]||r==(N|T)&&n[7].length<=n[8]&&e==y;if(!i&&!u)return t;r&_&&(t[2]=n[2],o|=e&_?0:w);var s=n[3];if(s){var a=t[3];t[3]=a?ni(a,s,n[4]):s,t[4]=a?Le(t[3],h):n[4]}(s=n[5])&&(a=t[5],t[5]=a?ei(a,s,n[6]):s,t[6]=a?Le(t[5],h):n[6]),(s=n[7])&&(t[7]=s),r&N&&(t[8]=null==t[8]?n[8]:Je(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=o}(x,d),t=x[0],n=x[1],e=x[2],o=x[3],u=x[4],!(f=x[9]=x[9]===i?l?0:t.length:$e(x[9]-p,0))&&n&(y|b)&&(n&=~(y|b)),n&&n!=_)E=n==y||n==b?function(t,n,e){var o=hi(t);return function u(){for(var s=arguments.length,a=r(s),c=s,f=ji(u);c--;)a[c]=arguments[c];var h=s<3&&a[0]!==f&&a[s-1]!==f?[]:Le(a,f);return(s-=h.length)<e?bi(t,n,gi,u.placeholder,i,a,h,i,i,e-s):Jn(this&&this!==Pn&&this instanceof u?o:t,this,a)}}(t,n,f):n!=O&&n!=(_|O)||u.length?gi.apply(i,x):function(t,n,e,o){var i=n&_,u=hi(t);return function n(){for(var s=-1,a=arguments.length,c=-1,f=o.length,h=r(f+a),l=this&&this!==Pn&&this instanceof n?u:t;++c<f;)h[c]=o[c];for(;a--;)h[c++]=arguments[++s];return Jn(l,i?e:this,h)}}(t,n,e,o);else var E=function(t,n,e){var r=n&_,o=hi(t);return function n(){return(this&&this!==Pn&&this instanceof n?o:t).apply(r?e:this,arguments)}}(t,n,e);return uu((d?Lo:ru)(E,x),t,n)}function xi(t,n,e,r){return t===i||ps(t,an[e])&&!hn.call(r,e)?n:t}function Ei(t,n,e,r,o,u){return Es(t)&&Es(n)&&(u.set(n,t),vo(t,n,i,Ei,u),u.delete(n)),t}function Li(t){return Ds(t)?i:t}function Si(t,n,e,r,o,u){var s=e&v,a=t.length,c=n.length;if(a!=c&&!(s&&c>a))return!1;var f=u.get(t);if(f&&u.get(n))return f==n;var h=-1,l=!0,p=e&d?new br:i;for(u.set(t,n),u.set(n,t);++h<a;){var g=t[h],_=n[h];if(r)var m=s?r(_,g,h,n,t,u):r(g,_,h,t,n,u);if(m!==i){if(m)continue;l=!1;break}if(p){if(!oe(n,function(t,n){if(!we(p,n)&&(g===t||o(g,t,e,r,u)))return p.push(n)})){l=!1;break}}else if(g!==_&&!o(g,_,e,r,u)){l=!1;break}}return u.delete(t),u.delete(n),l}function Mi(t){return iu(tu(t,i,mu),t+"")}function Di(t){return Zr(t,oa,Bi)}function ki(t){return Zr(t,ia,Fi)}var Ii=rr?function(t){return rr.get(t)}:ja;function Pi(t){for(var n=t.name+"",e=or[n],r=hn.call(or,n)?e.length:0;r--;){var o=e[r],i=o.func;if(null==i||i==t)return o.name}return n}function ji(t){return(hn.call(pr,"placeholder")?pr:t).placeholder}function Ui(){var t=pr.iteratee||Da;return t=t===Da?ao:t,arguments.length?t(arguments[0],arguments[1]):t}function Ri(t,n){var e,r,o=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof n?"string":"hash"]:o.map}function Ci(t){for(var n=oa(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,Xi(o)]}return n}function zi(t,n){var e=function(t,n){return null==t?i:t[n]}(t,n);return so(e)?e:i}var Bi=Be?function(t){return null==t?[]:(t=nn(t),Zn(Be(t),function(n){return jn.call(t,n)}))}:Wa,Fi=Be?function(t){for(var n=[];t;)ne(n,Bi(t)),t=kn(t);return n}:Wa,Wi=Xr;function Gi(t,n,e){for(var r=-1,o=(n=Vo(n,t)).length,i=!1;++r<o;){var u=fu(n[r]);if(!(i=null!=t&&e(t,u)))break;t=t[u]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&xs(o)&&Ji(u,o)&&(_s(t)||ds(t))}function qi(t){return"function"!=typeof t.constructor||Zi(t)?{}:gr(kn(t))}function $i(t){return _s(t)||ds(t)||!!(Cn&&t&&t[Cn])}function Ji(t,n){var e=typeof t;return!!(n=null==n?P:n)&&("number"==e||"symbol"!=e&&Ht.test(t))&&t>-1&&t%1==0&&t<n}function Vi(t,n,e){if(!Es(e))return!1;var r=typeof n;return!!("number"==r?ws(e)&&Ji(n,e.length):"string"==r&&n in e)&&ps(e[n],t)}function Hi(t,n){if(_s(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!js(t))||Mt.test(t)||!St.test(t)||null!=n&&t in nn(n)}function Ki(t){var n=Pi(t),e=pr[n];if("function"!=typeof e||!(n in _r.prototype))return!1;if(t===e)return!0;var r=Ii(e);return!!r&&t===r[0]}(Ze&&Wi(new Ze(new ArrayBuffer(1)))!=ct||Xe&&Wi(new Xe)!=Y||Qe&&"[object Promise]"!=Wi(Qe.resolve())||tr&&Wi(new tr)!=et||nr&&Wi(new nr)!=ut)&&(Wi=function(t){var n=Xr(t),e=n==Q?t.constructor:i,r=e?hu(e):"";if(r)switch(r){case ir:return ct;case ur:return Y;case sr:return"[object Promise]";case ar:return et;case cr:return ut}return n});var Yi=cn?Ns:Ga;function Zi(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||an)}function Xi(t){return t==t&&!Es(t)}function Qi(t,n){return function(e){return null!=e&&e[t]===n&&(n!==i||t in nn(e))}}function tu(t,n,e){return n=$e(n===i?t.length-1:n,0),function(){for(var o=arguments,i=-1,u=$e(o.length-n,0),s=r(u);++i<u;)s[i]=o[n+i];i=-1;for(var a=r(n+1);++i<n;)a[i]=o[i];return a[n]=e(s),Jn(t,this,a)}}function nu(t,n){return n.length<2?t:Yr(t,Do(n,0,-1))}function eu(t,n){if("__proto__"!=n)return t[n]}var ru=su(Lo),ou=Re||function(t,n){return Pn.setTimeout(t,n)},iu=su(So);function uu(t,n,e){var r=n+"";return iu(t,function(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(Rt,"{\n/* [wrapped with "+n+"] */\n")}(r,function(t,n){return Hn(B,function(e){var r="_."+e[0];n&e[1]&&!Xn(t,r)&&t.push(r)}),t.sort()}(function(t){var n=t.match(Ct);return n?n[1].split(zt):[]}(r),e)))}function su(t){var n=0,e=0;return function(){var r=Ve(),o=M-(r-e);if(e=r,o>0){if(++n>=S)return arguments[0]}else n=0;return t.apply(i,arguments)}}function au(t,n){var e=-1,r=t.length,o=r-1;for(n=n===i?r:n;++e<n;){var u=Oo(e,o),s=t[u];t[u]=t[e],t[e]=s}return t.length=n,t}var cu=function(t){var n=ss(t,function(t){return e.size===f&&e.clear(),t}),e=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Dt,function(t,e,r,o){n.push(r?o.replace(Ft,"$1"):e||t)}),n});function fu(t){if("string"==typeof t||js(t))return t;var n=t+"";return"0"==n&&1/t==-I?"-0":n}function hu(t){if(null!=t){try{return fn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function lu(t){if(t instanceof _r)return t.clone();var n=new dr(t.__wrapped__,t.__chain__);return n.__actions__=ri(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var pu=No(function(t,n){return ys(t)?Cr(t,qr(n,1,ys,!0)):[]}),gu=No(function(t,n){var e=Au(n);return ys(e)&&(e=i),ys(t)?Cr(t,qr(n,1,ys,!0),Ui(e,2)):[]}),vu=No(function(t,n){var e=Au(n);return ys(e)&&(e=i),ys(t)?Cr(t,qr(n,1,ys,!0),i,e):[]});function du(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:Fs(e);return o<0&&(o=$e(r+o,0)),se(t,Ui(n,3),o)}function _u(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return e!==i&&(o=Fs(e),o=e<0?$e(r+o,0):Je(o,r-1)),se(t,Ui(n,3),o,!0)}function mu(t){return null!=t&&t.length?qr(t,1):[]}function wu(t){return t&&t.length?t[0]:i}var yu=No(function(t){var n=te(t,$o);return n.length&&n[0]===t[0]?eo(n):[]}),bu=No(function(t){var n=Au(t),e=te(t,$o);return n===Au(e)?n=i:e.pop(),e.length&&e[0]===t[0]?eo(e,Ui(n,2)):[]}),Ou=No(function(t){var n=Au(t),e=te(t,$o);return(n="function"==typeof n?n:i)&&e.pop(),e.length&&e[0]===t[0]?eo(e,i,n):[]});function Au(t){var n=null==t?0:t.length;return n?t[n-1]:i}var Nu=No(Tu);function Tu(t,n){return t&&t.length&&n&&n.length?yo(t,n):t}var xu=Mi(function(t,n){var e=null==t?0:t.length,r=Ir(t,n);return bo(t,te(n,function(t){return Ji(t,e)?+t:t}).sort(ti)),r});function Eu(t){return null==t?t:Ye.call(t)}var Lu=No(function(t){return Co(qr(t,1,ys,!0))}),Su=No(function(t){var n=Au(t);return ys(n)&&(n=i),Co(qr(t,1,ys,!0),Ui(n,2))}),Mu=No(function(t){var n=Au(t);return n="function"==typeof n?n:i,Co(qr(t,1,ys,!0),i,n)});function Du(t){if(!t||!t.length)return[];var n=0;return t=Zn(t,function(t){if(ys(t))return n=$e(t.length,n),!0}),de(n,function(n){return te(t,le(n))})}function ku(t,n){if(!t||!t.length)return[];var e=Du(t);return null==n?e:te(e,function(t){return Jn(n,i,t)})}var Iu=No(function(t,n){return ys(t)?Cr(t,n):[]}),Pu=No(function(t){return Go(Zn(t,ys))}),ju=No(function(t){var n=Au(t);return ys(n)&&(n=i),Go(Zn(t,ys),Ui(n,2))}),Uu=No(function(t){var n=Au(t);return n="function"==typeof n?n:i,Go(Zn(t,ys),i,n)}),Ru=No(Du);var Cu=No(function(t){var n=t.length,e=n>1?t[n-1]:i;return e="function"==typeof e?(t.pop(),e):i,ku(t,e)});function zu(t){var n=pr(t);return n.__chain__=!0,n}function Bu(t,n){return n(t)}var Fu=Mi(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,o=function(n){return Ir(n,t)};return!(n>1||this.__actions__.length)&&r instanceof _r&&Ji(e)?((r=r.slice(e,+e+(n?1:0))).__actions__.push({func:Bu,args:[o],thisArg:i}),new dr(r,this.__chain__).thru(function(t){return n&&!t.length&&t.push(i),t})):this.thru(o)});var Wu=ii(function(t,n,e){hn.call(t,e)?++t[e]:kr(t,e,1)});var Gu=li(du),qu=li(_u);function $u(t,n){return(_s(t)?Hn:zr)(t,Ui(n,3))}function Ju(t,n){return(_s(t)?Kn:Br)(t,Ui(n,3))}var Vu=ii(function(t,n,e){hn.call(t,e)?t[e].push(n):kr(t,e,[n])});var Hu=No(function(t,n,e){var o=-1,i="function"==typeof n,u=ws(t)?r(t.length):[];return zr(t,function(t){u[++o]=i?Jn(n,t,e):ro(t,n,e)}),u}),Ku=ii(function(t,n,e){kr(t,e,n)});function Yu(t,n){return(_s(t)?te:lo)(t,Ui(n,3))}var Zu=ii(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});var Xu=No(function(t,n){if(null==t)return[];var e=n.length;return e>1&&Vi(t,n[0],n[1])?n=[]:e>2&&Vi(n[0],n[1],n[2])&&(n=[n[0]]),mo(t,qr(n,1),[])}),Qu=Ue||function(){return Pn.Date.now()};function ts(t,n,e){return n=e?i:n,n=t&&null==n?t.length:n,Ti(t,N,i,i,i,i,n)}function ns(t,n){var e;if("function"!=typeof n)throw new on(a);return t=Fs(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var es=No(function(t,n,e){var r=_;if(e.length){var o=Le(e,ji(es));r|=O}return Ti(t,r,n,e,o)}),rs=No(function(t,n,e){var r=_|m;if(e.length){var o=Le(e,ji(rs));r|=O}return Ti(n,r,t,e,o)});function os(t,n,e){var r,o,u,s,c,f,h=0,l=!1,p=!1,g=!0;if("function"!=typeof t)throw new on(a);function v(n){var e=r,u=o;return r=o=i,h=n,s=t.apply(u,e)}function d(t){var e=t-f;return f===i||e>=n||e<0||p&&t-h>=u}function _(){var t=Qu();if(d(t))return m(t);c=ou(_,function(t){var e=n-(t-f);return p?Je(e,u-(t-h)):e}(t))}function m(t){return c=i,g&&r?v(t):(r=o=i,s)}function w(){var t=Qu(),e=d(t);if(r=arguments,o=this,f=t,e){if(c===i)return function(t){return h=t,c=ou(_,n),l?v(t):s}(f);if(p)return c=ou(_,n),v(f)}return c===i&&(c=ou(_,n)),s}return n=Gs(n)||0,Es(e)&&(l=!!e.leading,u=(p="maxWait"in e)?$e(Gs(e.maxWait)||0,n):u,g="trailing"in e?!!e.trailing:g),w.cancel=function(){c!==i&&Yo(c),h=0,r=f=o=c=i},w.flush=function(){return c===i?s:m(Qu())},w}var is=No(function(t,n){return Rr(t,1,n)}),us=No(function(t,n,e){return Rr(t,Gs(n)||0,e)});function ss(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new on(a);var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return e.cache=i.set(o,u)||i,u};return e.cache=new(ss.Cache||yr),e}function as(t){if("function"!=typeof t)throw new on(a);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}ss.Cache=yr;var cs=Ho(function(t,n){var e=(n=1==n.length&&_s(n[0])?te(n[0],_e(Ui())):te(qr(n,1),_e(Ui()))).length;return No(function(r){for(var o=-1,i=Je(r.length,e);++o<i;)r[o]=n[o].call(this,r[o]);return Jn(t,this,r)})}),fs=No(function(t,n){var e=Le(n,ji(fs));return Ti(t,O,i,n,e)}),hs=No(function(t,n){var e=Le(n,ji(hs));return Ti(t,A,i,n,e)}),ls=Mi(function(t,n){return Ti(t,T,i,i,i,n)});function ps(t,n){return t===n||t!=t&&n!=n}var gs=yi(Qr),vs=yi(function(t,n){return t>=n}),ds=oo(function(){return arguments}())?oo:function(t){return Ls(t)&&hn.call(t,"callee")&&!jn.call(t,"callee")},_s=r.isArray,ms=Bn?_e(Bn):function(t){return Ls(t)&&Xr(t)==at};function ws(t){return null!=t&&xs(t.length)&&!Ns(t)}function ys(t){return Ls(t)&&ws(t)}var bs=Fe||Ga,Os=Fn?_e(Fn):function(t){return Ls(t)&&Xr(t)==$};function As(t){if(!Ls(t))return!1;var n=Xr(t);return n==V||n==J||"string"==typeof t.message&&"string"==typeof t.name&&!Ds(t)}function Ns(t){if(!Es(t))return!1;var n=Xr(t);return n==H||n==K||n==G||n==tt}function Ts(t){return"number"==typeof t&&t==Fs(t)}function xs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function Es(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function Ls(t){return null!=t&&"object"==typeof t}var Ss=Wn?_e(Wn):function(t){return Ls(t)&&Wi(t)==Y};function Ms(t){return"number"==typeof t||Ls(t)&&Xr(t)==Z}function Ds(t){if(!Ls(t)||Xr(t)!=Q)return!1;var n=kn(t);if(null===n)return!0;var e=hn.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&fn.call(e)==vn}var ks=Gn?_e(Gn):function(t){return Ls(t)&&Xr(t)==nt};var Is=qn?_e(qn):function(t){return Ls(t)&&Wi(t)==et};function Ps(t){return"string"==typeof t||!_s(t)&&Ls(t)&&Xr(t)==rt}function js(t){return"symbol"==typeof t||Ls(t)&&Xr(t)==ot}var Us=$n?_e($n):function(t){return Ls(t)&&xs(t.length)&&!!En[Xr(t)]};var Rs=yi(ho),Cs=yi(function(t,n){return t<=n});function zs(t){if(!t)return[];if(ws(t))return Ps(t)?ke(t):ri(t);if(zn&&t[zn])return function(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}(t[zn]());var n=Wi(t);return(n==Y?xe:n==et?Se:pa)(t)}function Bs(t){return t?(t=Gs(t))===I||t===-I?(t<0?-1:1)*j:t==t?t:0:0===t?t:0}function Fs(t){var n=Bs(t),e=n%1;return n==n?e?n-e:n:0}function Ws(t){return t?Pr(Fs(t),0,R):0}function Gs(t){if("number"==typeof t)return t;if(js(t))return U;if(Es(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Es(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pt,"");var e=$t.test(t);return e||Vt.test(t)?Dn(t.slice(2),e?2:8):qt.test(t)?U:+t}function qs(t){return oi(t,ia(t))}function $s(t){return null==t?"":Ro(t)}var Js=ui(function(t,n){if(Zi(n)||ws(n))oi(n,oa(n),t);else for(var e in n)hn.call(n,e)&&Lr(t,e,n[e])}),Vs=ui(function(t,n){oi(n,ia(n),t)}),Hs=ui(function(t,n,e,r){oi(n,ia(n),t,r)}),Ks=ui(function(t,n,e,r){oi(n,oa(n),t,r)}),Ys=Mi(Ir);var Zs=No(function(t,n){t=nn(t);var e=-1,r=n.length,o=r>2?n[2]:i;for(o&&Vi(n[0],n[1],o)&&(r=1);++e<r;)for(var u=n[e],s=ia(u),a=-1,c=s.length;++a<c;){var f=s[a],h=t[f];(h===i||ps(h,an[f])&&!hn.call(t,f))&&(t[f]=u[f])}return t}),Xs=No(function(t){return t.push(i,Ei),Jn(sa,i,t)});function Qs(t,n,e){var r=null==t?i:Yr(t,n);return r===i?e:r}function ta(t,n){return null!=t&&Gi(t,n,no)}var na=vi(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),t[n]=e},Ea(Ma)),ea=vi(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),hn.call(t,n)?t[n].push(e):t[n]=[e]},Ui),ra=No(ro);function oa(t){return ws(t)?Ar(t):co(t)}function ia(t){return ws(t)?Ar(t,!0):fo(t)}var ua=ui(function(t,n,e){vo(t,n,e)}),sa=ui(function(t,n,e,r){vo(t,n,e,r)}),aa=Mi(function(t,n){var e={};if(null==t)return e;var r=!1;n=te(n,function(n){return n=Vo(n,t),r||(r=n.length>1),n}),oi(t,ki(t),e),r&&(e=jr(e,l|p|g,Li));for(var o=n.length;o--;)zo(e,n[o]);return e});var ca=Mi(function(t,n){return null==t?{}:function(t,n){return wo(t,n,function(n,e){return ta(t,e)})}(t,n)});function fa(t,n){if(null==t)return{};var e=te(ki(t),function(t){return[t]});return n=Ui(n),wo(t,e,function(t,e){return n(t,e[0])})}var ha=Ni(oa),la=Ni(ia);function pa(t){return null==t?[]:me(t,oa(t))}var ga=fi(function(t,n,e){return n=n.toLowerCase(),t+(e?va(n):n)});function va(t){return Aa($s(t).toLowerCase())}function da(t){return(t=$s(t))&&t.replace(Kt,Oe).replace(yn,"")}var _a=fi(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),ma=fi(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),wa=ci("toLowerCase");var ya=fi(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});var ba=fi(function(t,n,e){return t+(e?" ":"")+Aa(n)});var Oa=fi(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Aa=ci("toUpperCase");function Na(t,n,e){return t=$s(t),(n=e?i:n)===i?function(t){return Nn.test(t)}(t)?function(t){return t.match(On)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(n)||[]}var Ta=No(function(t,n){try{return Jn(t,i,n)}catch(t){return As(t)?t:new Xt(t)}}),xa=Mi(function(t,n){return Hn(n,function(n){n=fu(n),kr(t,n,es(t[n],t))}),t});function Ea(t){return function(){return t}}var La=pi(),Sa=pi(!0);function Ma(t){return t}function Da(t){return ao("function"==typeof t?t:jr(t,l))}var ka=No(function(t,n){return function(e){return ro(e,t,n)}}),Ia=No(function(t,n){return function(e){return ro(t,e,n)}});function Pa(t,n,e){var r=oa(n),o=Kr(n,r);null!=e||Es(n)&&(o.length||!r.length)||(e=n,n=t,t=this,o=Kr(n,oa(n)));var i=!(Es(e)&&"chain"in e&&!e.chain),u=Ns(t);return Hn(o,function(e){var r=n[e];t[e]=r,u&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__);return(e.__actions__=ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,ne([this.value()],arguments))})}),t}function ja(){}var Ua=_i(te),Ra=_i(Yn),Ca=_i(oe);function za(t){return Hi(t)?le(fu(t)):function(t){return function(n){return Yr(n,t)}}(t)}var Ba=wi(),Fa=wi(!0);function Wa(){return[]}function Ga(){return!1}var qa=di(function(t,n){return t+n},0),$a=Oi("ceil"),Ja=di(function(t,n){return t/n},1),Va=Oi("floor");var Ha,Ka=di(function(t,n){return t*n},1),Ya=Oi("round"),Za=di(function(t,n){return t-n},0);return pr.after=function(t,n){if("function"!=typeof n)throw new on(a);return t=Fs(t),function(){if(--t<1)return n.apply(this,arguments)}},pr.ary=ts,pr.assign=Js,pr.assignIn=Vs,pr.assignInWith=Hs,pr.assignWith=Ks,pr.at=Ys,pr.before=ns,pr.bind=es,pr.bindAll=xa,pr.bindKey=rs,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return _s(t)?t:[t]},pr.chain=zu,pr.chunk=function(t,n,e){n=(e?Vi(t,n,e):n===i)?1:$e(Fs(n),0);var o=null==t?0:t.length;if(!o||n<1)return[];for(var u=0,s=0,a=r(Ce(o/n));u<o;)a[s++]=Do(t,u,u+=n);return a},pr.compact=function(t){for(var n=-1,e=null==t?0:t.length,r=0,o=[];++n<e;){var i=t[n];i&&(o[r++]=i)}return o},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var n=r(t-1),e=arguments[0],o=t;o--;)n[o-1]=arguments[o];return ne(_s(e)?ri(e):[e],qr(n,1))},pr.cond=function(t){var n=null==t?0:t.length,e=Ui();return t=n?te(t,function(t){if("function"!=typeof t[1])throw new on(a);return[e(t[0]),t[1]]}):[],No(function(e){for(var r=-1;++r<n;){var o=t[r];if(Jn(o[0],this,e))return Jn(o[1],this,e)}})},pr.conforms=function(t){return function(t){var n=oa(t);return function(e){return Ur(e,t,n)}}(jr(t,l))},pr.constant=Ea,pr.countBy=Wu,pr.create=function(t,n){var e=gr(t);return null==n?e:Dr(e,n)},pr.curry=function t(n,e,r){var o=Ti(n,y,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},pr.curryRight=function t(n,e,r){var o=Ti(n,b,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},pr.debounce=os,pr.defaults=Zs,pr.defaultsDeep=Xs,pr.defer=is,pr.delay=us,pr.difference=pu,pr.differenceBy=gu,pr.differenceWith=vu,pr.drop=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=e||n===i?1:Fs(n))<0?0:n,r):[]},pr.dropRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,0,(n=r-(n=e||n===i?1:Fs(n)))<0?0:n):[]},pr.dropRightWhile=function(t,n){return t&&t.length?Fo(t,Ui(n,3),!0,!0):[]},pr.dropWhile=function(t,n){return t&&t.length?Fo(t,Ui(n,3),!0):[]},pr.fill=function(t,n,e,r){var o=null==t?0:t.length;return o?(e&&"number"!=typeof e&&Vi(t,n,e)&&(e=0,r=o),function(t,n,e,r){var o=t.length;for((e=Fs(e))<0&&(e=-e>o?0:o+e),(r=r===i||r>o?o:Fs(r))<0&&(r+=o),r=e>r?0:Ws(r);e<r;)t[e++]=n;return t}(t,n,e,r)):[]},pr.filter=function(t,n){return(_s(t)?Zn:Gr)(t,Ui(n,3))},pr.flatMap=function(t,n){return qr(Yu(t,n),1)},pr.flatMapDeep=function(t,n){return qr(Yu(t,n),I)},pr.flatMapDepth=function(t,n,e){return e=e===i?1:Fs(e),qr(Yu(t,n),e)},pr.flatten=mu,pr.flattenDeep=function(t){return null!=t&&t.length?qr(t,I):[]},pr.flattenDepth=function(t,n){return null!=t&&t.length?qr(t,n=n===i?1:Fs(n)):[]},pr.flip=function(t){return Ti(t,x)},pr.flow=La,pr.flowRight=Sa,pr.fromPairs=function(t){for(var n=-1,e=null==t?0:t.length,r={};++n<e;){var o=t[n];r[o[0]]=o[1]}return r},pr.functions=function(t){return null==t?[]:Kr(t,oa(t))},pr.functionsIn=function(t){return null==t?[]:Kr(t,ia(t))},pr.groupBy=Vu,pr.initial=function(t){return null!=t&&t.length?Do(t,0,-1):[]},pr.intersection=yu,pr.intersectionBy=bu,pr.intersectionWith=Ou,pr.invert=na,pr.invertBy=ea,pr.invokeMap=Hu,pr.iteratee=Da,pr.keyBy=Ku,pr.keys=oa,pr.keysIn=ia,pr.map=Yu,pr.mapKeys=function(t,n){var e={};return n=Ui(n,3),Vr(t,function(t,r,o){kr(e,n(t,r,o),t)}),e},pr.mapValues=function(t,n){var e={};return n=Ui(n,3),Vr(t,function(t,r,o){kr(e,r,n(t,r,o))}),e},pr.matches=function(t){return po(jr(t,l))},pr.matchesProperty=function(t,n){return go(t,jr(n,l))},pr.memoize=ss,pr.merge=ua,pr.mergeWith=sa,pr.method=ka,pr.methodOf=Ia,pr.mixin=Pa,pr.negate=as,pr.nthArg=function(t){return t=Fs(t),No(function(n){return _o(n,t)})},pr.omit=aa,pr.omitBy=function(t,n){return fa(t,as(Ui(n)))},pr.once=function(t){return ns(2,t)},pr.orderBy=function(t,n,e,r){return null==t?[]:(_s(n)||(n=null==n?[]:[n]),_s(e=r?i:e)||(e=null==e?[]:[e]),mo(t,n,e))},pr.over=Ua,pr.overArgs=cs,pr.overEvery=Ra,pr.overSome=Ca,pr.partial=fs,pr.partialRight=hs,pr.partition=Zu,pr.pick=ca,pr.pickBy=fa,pr.property=za,pr.propertyOf=function(t){return function(n){return null==t?i:Yr(t,n)}},pr.pull=Nu,pr.pullAll=Tu,pr.pullAllBy=function(t,n,e){return t&&t.length&&n&&n.length?yo(t,n,Ui(e,2)):t},pr.pullAllWith=function(t,n,e){return t&&t.length&&n&&n.length?yo(t,n,i,e):t},pr.pullAt=xu,pr.range=Ba,pr.rangeRight=Fa,pr.rearg=ls,pr.reject=function(t,n){return(_s(t)?Zn:Gr)(t,as(Ui(n,3)))},pr.remove=function(t,n){var e=[];if(!t||!t.length)return e;var r=-1,o=[],i=t.length;for(n=Ui(n,3);++r<i;){var u=t[r];n(u,r,t)&&(e.push(u),o.push(r))}return bo(t,o),e},pr.rest=function(t,n){if("function"!=typeof t)throw new on(a);return No(t,n=n===i?n:Fs(n))},pr.reverse=Eu,pr.sampleSize=function(t,n,e){return n=(e?Vi(t,n,e):n===i)?1:Fs(n),(_s(t)?Tr:xo)(t,n)},pr.set=function(t,n,e){return null==t?t:Eo(t,n,e)},pr.setWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:Eo(t,n,e,r)},pr.shuffle=function(t){return(_s(t)?xr:Mo)(t)},pr.slice=function(t,n,e){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&Vi(t,n,e)?(n=0,e=r):(n=null==n?0:Fs(n),e=e===i?r:Fs(e)),Do(t,n,e)):[]},pr.sortBy=Xu,pr.sortedUniq=function(t){return t&&t.length?jo(t):[]},pr.sortedUniqBy=function(t,n){return t&&t.length?jo(t,Ui(n,2)):[]},pr.split=function(t,n,e){return e&&"number"!=typeof e&&Vi(t,n,e)&&(n=e=i),(e=e===i?R:e>>>0)?(t=$s(t))&&("string"==typeof n||null!=n&&!ks(n))&&!(n=Ro(n))&&Te(t)?Ko(ke(t),0,e):t.split(n,e):[]},pr.spread=function(t,n){if("function"!=typeof t)throw new on(a);return n=null==n?0:$e(Fs(n),0),No(function(e){var r=e[n],o=Ko(e,0,n);return r&&ne(o,r),Jn(t,this,o)})},pr.tail=function(t){var n=null==t?0:t.length;return n?Do(t,1,n):[]},pr.take=function(t,n,e){return t&&t.length?Do(t,0,(n=e||n===i?1:Fs(n))<0?0:n):[]},pr.takeRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=r-(n=e||n===i?1:Fs(n)))<0?0:n,r):[]},pr.takeRightWhile=function(t,n){return t&&t.length?Fo(t,Ui(n,3),!1,!0):[]},pr.takeWhile=function(t,n){return t&&t.length?Fo(t,Ui(n,3)):[]},pr.tap=function(t,n){return n(t),t},pr.throttle=function(t,n,e){var r=!0,o=!0;if("function"!=typeof t)throw new on(a);return Es(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),os(t,n,{leading:r,maxWait:n,trailing:o})},pr.thru=Bu,pr.toArray=zs,pr.toPairs=ha,pr.toPairsIn=la,pr.toPath=function(t){return _s(t)?te(t,fu):js(t)?[t]:ri(cu($s(t)))},pr.toPlainObject=qs,pr.transform=function(t,n,e){var r=_s(t),o=r||bs(t)||Us(t);if(n=Ui(n,4),null==e){var i=t&&t.constructor;e=o?r?new i:[]:Es(t)&&Ns(i)?gr(kn(t)):{}}return(o?Hn:Vr)(t,function(t,r,o){return n(e,t,r,o)}),e},pr.unary=function(t){return ts(t,1)},pr.union=Lu,pr.unionBy=Su,pr.unionWith=Mu,pr.uniq=function(t){return t&&t.length?Co(t):[]},pr.uniqBy=function(t,n){return t&&t.length?Co(t,Ui(n,2)):[]},pr.uniqWith=function(t,n){return n="function"==typeof n?n:i,t&&t.length?Co(t,i,n):[]},pr.unset=function(t,n){return null==t||zo(t,n)},pr.unzip=Du,pr.unzipWith=ku,pr.update=function(t,n,e){return null==t?t:Bo(t,n,Jo(e))},pr.updateWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:Bo(t,n,Jo(e),r)},pr.values=pa,pr.valuesIn=function(t){return null==t?[]:me(t,ia(t))},pr.without=Iu,pr.words=Na,pr.wrap=function(t,n){return fs(Jo(n),t)},pr.xor=Pu,pr.xorBy=ju,pr.xorWith=Uu,pr.zip=Ru,pr.zipObject=function(t,n){return qo(t||[],n||[],Lr)},pr.zipObjectDeep=function(t,n){return qo(t||[],n||[],Eo)},pr.zipWith=Cu,pr.entries=ha,pr.entriesIn=la,pr.extend=Vs,pr.extendWith=Hs,Pa(pr,pr),pr.add=qa,pr.attempt=Ta,pr.camelCase=ga,pr.capitalize=va,pr.ceil=$a,pr.clamp=function(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=(e=Gs(e))==e?e:0),n!==i&&(n=(n=Gs(n))==n?n:0),Pr(Gs(t),n,e)},pr.clone=function(t){return jr(t,g)},pr.cloneDeep=function(t){return jr(t,l|g)},pr.cloneDeepWith=function(t,n){return jr(t,l|g,n="function"==typeof n?n:i)},pr.cloneWith=function(t,n){return jr(t,g,n="function"==typeof n?n:i)},pr.conformsTo=function(t,n){return null==n||Ur(t,n,oa(n))},pr.deburr=da,pr.defaultTo=function(t,n){return null==t||t!=t?n:t},pr.divide=Ja,pr.endsWith=function(t,n,e){t=$s(t),n=Ro(n);var r=t.length,o=e=e===i?r:Pr(Fs(e),0,r);return(e-=n.length)>=0&&t.slice(e,o)==n},pr.eq=ps,pr.escape=function(t){return(t=$s(t))&&Tt.test(t)?t.replace(At,Ae):t},pr.escapeRegExp=function(t){return(t=$s(t))&&It.test(t)?t.replace(kt,"\\$&"):t},pr.every=function(t,n,e){var r=_s(t)?Yn:Fr;return e&&Vi(t,n,e)&&(n=i),r(t,Ui(n,3))},pr.find=Gu,pr.findIndex=du,pr.findKey=function(t,n){return ue(t,Ui(n,3),Vr)},pr.findLast=qu,pr.findLastIndex=_u,pr.findLastKey=function(t,n){return ue(t,Ui(n,3),Hr)},pr.floor=Va,pr.forEach=$u,pr.forEachRight=Ju,pr.forIn=function(t,n){return null==t?t:$r(t,Ui(n,3),ia)},pr.forInRight=function(t,n){return null==t?t:Jr(t,Ui(n,3),ia)},pr.forOwn=function(t,n){return t&&Vr(t,Ui(n,3))},pr.forOwnRight=function(t,n){return t&&Hr(t,Ui(n,3))},pr.get=Qs,pr.gt=gs,pr.gte=vs,pr.has=function(t,n){return null!=t&&Gi(t,n,to)},pr.hasIn=ta,pr.head=wu,pr.identity=Ma,pr.includes=function(t,n,e,r){t=ws(t)?t:pa(t),e=e&&!r?Fs(e):0;var o=t.length;return e<0&&(e=$e(o+e,0)),Ps(t)?e<=o&&t.indexOf(n,e)>-1:!!o&&ae(t,n,e)>-1},pr.indexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:Fs(e);return o<0&&(o=$e(r+o,0)),ae(t,n,o)},pr.inRange=function(t,n,e){return n=Bs(n),e===i?(e=n,n=0):e=Bs(e),function(t,n,e){return t>=Je(n,e)&&t<$e(n,e)}(t=Gs(t),n,e)},pr.invoke=ra,pr.isArguments=ds,pr.isArray=_s,pr.isArrayBuffer=ms,pr.isArrayLike=ws,pr.isArrayLikeObject=ys,pr.isBoolean=function(t){return!0===t||!1===t||Ls(t)&&Xr(t)==q},pr.isBuffer=bs,pr.isDate=Os,pr.isElement=function(t){return Ls(t)&&1===t.nodeType&&!Ds(t)},pr.isEmpty=function(t){if(null==t)return!0;if(ws(t)&&(_s(t)||"string"==typeof t||"function"==typeof t.splice||bs(t)||Us(t)||ds(t)))return!t.length;var n=Wi(t);if(n==Y||n==et)return!t.size;if(Zi(t))return!co(t).length;for(var e in t)if(hn.call(t,e))return!1;return!0},pr.isEqual=function(t,n){return io(t,n)},pr.isEqualWith=function(t,n,e){var r=(e="function"==typeof e?e:i)?e(t,n):i;return r===i?io(t,n,i,e):!!r},pr.isError=As,pr.isFinite=function(t){return"number"==typeof t&&We(t)},pr.isFunction=Ns,pr.isInteger=Ts,pr.isLength=xs,pr.isMap=Ss,pr.isMatch=function(t,n){return t===n||uo(t,n,Ci(n))},pr.isMatchWith=function(t,n,e){return e="function"==typeof e?e:i,uo(t,n,Ci(n),e)},pr.isNaN=function(t){return Ms(t)&&t!=+t},pr.isNative=function(t){if(Yi(t))throw new Xt(s);return so(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=Ms,pr.isObject=Es,pr.isObjectLike=Ls,pr.isPlainObject=Ds,pr.isRegExp=ks,pr.isSafeInteger=function(t){return Ts(t)&&t>=-P&&t<=P},pr.isSet=Is,pr.isString=Ps,pr.isSymbol=js,pr.isTypedArray=Us,pr.isUndefined=function(t){return t===i},pr.isWeakMap=function(t){return Ls(t)&&Wi(t)==ut},pr.isWeakSet=function(t){return Ls(t)&&Xr(t)==st},pr.join=function(t,n){return null==t?"":Ge.call(t,n)},pr.kebabCase=_a,pr.last=Au,pr.lastIndexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r;return e!==i&&(o=(o=Fs(e))<0?$e(r+o,0):Je(o,r-1)),n==n?function(t,n,e){for(var r=e+1;r--;)if(t[r]===n)return r;return r}(t,n,o):se(t,fe,o,!0)},pr.lowerCase=ma,pr.lowerFirst=wa,pr.lt=Rs,pr.lte=Cs,pr.max=function(t){return t&&t.length?Wr(t,Ma,Qr):i},pr.maxBy=function(t,n){return t&&t.length?Wr(t,Ui(n,2),Qr):i},pr.mean=function(t){return he(t,Ma)},pr.meanBy=function(t,n){return he(t,Ui(n,2))},pr.min=function(t){return t&&t.length?Wr(t,Ma,ho):i},pr.minBy=function(t,n){return t&&t.length?Wr(t,Ui(n,2),ho):i},pr.stubArray=Wa,pr.stubFalse=Ga,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Ka,pr.nth=function(t,n){return t&&t.length?_o(t,Fs(n)):i},pr.noConflict=function(){return Pn._===this&&(Pn._=dn),this},pr.noop=ja,pr.now=Qu,pr.pad=function(t,n,e){t=$s(t);var r=(n=Fs(n))?De(t):0;if(!n||r>=n)return t;var o=(n-r)/2;return mi(ze(o),e)+t+mi(Ce(o),e)},pr.padEnd=function(t,n,e){t=$s(t);var r=(n=Fs(n))?De(t):0;return n&&r<n?t+mi(n-r,e):t},pr.padStart=function(t,n,e){t=$s(t);var r=(n=Fs(n))?De(t):0;return n&&r<n?mi(n-r,e)+t:t},pr.parseInt=function(t,n,e){return e||null==n?n=0:n&&(n=+n),He($s(t).replace(jt,""),n||0)},pr.random=function(t,n,e){if(e&&"boolean"!=typeof e&&Vi(t,n,e)&&(n=e=i),e===i&&("boolean"==typeof n?(e=n,n=i):"boolean"==typeof t&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=Bs(t),n===i?(n=t,t=0):n=Bs(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var o=Ke();return Je(t+o*(n-t+Mn("1e-"+((o+"").length-1))),n)}return Oo(t,n)},pr.reduce=function(t,n,e){var r=_s(t)?ee:ge,o=arguments.length<3;return r(t,Ui(n,4),e,o,zr)},pr.reduceRight=function(t,n,e){var r=_s(t)?re:ge,o=arguments.length<3;return r(t,Ui(n,4),e,o,Br)},pr.repeat=function(t,n,e){return n=(e?Vi(t,n,e):n===i)?1:Fs(n),Ao($s(t),n)},pr.replace=function(){var t=arguments,n=$s(t[0]);return t.length<3?n:n.replace(t[1],t[2])},pr.result=function(t,n,e){var r=-1,o=(n=Vo(n,t)).length;for(o||(o=1,t=i);++r<o;){var u=null==t?i:t[fu(n[r])];u===i&&(r=o,u=e),t=Ns(u)?u.call(t):u}return t},pr.round=Ya,pr.runInContext=t,pr.sample=function(t){return(_s(t)?Nr:To)(t)},pr.size=function(t){if(null==t)return 0;if(ws(t))return Ps(t)?De(t):t.length;var n=Wi(t);return n==Y||n==et?t.size:co(t).length},pr.snakeCase=ya,pr.some=function(t,n,e){var r=_s(t)?oe:ko;return e&&Vi(t,n,e)&&(n=i),r(t,Ui(n,3))},pr.sortedIndex=function(t,n){return Io(t,n)},pr.sortedIndexBy=function(t,n,e){return Po(t,n,Ui(e,2))},pr.sortedIndexOf=function(t,n){var e=null==t?0:t.length;if(e){var r=Io(t,n);if(r<e&&ps(t[r],n))return r}return-1},pr.sortedLastIndex=function(t,n){return Io(t,n,!0)},pr.sortedLastIndexBy=function(t,n,e){return Po(t,n,Ui(e,2),!0)},pr.sortedLastIndexOf=function(t,n){if(null!=t&&t.length){var e=Io(t,n,!0)-1;if(ps(t[e],n))return e}return-1},pr.startCase=ba,pr.startsWith=function(t,n,e){return t=$s(t),e=null==e?0:Pr(Fs(e),0,t.length),n=Ro(n),t.slice(e,e+n.length)==n},pr.subtract=Za,pr.sum=function(t){return t&&t.length?ve(t,Ma):0},pr.sumBy=function(t,n){return t&&t.length?ve(t,Ui(n,2)):0},pr.template=function(t,n,e){var r=pr.templateSettings;e&&Vi(t,n,e)&&(n=i),t=$s(t),n=Hs({},n,r,xi);var o,u,s=Hs({},n.imports,r.imports,xi),a=oa(s),c=me(s,a),f=0,h=n.interpolate||Yt,l="__p += '",p=en((n.escape||Yt).source+"|"+h.source+"|"+(h===Lt?Wt:Yt).source+"|"+(n.evaluate||Yt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++xn+"]")+"\n";t.replace(p,function(n,e,r,i,s,a){return r||(r=i),l+=t.slice(f,a).replace(Zt,Ne),e&&(o=!0,l+="' +\n__e("+e+") +\n'"),s&&(u=!0,l+="';\n"+s+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=a+n.length,n}),l+="';\n";var v=n.variable;v||(l="with (obj) {\n"+l+"\n}\n"),l=(u?l.replace(wt,""):l).replace(yt,"$1").replace(bt,"$1;"),l="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var d=Ta(function(){return Qt(a,g+"return "+l).apply(i,c)});if(d.source=l,As(d))throw d;return d},pr.times=function(t,n){if((t=Fs(t))<1||t>P)return[];var e=R,r=Je(t,R);n=Ui(n),t-=R;for(var o=de(r,n);++e<t;)n(e);return o},pr.toFinite=Bs,pr.toInteger=Fs,pr.toLength=Ws,pr.toLower=function(t){return $s(t).toLowerCase()},pr.toNumber=Gs,pr.toSafeInteger=function(t){return t?Pr(Fs(t),-P,P):0===t?t:0},pr.toString=$s,pr.toUpper=function(t){return $s(t).toUpperCase()},pr.trim=function(t,n,e){if((t=$s(t))&&(e||n===i))return t.replace(Pt,"");if(!t||!(n=Ro(n)))return t;var r=ke(t),o=ke(n);return Ko(r,ye(r,o),be(r,o)+1).join("")},pr.trimEnd=function(t,n,e){if((t=$s(t))&&(e||n===i))return t.replace(Ut,"");if(!t||!(n=Ro(n)))return t;var r=ke(t);return Ko(r,0,be(r,ke(n))+1).join("")},pr.trimStart=function(t,n,e){if((t=$s(t))&&(e||n===i))return t.replace(jt,"");if(!t||!(n=Ro(n)))return t;var r=ke(t);return Ko(r,ye(r,ke(n))).join("")},pr.truncate=function(t,n){var e=E,r=L;if(Es(n)){var o="separator"in n?n.separator:o;e="length"in n?Fs(n.length):e,r="omission"in n?Ro(n.omission):r}var u=(t=$s(t)).length;if(Te(t)){var s=ke(t);u=s.length}if(e>=u)return t;var a=e-De(r);if(a<1)return r;var c=s?Ko(s,0,a).join(""):t.slice(0,a);if(o===i)return c+r;if(s&&(a+=c.length-a),ks(o)){if(t.slice(a).search(o)){var f,h=c;for(o.global||(o=en(o.source,$s(Gt.exec(o))+"g")),o.lastIndex=0;f=o.exec(h);)var l=f.index;c=c.slice(0,l===i?a:l)}}else if(t.indexOf(Ro(o),a)!=a){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},pr.unescape=function(t){return(t=$s(t))&&Nt.test(t)?t.replace(Ot,Ie):t},pr.uniqueId=function(t){var n=++ln;return $s(t)+n},pr.upperCase=Oa,pr.upperFirst=Aa,pr.each=$u,pr.eachRight=Ju,pr.first=wu,Pa(pr,(Ha={},Vr(pr,function(t,n){hn.call(pr.prototype,n)||(Ha[n]=t)}),Ha),{chain:!1}),pr.VERSION="4.17.11",Hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),Hn(["drop","take"],function(t,n){_r.prototype[t]=function(e){e=e===i?1:$e(Fs(e),0);var r=this.__filtered__&&!n?new _r(this):this.clone();return r.__filtered__?r.__takeCount__=Je(e,r.__takeCount__):r.__views__.push({size:Je(e,R),type:t+(r.__dir__<0?"Right":"")}),r},_r.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Hn(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==D||3==e;_r.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Ui(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),Hn(["head","last"],function(t,n){var e="take"+(n?"Right":"");_r.prototype[t]=function(){return this[e](1).value()[0]}}),Hn(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");_r.prototype[t]=function(){return this.__filtered__?new _r(this):this[e](1)}}),_r.prototype.compact=function(){return this.filter(Ma)},_r.prototype.find=function(t){return this.filter(t).head()},_r.prototype.findLast=function(t){return this.reverse().find(t)},_r.prototype.invokeMap=No(function(t,n){return"function"==typeof t?new _r(this):this.map(function(e){return ro(e,t,n)})}),_r.prototype.reject=function(t){return this.filter(as(Ui(t)))},_r.prototype.slice=function(t,n){t=Fs(t);var e=this;return e.__filtered__&&(t>0||n<0)?new _r(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(e=(n=Fs(n))<0?e.dropRight(-n):e.take(n-t)),e)},_r.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_r.prototype.toArray=function(){return this.take(R)},Vr(_r.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),o=pr[r?"take"+("last"==n?"Right":""):n],u=r||/^find/.test(n);o&&(pr.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,a=n instanceof _r,c=s[0],f=a||_s(n),h=function(t){var n=o.apply(pr,ne([t],s));return r&&l?n[0]:n};f&&e&&"function"==typeof c&&1!=c.length&&(a=f=!1);var l=this.__chain__,p=!!this.__actions__.length,g=u&&!l,v=a&&!p;if(!u&&f){n=v?n:new _r(this);var d=t.apply(n,s);return d.__actions__.push({func:Bu,args:[h],thisArg:i}),new dr(d,l)}return g&&v?t.apply(this,s):(d=this.thru(h),g?r?d.value()[0]:d.value():d)})}),Hn(["pop","push","shift","sort","splice","unshift"],function(t){var n=un[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(_s(o)?o:[],t)}return this[e](function(e){return n.apply(_s(e)?e:[],t)})}}),Vr(_r.prototype,function(t,n){var e=pr[n];if(e){var r=e.name+"";(or[r]||(or[r]=[])).push({name:n,func:e})}}),or[gi(i,m).name]=[{name:"wrapper",func:i}],_r.prototype.clone=function(){var t=new _r(this.__wrapped__);return t.__actions__=ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ri(this.__views__),t},_r.prototype.reverse=function(){if(this.__filtered__){var t=new _r(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_r.prototype.value=function(){var t=this.__wrapped__.value(),n=this.__dir__,e=_s(t),r=n<0,o=e?t.length:0,i=function(t,n,e){for(var r=-1,o=e.length;++r<o;){var i=e[r],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":n-=u;break;case"take":n=Je(n,t+u);break;case"takeRight":t=$e(t,n-u)}}return{start:t,end:n}}(0,o,this.__views__),u=i.start,s=i.end,a=s-u,c=r?s:u-1,f=this.__iteratees__,h=f.length,l=0,p=Je(a,this.__takeCount__);if(!e||!r&&o==a&&p==a)return Wo(t,this.__actions__);var g=[];t:for(;a--&&l<p;){for(var v=-1,d=t[c+=n];++v<h;){var _=f[v],m=_.iteratee,w=_.type,y=m(d);if(w==k)d=y;else if(!y){if(w==D)continue t;break t}}g[l++]=d}return g},pr.prototype.at=Fu,pr.prototype.chain=function(){return zu(this)},pr.prototype.commit=function(){return new dr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===i&&(this.__values__=zs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var n,e=this;e instanceof vr;){var r=lu(e);r.__index__=0,r.__values__=i,n?o.__wrapped__=r:n=r;var o=r;e=e.__wrapped__}return o.__wrapped__=t,n},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _r){var n=t;return this.__actions__.length&&(n=new _r(this)),(n=n.reverse()).__actions__.push({func:Bu,args:[Eu],thisArg:i}),new dr(n,this.__chain__)}return this.thru(Eu)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Wo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,zn&&(pr.prototype[zn]=function(){return this}),pr}();Pn._=Pe,(o=function(){return Pe}.call(n,e,n,r))===i||(r.exports=o)}).call(this)}).call(this,e(19),e(20)(t))},function(t,n,e){var r,o,i={activation:e(4),methods:e(0),Connection:e(5),architect:e(18),Network:e(3),config:e(1),Group:e(7),Layer:e(8),Node:e(2),Neat:e(28),GAN:e(29),multi:e(6)};void 0===(r=function(){return i}.apply(n,[]))||(t.exports=r),t.exports&&(t.exports=i),"object"==typeof window&&(o=window.carrot,i.ninja=function(){return window.carrot=o,i},window.carrot=i)},function(t,n,e){var r=e(4),o={ADD_NODE:{name:"ADD_NODE",randomActivation:!0},SUB_NODE:{name:"SUB_NODE",keep_gates:!0},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",min:-1,max:1},MOD_BIAS:{name:"MOD_BIAS",min:-1,max:1},MOD_ACTIVATION:{name:"MOD_ACTIVATION",mutateOutput:!1,allowed:[r.LOGISTIC,r.TANH,r.RELU,r.IDENTITY,r.STEP,r.SOFTSIGN,r.SINUSOID,r.GAUSSIAN,r.BENT_IDENTITY,r.BIPOLAR,r.BIPOLAR_SIGMOID,r.HARD_TANH,r.ABSOLUTE,r.INVERSE,r.SELU]},ADD_SELF_CONN:{name:"ADD_SELF_CONN"},SUB_SELF_CONN:{name:"SUB_SELF_CONN"},ADD_GATE:{name:"ADD_GATE"},SUB_GATE:{name:"SUB_GATE"},ADD_BACK_CONN:{name:"ADD_BACK_CONN"},SUB_BACK_CONN:{name:"SUB_BACK_CONN"},SWAP_NODES:{name:"SWAP_NODES",mutateOutput:!1}};o.ALL=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.ADD_GATE,o.SUB_GATE,o.ADD_SELF_CONN,o.SUB_SELF_CONN,o.ADD_BACK_CONN,o.SUB_BACK_CONN,o.SWAP_NODES],o.FFW=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.SWAP_NODES],t.exports=o},function(t,n){t.exports={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE"},POWER:{name:"POWER",power:4},TOURNAMENT:{name:"TOURNAMENT",size:5,probability:.5}}},function(t,n){t.exports={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}}},function(t,n){const e={CROSS_ENTROPY:function(t,n){let e=0;for(let r=0;r<n.length;r++)e-=t[r]*Math.log(Math.max(n[r],1e-15))+(1-t[r])*Math.log(1-Math.max(n[r],1e-15));return e/n.length},MSE:function(t,n){let e=0;for(let r=0;r<n.length;r++)e+=Math.pow(t[r]-n[r],2);return e/n.length},BINARY:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.round(2*t[r])!==Math.round(2*n[r]);return e},MAE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.abs(t[r]-n[r]);return e/n.length},MAPE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.abs((n[r]-t[r])/Math.max(t[r],1e-15));return e/n.length},WAPE:function(t,n){for(var e=0,r=0,o=0;o<n.length;o++)e+=Math.abs(t[o]-n[o]),r+=t[o];return e/r},MSLE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.log(Math.max(t[r],1e-15))-Math.log(Math.max(n[r],1e-15));return e},HINGE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.max(0,1-t[r]*n[r]);return e}};t.exports=e},function(t,n){t.exports={OUTPUT:{name:"OUTPUT"},INPUT:{name:"INPUT"},SELF:{name:"SELF"}}},function(t,n){t.exports={ALL_TO_ALL:{name:"OUTPUT"},ALL_TO_ELSE:{name:"INPUT"},ONE_TO_ONE:{name:"SELF"}}},function(t,n){const e={FIXED:function(){return function(t,n){return t}},STEP:function(t=.9,n=100){return function(e,r){return e*Math.pow(t,Math.floor(r/n))}},EXP:function(t=.999){return function(n,e){return n*Math.pow(t,e)}},INV:function(t=.001,n=2){return function(e,r){return e*Math.pow(1+t*r,-n)}}};t.exports=e},function(t,n,e){var r=e(0),o=e(3),i=e(7),u=e(8),s=e(2),a={Construct:function(t){var n,e=new o(0,0),r=[];for(n=0;n<t.length;n++){let e;if(t[n]instanceof i)for(e=0;e<t[n].nodes.length;e++)r.push(t[n].nodes[e]);else if(t[n]instanceof u)for(e=0;e<t[n].nodes.length;e++)for(var a=0;a<t[n].nodes[e].nodes.length;a++)r.push(t[n].nodes[e].nodes[a]);else t[n]instanceof s&&r.push(t[n])}var c=[],f=[];for(n=r.length-1;n>=0;n--)"output"===r[n].type||r[n].connections.out.length+r[n].connections.gated.length===0?(r[n].type="output",e.output++,f.push(r[n]),r.splice(n,1)):"input"!==r[n].type&&r[n].connections.in.length||(r[n].type="input",e.input++,c.push(r[n]),r.splice(n,1));if(r=c.concat(r).concat(f),0===e.input||0===e.output)throw new Error("Given nodes have no clear input/output node!");for(n=0;n<r.length;n++){let t;for(t=0;t<r[n].connections.out.length;t++)e.connections.push(r[n].connections.out[t]);for(t=0;t<r[n].connections.gated.length;t++)e.gates.push(r[n].connections.gated[t]);0!==r[n].connections.self.weight&&e.selfconns.push(r[n].connections.self)}return e.nodes=r,e},Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n=[];n.push(new i(t[0]));for(var e=1;e<t.length;e++){var o=t[e];o=new i(o),n.push(o),n[e-1].connect(n[e],r.connection.ALL_TO_ALL)}return a.Construct(n)},Random:function(t,n,e,i){var u,s=(i=i||{}).connections||2*n,a=i.backconnections||0,c=i.selfconnections||0,f=i.gates||0,h=new o(t,e);for(u=0;u<n;u++)h.mutate(r.mutation.ADD_NODE);for(u=0;u<s-n;u++)h.mutate(r.mutation.ADD_CONN);for(u=0;u<a;u++)h.mutate(r.mutation.ADD_BACK_CONN);for(u=0;u<c;u++)h.mutate(r.mutation.ADD_SELF_CONN);for(u=0;u<f;u++)h.mutate(r.mutation.ADD_GATE);return h},LSTM:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n,e=t.pop();"number"==typeof e?(n=new i(e),e={}):n=new i(t.pop()),n.set({type:"output"});var o={};o.memoryToMemory=e.memoryToMemory||!1,o.outputToMemory=e.outputToMemory||!1,o.outputToGates=e.outputToGates||!1,o.inputToOutput=void 0===e.inputToOutput||e.inputToOutput,o.inputToDeep=void 0===e.inputToDeep||e.inputToDeep;var u=new i(t.shift());u.set({type:"input"});var s=t,c=[];c.push(u);for(var f=u,h=0;h<s.length;h++){var l=s[h],p=new i(l),g=new i(l),v=new i(l),d=new i(l),_=h===s.length-1?n:new i(l);p.set({bias:1}),g.set({bias:1}),d.set({bias:1});var m=f.connect(v,r.connection.ALL_TO_ALL);f.connect(p,r.connection.ALL_TO_ALL),f.connect(d,r.connection.ALL_TO_ALL),f.connect(g,r.connection.ALL_TO_ALL),v.connect(p,r.connection.ALL_TO_ALL),v.connect(g,r.connection.ALL_TO_ALL),v.connect(d,r.connection.ALL_TO_ALL);var w=v.connect(v,r.connection.ONE_TO_ONE),y=v.connect(_,r.connection.ALL_TO_ALL);if(p.gate(m,r.gating.INPUT),g.gate(w,r.gating.SELF),d.gate(y,r.gating.OUTPUT),o.inputToDeep&&h>0){let t=u.connect(v,r.connection.ALL_TO_ALL);p.gate(t,r.gating.INPUT)}if(o.memoryToMemory){let t=v.connect(v,r.connection.ALL_TO_ELSE);p.gate(t,r.gating.INPUT)}if(o.outputToMemory){let t=n.connect(v,r.connection.ALL_TO_ALL);p.gate(t,r.gating.INPUT)}o.outputToGates&&(n.connect(p,r.connection.ALL_TO_ALL),n.connect(g,r.connection.ALL_TO_ALL),n.connect(d,r.connection.ALL_TO_ALL)),c.push(p),c.push(g),c.push(v),c.push(d),h!==s.length-1&&c.push(_),f=_}return o.inputToOutput&&u.connect(n,r.connection.ALL_TO_ALL),c.push(n),a.Construct(c)},GRU:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=new i(t.shift()),e=new i(t.pop()),r=t,o=[];o.push(n);for(var s=n,c=0;c<r.length;c++){var f=new u.GRU(r[c]);s.connect(f),s=f,o.push(f)}return s.connect(e),o.push(e),a.Construct(o)},Hopfield:function(t){var n=new i(t),e=new i(t);return n.connect(e,r.connection.ALL_TO_ALL),n.set({type:"input"}),e.set({squash:r.activation.STEP,type:"output"}),new a.Construct([n,e])},NARX:function(t,n,e,o,i){Array.isArray(n)||(n=[n]);var s=[],c=new u.Dense(t),f=new u.Memory(t,o),h=[],l=new u.Dense(e),p=new u.Memory(e,i);s.push(c),s.push(p);for(var g=0;g<n.length;g++){var v=new u.Dense(n[g]);h.push(v),s.push(v),void 0!==h[g-1]&&h[g-1].connect(v,r.connection.ALL_TO_ALL)}return s.push(f),s.push(l),c.connect(h[0],r.connection.ALL_TO_ALL),c.connect(f,r.connection.ONE_TO_ONE,1),f.connect(h[0],r.connection.ALL_TO_ALL),h[h.length-1].connect(l,r.connection.ALL_TO_ALL),l.connect(p,r.connection.ONE_TO_ONE,1),p.connect(h[0],r.connection.ALL_TO_ALL),c.set({type:"input"}),l.set({type:"output"}),a.Construct(s)},Liquid:function(){}};t.exports=a},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){var r={node:{TestWorker:e(22)},browser:{TestWorker:e(26)}};t.exports=r},function(t,n,e){t.exports=i;var r=e(23),o=e(24);function i(t,n){this.worker=r.fork(o.join(__dirname,"/worker")),this.worker.send({set:t,cost:n.name})}i.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:r[0],states:r[1],conns:r[2]},i=this.worker;this.worker.on("message",function t(e){i.removeListener("message",t),n(e)}),this.worker.send(o)})},terminate:function(){this.worker.kill()}}},function(n,e){n.exports=t},function(t,n,e){(function(t){function e(t,n){for(var e=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function i(t,n){if(t.filter)return t.filter(n);for(var e=[],r=0;r<t.length;r++)n(t[r],r,t)&&e.push(t[r]);return e}n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,r="/"===u.charAt(0))}return(r?"/":"")+(n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"))||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===u(t,-1);return(t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var n=0;n<t.length&&""===t[n];n++);for(var e=t.length-1;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),u=Math.min(o.length,i.length),s=u,a=0;a<u;a++)if(o[a]!==i[a]){s=a;break}var c=[];for(a=s;a<o.length;a++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var n=o(t),e=n[0],r=n[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."},n.basename=function(t,n){var e=o(t)[2];return n&&e.substr(-1*n.length)===n&&(e=e.substr(0,e.length-n.length)),e},n.extname=function(t){return o(t)[3]};var u="b"==="ab".substr(-1)?function(t,n,e){return t.substr(n,e)}:function(t,n,e){return n<0&&(n=t.length+n),t.substr(n,e)}}).call(this,e(25))},function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var a,c=[],f=!1,h=-1;function l(){f&&a&&(f=!1,a.length?c=a.concat(c):h=-1,c.length&&p())}function p(){if(!f){var t=s(l);f=!0;for(var n=c.length;n;){for(a=c,c=[];++h<n;)a&&a[h].run();h=-1,n=c.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function g(t,n){this.fun=t,this.array=n}function v(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new g(t,n)),1!==c.length||f||s(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n,e){t.exports=o;var r=e(6);function o(t,n){var e=new Blob([this._createBlobString(n)]);this.url=window.URL.createObjectURL(e),this.worker=new Worker(this.url);var r={set:new Float64Array(t).buffer};this.worker.postMessage(r,[r.set])}o.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:new Float64Array(r[0]).buffer,states:new Float64Array(r[1]).buffer,conns:new Float64Array(r[2]).buffer};this.worker.onmessage=function(t){var e=new Float64Array(t.data.buffer)[0];n(e)},this.worker.postMessage(o,[o.activations,o.states,o.conns])})},terminate:function(){this.worker.terminate(),window.URL.revokeObjectURL(this.url)},_createBlobString:function(t){return`\n      var F = [${r.activations.toString()}];\n      var cost = ${t.toString()};\n      var multi = {\n        deserializeDataSet: ${r.deserializeDataSet.toString()},\n        testSerializedSet: ${r.testSerializedSet.toString()},\n        activateSerializedNetwork: ${r.activateSerializedNetwork.toString()}\n      };\n\n      this.onmessage = function (e) {\n        if(typeof e.data.set === 'undefined'){\n          var A = new Float64Array(e.data.activations);\n          var S = new Float64Array(e.data.states);\n          var data = new Float64Array(e.data.conns);\n\n          var error = multi.testSerializedSet(set, cost, A, S, data, F);\n\n          var answer = { buffer: new Float64Array([error ]).buffer };\n          postMessage(answer, [answer.buffer]);\n        } else {\n          set = multi.deserializeDataSet(new Float64Array(e.data.set));\n        }\n      };`}}},function(t,e){t.exports=n},function(t,n,e){var r=e(3),o=e(0),i=e(1),u=o.selection;function s(t,n,e,i){this.input=t,this.output=n,i=i||{},this.equal=i.equal||!0,this.clear=i.clear||!1,this.popsize=i.popsize||50,this.elitism=i.elitism||1,this.provenance=i.provenance||0,this.mutationRate=i.mutationRate||.4,this.mutationAmount=i.mutationAmount||1,this.fitnessPopulation=i.fitnessPopulation||!1,this.selection=i.selection||o.selection.POWER,this.crossover=i.crossover||[o.crossover.SINGLE_POINT,o.crossover.TWO_POINT,o.crossover.UNIFORM,o.crossover.AVERAGE],this.mutation=i.mutation||o.mutation.FFW,this.efficientMutation=i.efficientMutation||!1,this.template=i.network||new r(this.input,this.output),this.maxNodes=i.maxNodes||1/0,this.maxConns=i.maxConns||1/0,this.maxGates=i.maxGates||1/0,this.selectMutationMethod="function"==typeof i.mutationSelection?i.mutationSelection.bind(this):this.selectMutationMethod,this.generation=0,fitnessFunction=function(t,n){let e=0;for(var r=0;r<n.length;r++)e-=t[r].test(n).error;return e-=1e-4*(t.nodes.length-t.input-t.output+t.connections.length+t.gates.length),(e=isNaN(e)?-1/0:e)/amount},this.fitness=i.fitness||fitnessFunction,this.createPool(this.template)}s.prototype={util:{filterGenome:function(t,n,e,o){let i=[...t];const u=function(t){const n=e(t);if("boolean"!=typeof n)throw new Error("pickGenome must always return a boolean!");return n};if(o){for(let n=0;n<t.length;n++)if(u(i[n])){const t=o(i[n]);if(!(t instanceof r))throw new Error("adjustGenome must always return a network!");i[n]=t}}else for(let e=0;e<t.length;e++)u(i[e])&&(i[e]=r.fromJSON(n.toJSON));return i}},createPool:function(t){this.population=[];for(var n=0;n<this.popsize;n++){var e=r.fromJSON(t.toJSON());e.score=void 0,this.population.push(e)}},evolve:async function(t,n){if(this.elitism+this.provenance>this.popsize)throw new Error("Can't evolve! Elitism + provenance exceeds population size!");void 0===this.population[this.population.length-1].score&&await this.evaluate(),t&&(this.population=this.util.filterGenome(this.population,this.template,t,n)),this.sort();var e=r.fromJSON(this.population[0].toJSON());e.score=this.population[0].score;for(var o=[],i=[],u=0;u<this.elitism;u++)i.push(this.population[u]);for(u=0;u<this.provenance;u++)o.push(r.fromJSON(this.template.toJSON()));for(u=0;u<this.popsize-this.elitism-this.provenance;u++)o.push(this.getOffspring());for(this.population=o,this.mutate(),this.population.push(...i),t&&(this.population=this.util.filterGenome(this.population,this.template,t,n)),u=0;u<this.population.length;u++)this.population[u].score=void 0;return this.generation++,e},getOffspring:function(){var t=this.getParent(),n=this.getParent();return r.crossOver(t,n,this.equal)},selectMutationMethod:function(t){var n=this.efficientMutation?t.getPossibleMutations(this.mutation):this.mutation,e=n[Math.floor(Math.random()*n.length)];return e===o.mutation.ADD_NODE&&t.nodes.length>=this.maxNodes?(i.warnings&&console.warn("maxNodes exceeded!"),null):e===o.mutation.ADD_CONN&&t.connections.length>=this.maxConns?(i.warnings&&console.warn("maxConns exceeded!"),null):e===o.mutation.ADD_GATE&&t.gates.length>=this.maxGates?(i.warnings&&console.warn("maxGates exceeded!"),null):e},mutate:function(){for(var t=0;t<this.population.length;t++)if(Math.random()<=this.mutationRate)for(var n=0;n<this.mutationAmount;n++)this.population[t].mutate(this.selectMutationMethod(this.population[t]))},evaluate:async function(){if(!this.dataset)throw new Error("You must include a dataset to use NEAT.evaluate()");var t;if(this.fitnessPopulation){if(this.clear)for(t=0;t<this.population.length;t++)this.population[t].clear();await this.fitness(this.population,this.dataset)}else for(t=0;t<this.population.length;t++){var n=this.population[t];this.clear&&n.clear(),n.score=await this.fitness(n,this.dataset)}},sort:function(){this.population.sort(function(t,n){return n.score-t.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.population[0].score<this.population[1].score&&this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();for(var t=0,n=0;n<this.population.length;n++)t+=this.population[n].score;return t/this.population.length},getParent:function(){var t;switch(this.selection){case u.POWER:this.population[0].score<this.population[1].score&&this.sort();var n=Math.floor(Math.pow(Math.random(),this.selection.power)*this.population.length);return this.population[n];case u.FITNESS_PROPORTIONATE:var e=0,r=0;for(t=0;t<this.population.length;t++){var o=this.population[t].score;r=o<r?o:r,e+=o}e+=(r=Math.abs(r))*this.population.length;var i=Math.random()*e,s=0;for(t=0;t<this.population.length;t++){let n=this.population[t];if(i<(s+=n.score+r))return n}return this.population[Math.floor(Math.random()*this.population.length)];case u.TOURNAMENT:if(this.selection.size>this.popsize)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");var a=[];for(t=0;t<this.selection.size;t++){let t=this.population[Math.floor(Math.random()*this.population.length)];a.push(t)}for(a.sort(function(t,n){return n.score-t.score}),t=0;t<this.selection.size;t++)if(Math.random()<this.selection.probability||t===this.selection.size-1)return a[t]}},export:function(){for(var t=[],n=0;n<this.population.length;n++){var e=this.population[n];t.push(e.toJSON())}return t},import:function(t){for(var n=[],e=0;e<t.length;e++){var o=t[e];n.push(r.fromJSON(o))}this.population=n,this.popsize=n.length}},t.exports=s},function(t,n,e){e(3)}])});